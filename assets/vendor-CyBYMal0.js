import{r as N,j as xe}from"./react-DU4_l3tJ.js";var Nn={exports:{}},Vn={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var So;function Mu(){return So||(So=1,function(t){function e(M,b){var G=M.length;M.push(b);e:for(;0<G;){var Z=G-1>>>1,te=M[Z];if(0<o(te,b))M[Z]=b,M[G]=te,G=Z;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var b=M[0],G=M.pop();if(G!==b){M[0]=G;e:for(var Z=0,te=M.length,zt=te>>>1;Z<zt;){var Be=2*(Z+1)-1,kn=M[Be],Ge=Be+1,Zt=M[Ge];if(0>o(kn,G))Ge<te&&0>o(Zt,kn)?(M[Z]=Zt,M[Ge]=G,Z=Ge):(M[Z]=kn,M[Be]=G,Z=Be);else if(Ge<te&&0>o(Zt,G))M[Z]=Zt,M[Ge]=G,Z=Ge;else break e}}return b}function o(M,b){var G=M.sortIndex-b.sortIndex;return G!==0?G:M.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var f=[],c=[],d=1,h=null,p=3,m=!1,g=!1,y=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(M){for(var b=n(c);b!==null;){if(b.callback===null)i(c);else if(b.startTime<=M)i(c),b.sortIndex=b.expirationTime,e(f,b);else break;b=n(c)}}function E(M){if(y=!1,_(M),!g)if(n(f)!==null)g=!0,De(S);else{var b=n(c);b!==null&&ee(E,b.startTime-M)}}function S(M,b){g=!1,y&&(y=!1,v(w),w=-1),m=!0;var G=p;try{for(_(b),h=n(f);h!==null&&(!(h.expirationTime>b)||M&&!q());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,p=h.priorityLevel;var te=Z(h.expirationTime<=b);b=t.unstable_now(),typeof te=="function"?h.callback=te:h===n(f)&&i(f),_(b)}else i(f);h=n(f)}if(h!==null)var zt=!0;else{var Be=n(c);Be!==null&&ee(E,Be.startTime-b),zt=!1}return zt}finally{h=null,p=G,m=!1}}var A=!1,I=null,w=-1,R=5,F=-1;function q(){return!(t.unstable_now()-F<R)}function ne(){if(I!==null){var M=t.unstable_now();F=M;var b=!0;try{b=I(!0,M)}finally{b?ge():(A=!1,I=null)}}else A=!1}var ge;if(typeof C=="function")ge=function(){C(ne)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,ue=Re.port2;Re.port1.onmessage=ne,ge=function(){ue.postMessage(null)}}else ge=function(){T(ne,0)};function De(M){I=M,A||(A=!0,ge())}function ee(M,b){w=T(function(){M(t.unstable_now())},b)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,De(S))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var b=3;break;default:b=p}var G=p;p=b;try{return M()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,b){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=p;p=M;try{return b()}finally{p=G}},t.unstable_scheduleCallback=function(M,b,G){var Z=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Z+G:Z):G=Z,M){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=G+te,M={id:d++,callback:b,priorityLevel:M,startTime:G,expirationTime:te,sortIndex:-1},G>Z?(M.sortIndex=G,e(c,M),n(f)===null&&M===n(c)&&(y?(v(w),w=-1):y=!0,ee(E,G-Z))):(M.sortIndex=te,e(f,M),g||m||(g=!0,De(S))),M},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(M){var b=p;return function(){var G=p;p=b;try{return M.apply(this,arguments)}finally{p=G}}}}(Vn)),Vn}var Eo;function jE(){return Eo||(Eo=1,Nn.exports=Mu()),Nn.exports}var Et={},xo;function Iu(){if(xo)return Et;xo=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.parse=l,Et.serialize=c;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function l(p,m){const g=new a,y=p.length;if(y<2)return g;const T=(m==null?void 0:m.decode)||d;let v=0;do{const C=p.indexOf("=",v);if(C===-1)break;const _=p.indexOf(";",v),E=_===-1?y:_;if(C>E){v=p.lastIndexOf(";",C-1)+1;continue}const S=u(p,v,C),A=f(p,C,S),I=p.slice(S,A);if(g[I]===void 0){let w=u(p,C+1,E),R=f(p,E,w);const F=T(p.slice(w,R));g[I]=F}v=E+1}while(v<y);return g}function u(p,m,g){do{const y=p.charCodeAt(m);if(y!==32&&y!==9)return m}while(++m<g);return g}function f(p,m,g){for(;m>g;){const y=p.charCodeAt(--m);if(y!==32&&y!==9)return m+1}return g}function c(p,m,g){const y=(g==null?void 0:g.encode)||encodeURIComponent;if(!t.test(p))throw new TypeError(`argument name is invalid: ${p}`);const T=y(m);if(!e.test(T))throw new TypeError(`argument val is invalid: ${m}`);let v=p+"="+T;if(!g)return v;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);v+="; Max-Age="+g.maxAge}if(g.domain){if(!n.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);v+="; Domain="+g.domain}if(g.path){if(!i.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);v+="; Path="+g.path}if(g.expires){if(!h(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);v+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(v+="; HttpOnly"),g.secure&&(v+="; Secure"),g.partitioned&&(v+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return v}function d(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function h(p){return o.call(p)==="[object Date]"}return Et}Iu();const Vi=N.createContext({});function Li(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const Fi=typeof window<"u",ya=Fi?N.useLayoutEffect:N.useEffect,xn=N.createContext(null);function Ui(t,e){t.indexOf(e)===-1&&t.push(e)}function bi(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ae=(t,e,n)=>n>e?e:n<t?t:n;let Bi=()=>{};const Me={},va=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Ta(t){return typeof t=="object"&&t!==null}const Ca=t=>/^0[^.\s]+$/u.test(t);function Gi(t){let e;return()=>(e===void 0&&(e=t()),e)}const de=t=>t,Pu=(t,e)=>n=>e(t(n)),Ht=(...t)=>t.reduce(Pu),Lt=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class qi{constructor(){this.subscriptions=[]}add(e){return Ui(this.subscriptions,e),()=>bi(this.subscriptions,e)}notify(e,n,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,i);else for(let a=0;a<o;a++){const l=this.subscriptions[a];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Te=t=>t*1e3,Ce=t=>t/1e3;function _a(t,e){return e?t*(1e3/e):0}const Sa=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,wu=1e-7,Ru=12;function Du(t,e,n,i,o){let a,l,u=0;do l=e+(n-e)/2,a=Sa(l,i,o)-t,a>0?n=l:e=l;while(Math.abs(a)>wu&&++u<Ru);return l}function Ot(t,e,n,i){if(t===e&&n===i)return de;const o=a=>Du(a,0,1,t,n);return a=>a===0||a===1?a:Sa(o(a),e,i)}const Ea=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,xa=t=>e=>1-t(1-e),Aa=Ot(.33,1.53,.69,.99),$i=xa(Aa),Ma=Ea($i),Ia=t=>(t*=2)<1?.5*$i(t):.5*(2-Math.pow(2,-10*(t-1))),Ji=t=>1-Math.sin(Math.acos(t)),Pa=xa(Ji),wa=Ea(Ji),ku=Ot(.42,0,1,1),Nu=Ot(0,0,.58,1),Ra=Ot(.42,0,.58,1),Vu=t=>Array.isArray(t)&&typeof t[0]!="number",Da=t=>Array.isArray(t)&&typeof t[0]=="number",Lu={linear:de,easeIn:ku,easeInOut:Ra,easeOut:Nu,circIn:Ji,circInOut:wa,circOut:Pa,backIn:$i,backInOut:Ma,backOut:Aa,anticipate:Ia},Fu=t=>typeof t=="string",Ao=t=>{if(Da(t)){Bi(t.length===4);const[e,n,i,o]=t;return Ot(e,n,i,o)}else if(Fu(t))return Lu[t];return t},Xt=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Mo={value:null};function Uu(t,e){let n=new Set,i=new Set,o=!1,a=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},f=0;function c(h){l.has(h)&&(d.schedule(h),t()),f++,h(u)}const d={schedule:(h,p=!1,m=!1)=>{const y=m&&o?n:i;return p&&l.add(h),y.has(h)||y.add(h),h},cancel:h=>{i.delete(h),l.delete(h)},process:h=>{if(u=h,o){a=!0;return}o=!0,[n,i]=[i,n],n.forEach(c),e&&Mo.value&&Mo.value.frameloop[e].push(f),f=0,n.clear(),o=!1,a&&(a=!1,d.process(h))}};return d}const bu=40;function ka(t,e){let n=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,l=Xt.reduce((_,E)=>(_[E]=Uu(a,e?E:void 0),_),{}),{setup:u,read:f,resolveKeyframes:c,preUpdate:d,update:h,preRender:p,render:m,postRender:g}=l,y=()=>{const _=Me.useManualTiming?o.timestamp:performance.now();n=!1,Me.useManualTiming||(o.delta=i?1e3/60:Math.max(Math.min(_-o.timestamp,bu),1)),o.timestamp=_,o.isProcessing=!0,u.process(o),f.process(o),c.process(o),d.process(o),h.process(o),p.process(o),m.process(o),g.process(o),o.isProcessing=!1,n&&e&&(i=!1,t(y))},T=()=>{n=!0,i=!0,o.isProcessing||t(y)};return{schedule:Xt.reduce((_,E)=>{const S=l[E];return _[E]=(A,I=!1,w=!1)=>(n||T(),S.schedule(A,I,w)),_},{}),cancel:_=>{for(let E=0;E<Xt.length;E++)l[Xt[E]].cancel(_)},state:o,steps:l}}const{schedule:K,cancel:Le,state:ie,steps:Ln}=ka(typeof requestAnimationFrame<"u"?requestAnimationFrame:de,!0);let on;function Bu(){on=void 0}const le={now:()=>(on===void 0&&le.set(ie.isProcessing||Me.useManualTiming?ie.timestamp:performance.now()),on),set:t=>{on=t,queueMicrotask(Bu)}},Na=t=>e=>typeof e=="string"&&e.startsWith(t),Hi=Na("--"),Gu=Na("var(--"),Oi=t=>Gu(t)?qu.test(t.split("/*")[0].trim()):!1,qu=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,gt={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ft={...gt,transform:t=>Ae(0,1,t)},Qt={...gt,default:1},wt=t=>Math.round(t*1e5)/1e5,Wi=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $u(t){return t==null}const Ju=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ki=(t,e)=>n=>!!(typeof n=="string"&&Ju.test(n)&&n.startsWith(t)||e&&!$u(n)&&Object.prototype.hasOwnProperty.call(n,e)),Va=(t,e,n)=>i=>{if(typeof i!="string")return i;const[o,a,l,u]=i.match(Wi);return{[t]:parseFloat(o),[e]:parseFloat(a),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},Hu=t=>Ae(0,255,t),Fn={...gt,transform:t=>Math.round(Hu(t))},He={test:Ki("rgb","red"),parse:Va("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Fn.transform(t)+", "+Fn.transform(e)+", "+Fn.transform(n)+", "+wt(Ft.transform(i))+")"};function Ou(t){let e="",n="",i="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,i+=i,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const Zn={test:Ki("#"),parse:Ou,transform:He.transform},Wt=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ke=Wt("deg"),_e=Wt("%"),L=Wt("px"),Wu=Wt("vh"),Ku=Wt("vw"),Io={..._e,parse:t=>_e.parse(t)/100,transform:t=>_e.transform(t*100)},tt={test:Ki("hsl","hue"),parse:Va("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+_e.transform(wt(e))+", "+_e.transform(wt(n))+", "+wt(Ft.transform(i))+")"},Q={test:t=>He.test(t)||Zn.test(t)||tt.test(t),parse:t=>He.test(t)?He.parse(t):tt.test(t)?tt.parse(t):Zn.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?He.transform(t):tt.transform(t),getAnimatableNone:t=>{const e=Q.parse(t);return e.alpha=0,Q.transform(e)}},Yu=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function zu(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Wi))==null?void 0:e.length)||0)+(((n=t.match(Yu))==null?void 0:n.length)||0)>0}const La="number",Fa="color",Zu="var",Xu="var(",Po="${}",Qu=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ut(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},o=[];let a=0;const u=e.replace(Qu,f=>(Q.test(f)?(i.color.push(a),o.push(Fa),n.push(Q.parse(f))):f.startsWith(Xu)?(i.var.push(a),o.push(Zu),n.push(f)):(i.number.push(a),o.push(La),n.push(parseFloat(f))),++a,Po)).split(Po);return{values:n,split:u,indexes:i,types:o}}function Ua(t){return Ut(t).values}function ba(t){const{split:e,types:n}=Ut(t),i=e.length;return o=>{let a="";for(let l=0;l<i;l++)if(a+=e[l],o[l]!==void 0){const u=n[l];u===La?a+=wt(o[l]):u===Fa?a+=Q.transform(o[l]):a+=o[l]}return a}}const ju=t=>typeof t=="number"?0:Q.test(t)?Q.getAnimatableNone(t):t;function ec(t){const e=Ua(t);return ba(t)(e.map(ju))}const Fe={test:zu,parse:Ua,createTransformer:ba,getAnimatableNone:ec};function Un(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function tc({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let o=0,a=0,l=0;if(!e)o=a=l=n;else{const u=n<.5?n*(1+e):n+e-n*e,f=2*n-u;o=Un(f,u,t+1/3),a=Un(f,u,t),l=Un(f,u,t-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:i}}function fn(t,e){return n=>n>0?e:t}const Y=(t,e,n)=>t+(e-t)*n,bn=(t,e,n)=>{const i=t*t,o=n*(e*e-i)+i;return o<0?0:Math.sqrt(o)},nc=[Zn,He,tt],ic=t=>nc.find(e=>e.test(t));function wo(t){const e=ic(t);if(!e)return!1;let n=e.parse(t);return e===tt&&(n=tc(n)),n}const Ro=(t,e)=>{const n=wo(t),i=wo(e);if(!n||!i)return fn(t,e);const o={...n};return a=>(o.red=bn(n.red,i.red,a),o.green=bn(n.green,i.green,a),o.blue=bn(n.blue,i.blue,a),o.alpha=Y(n.alpha,i.alpha,a),He.transform(o))},Xn=new Set(["none","hidden"]);function oc(t,e){return Xn.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function sc(t,e){return n=>Y(t,e,n)}function Yi(t){return typeof t=="number"?sc:typeof t=="string"?Oi(t)?fn:Q.test(t)?Ro:lc:Array.isArray(t)?Ba:typeof t=="object"?Q.test(t)?Ro:rc:fn}function Ba(t,e){const n=[...t],i=n.length,o=t.map((a,l)=>Yi(a)(a,e[l]));return a=>{for(let l=0;l<i;l++)n[l]=o[l](a);return n}}function rc(t,e){const n={...t,...e},i={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(i[o]=Yi(t[o])(t[o],e[o]));return o=>{for(const a in i)n[a]=i[a](o);return n}}function ac(t,e){const n=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],l=t.indexes[a][i[a]],u=t.values[l]??0;n[o]=u,i[a]++}return n}const lc=(t,e)=>{const n=Fe.createTransformer(e),i=Ut(t),o=Ut(e);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?Xn.has(t)&&!o.values.length||Xn.has(e)&&!i.values.length?oc(t,e):Ht(Ba(ac(i,o),o.values),n):fn(t,e)};function Ga(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Y(t,e,n):Yi(t)(t,e)}const uc=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>K.update(e,n),stop:()=>Le(e),now:()=>ie.isProcessing?ie.timestamp:le.now()}},qa=(t,e,n=10)=>{let i="";const o=Math.max(Math.round(e/n),2);for(let a=0;a<o;a++)i+=Math.round(t(a/(o-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},dn=2e4;function zi(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<dn;)e+=n,i=t.next(e);return e>=dn?1/0:e}function cc(t,e=100,n){const i=n({...t,keyframes:[0,e]}),o=Math.min(zi(i),dn);return{type:"keyframes",ease:a=>i.next(o*a).value/e,duration:Ce(o)}}const fc=5;function $a(t,e,n){const i=Math.max(e-fc,0);return _a(n-t(i),e-i)}const z={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bn=.001;function dc({duration:t=z.duration,bounce:e=z.bounce,velocity:n=z.velocity,mass:i=z.mass}){let o,a,l=1-e;l=Ae(z.minDamping,z.maxDamping,l),t=Ae(z.minDuration,z.maxDuration,Ce(t)),l<1?(o=c=>{const d=c*l,h=d*t,p=d-n,m=Qn(c,l),g=Math.exp(-h);return Bn-p/m*g},a=c=>{const h=c*l*t,p=h*n+n,m=Math.pow(l,2)*Math.pow(c,2)*t,g=Math.exp(-h),y=Qn(Math.pow(c,2),l);return(-o(c)+Bn>0?-1:1)*((p-m)*g)/y}):(o=c=>{const d=Math.exp(-c*t),h=(c-n)*t+1;return-Bn+d*h},a=c=>{const d=Math.exp(-c*t),h=(n-c)*(t*t);return d*h});const u=5/t,f=pc(o,a,u);if(t=Te(t),isNaN(f))return{stiffness:z.stiffness,damping:z.damping,duration:t};{const c=Math.pow(f,2)*i;return{stiffness:c,damping:l*2*Math.sqrt(i*c),duration:t}}}const hc=12;function pc(t,e,n){let i=n;for(let o=1;o<hc;o++)i=i-t(i)/e(i);return i}function Qn(t,e){return t*Math.sqrt(1-e*e)}const mc=["duration","bounce"],gc=["stiffness","damping","mass"];function Do(t,e){return e.some(n=>t[n]!==void 0)}function yc(t){let e={velocity:z.velocity,stiffness:z.stiffness,damping:z.damping,mass:z.mass,isResolvedFromDuration:!1,...t};if(!Do(t,gc)&&Do(t,mc))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),o=i*i,a=2*Ae(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:z.mass,stiffness:o,damping:a}}else{const n=dc(t);e={...e,...n,mass:z.mass},e.isResolvedFromDuration=!0}return e}function hn(t=z.visualDuration,e=z.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:o}=n;const a=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:a},{stiffness:f,damping:c,mass:d,duration:h,velocity:p,isResolvedFromDuration:m}=yc({...n,velocity:-Ce(n.velocity||0)}),g=p||0,y=c/(2*Math.sqrt(f*d)),T=l-a,v=Ce(Math.sqrt(f/d)),C=Math.abs(T)<5;i||(i=C?z.restSpeed.granular:z.restSpeed.default),o||(o=C?z.restDelta.granular:z.restDelta.default);let _;if(y<1){const S=Qn(v,y);_=A=>{const I=Math.exp(-y*v*A);return l-I*((g+y*v*T)/S*Math.sin(S*A)+T*Math.cos(S*A))}}else if(y===1)_=S=>l-Math.exp(-v*S)*(T+(g+v*T)*S);else{const S=v*Math.sqrt(y*y-1);_=A=>{const I=Math.exp(-y*v*A),w=Math.min(S*A,300);return l-I*((g+y*v*T)*Math.sinh(w)+S*T*Math.cosh(w))/S}}const E={calculatedDuration:m&&h||null,next:S=>{const A=_(S);if(m)u.done=S>=h;else{let I=S===0?g:0;y<1&&(I=S===0?Te(g):$a(_,S,A));const w=Math.abs(I)<=i,R=Math.abs(l-A)<=o;u.done=w&&R}return u.value=u.done?l:A,u},toString:()=>{const S=Math.min(zi(E),dn),A=qa(I=>E.next(S*I).value,S,30);return S+"ms "+A},toTransition:()=>{}};return E}hn.applyToOptions=t=>{const e=cc(t,100,hn);return t.ease=e.ease,t.duration=Te(e.duration),t.type="keyframes",t};function jn({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:l,min:u,max:f,restDelta:c=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},m=w=>u!==void 0&&w<u||f!==void 0&&w>f,g=w=>u===void 0?f:f===void 0||Math.abs(u-w)<Math.abs(f-w)?u:f;let y=n*e;const T=h+y,v=l===void 0?T:l(T);v!==T&&(y=v-h);const C=w=>-y*Math.exp(-w/i),_=w=>v+C(w),E=w=>{const R=C(w),F=_(w);p.done=Math.abs(R)<=c,p.value=p.done?v:F};let S,A;const I=w=>{m(p.value)&&(S=w,A=hn({keyframes:[p.value,g(p.value)],velocity:$a(_,w,p.value),damping:o,stiffness:a,restDelta:c,restSpeed:d}))};return I(0),{calculatedDuration:null,next:w=>{let R=!1;return!A&&S===void 0&&(R=!0,E(w),I(w)),S!==void 0&&w>=S?A.next(w-S):(!R&&E(w),p)}}}function vc(t,e,n){const i=[],o=n||Me.mix||Ga,a=t.length-1;for(let l=0;l<a;l++){let u=o(t[l],t[l+1]);if(e){const f=Array.isArray(e)?e[l]||de:e;u=Ht(f,u)}i.push(u)}return i}function Tc(t,e,{clamp:n=!0,ease:i,mixer:o}={}){const a=t.length;if(Bi(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=vc(e,i,o),f=u.length,c=d=>{if(l&&d<t[0])return e[0];let h=0;if(f>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const p=Lt(t[h],t[h+1],d);return u[h](p)};return n?d=>c(Ae(t[0],t[a-1],d)):c}function Cc(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const o=Lt(0,e,i);t.push(Y(n,1,o))}}function _c(t){const e=[0];return Cc(e,t.length-1),e}function Sc(t,e){return t.map(n=>n*e)}function Ec(t,e){return t.map(()=>e||Ra).splice(0,t.length-1)}function Rt({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const o=Vu(i)?i.map(Ao):Ao(i),a={done:!1,value:e[0]},l=Sc(n&&n.length===e.length?n:_c(e),t),u=Tc(l,e,{ease:Array.isArray(o)?o:Ec(e,o)});return{calculatedDuration:t,next:f=>(a.value=u(f),a.done=f>=t,a)}}const xc=t=>t!==null;function Zi(t,{repeat:e,repeatType:n="loop"},i,o=1){const a=t.filter(xc),u=o<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!u||i===void 0?a[u]:i}const Ac={decay:jn,inertia:jn,tween:Rt,keyframes:Rt,spring:hn};function Ja(t){typeof t.type=="string"&&(t.type=Ac[t.type])}class Xi{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Mc=t=>t/100;class Qi extends Xi{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,o;const{motionValue:n}=this.options;n&&n.updatedAt!==le.now()&&this.tick(le.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(i=this.options).onStop)==null||o.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Ja(e);const{type:n=Rt,repeat:i=0,repeatDelay:o=0,repeatType:a,velocity:l=0}=e;let{keyframes:u}=e;const f=n||Rt;f!==Rt&&typeof u[0]!="number"&&(this.mixKeyframes=Ht(Mc,Ga(u[0],u[1])),u=[0,100]);const c=f({...e,keyframes:u});a==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...u].reverse(),velocity:-l})),c.calculatedDuration===null&&(c.calculatedDuration=zi(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+o,this.totalDuration=this.resolvedDuration*(i+1)-o,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:o,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:f}=this;if(this.startTime===null)return i.next(0);const{delay:c=0,keyframes:d,repeat:h,repeatType:p,repeatDelay:m,type:g,onUpdate:y,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-c*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?v<0:v>o;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let _=this.currentTime,E=i;if(h){const w=Math.min(this.currentTime,o)/u;let R=Math.floor(w),F=w%1;!F&&w>=1&&(F=1),F===1&&R--,R=Math.min(R,h+1),!!(R%2)&&(p==="reverse"?(F=1-F,m&&(F-=m/u)):p==="mirror"&&(E=l)),_=Ae(0,1,F)*u}const S=C?{done:!1,value:d[0]}:E.next(_);a&&(S.value=a(S.value));let{done:A}=S;!C&&f!==null&&(A=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return I&&g!==jn&&(S.value=Zi(d,this.options,T,this.speed)),y&&y(S.value),I&&this.finish(),S}then(e,n){return this.finished.then(e,n)}get duration(){return Ce(this.calculatedDuration)}get time(){return Ce(this.currentTime)}set time(e){var n;e=Te(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(le.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ce(this.currentTime))}play(){var o,a;if(this.isStopped)return;const{driver:e=uc,startTime:n}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(a=(o=this.options).onPlay)==null||a.call(o);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(le.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Ic(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Oe=t=>t*180/Math.PI,ei=t=>{const e=Oe(Math.atan2(t[1],t[0]));return ti(e)},Pc={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ei,rotateZ:ei,skewX:t=>Oe(Math.atan(t[1])),skewY:t=>Oe(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ti=t=>(t=t%360,t<0&&(t+=360),t),ko=ei,No=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Vo=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),wc={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:No,scaleY:Vo,scale:t=>(No(t)+Vo(t))/2,rotateX:t=>ti(Oe(Math.atan2(t[6],t[5]))),rotateY:t=>ti(Oe(Math.atan2(-t[2],t[0]))),rotateZ:ko,rotate:ko,skewX:t=>Oe(Math.atan(t[4])),skewY:t=>Oe(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function ni(t){return t.includes("scale")?1:0}function ii(t,e){if(!t||t==="none")return ni(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,o;if(n)i=wc,o=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Pc,o=u}if(!o)return ni(e);const a=i[e],l=o[1].split(",").map(Dc);return typeof a=="function"?a(l):l[a]}const Rc=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return ii(n,e)};function Dc(t){return parseFloat(t.trim())}const yt=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vt=new Set(yt),Lo=t=>t===gt||t===L,kc=new Set(["x","y","z"]),Nc=yt.filter(t=>!kc.has(t));function Vc(t){const e=[];return Nc.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const We={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>ii(e,"x"),y:(t,{transform:e})=>ii(e,"y")};We.translateX=We.x;We.translateY=We.y;const Ke=new Set;let oi=!1,si=!1,ri=!1;function Ha(){if(si){const t=Array.from(Ke).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const o=Vc(i);o.length&&(n.set(i,o),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const o=n.get(i);o&&o.forEach(([a,l])=>{var u;(u=i.getValue(a))==null||u.set(l)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}si=!1,oi=!1,Ke.forEach(t=>t.complete(ri)),Ke.clear()}function Oa(){Ke.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(si=!0)})}function Lc(){ri=!0,Oa(),Ha(),ri=!1}class ji{constructor(e,n,i,o,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=o,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Ke.add(this),oi||(oi=!0,K.read(Oa),K.resolveKeyframes(Ha))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:o}=this;if(e[0]===null){const a=o==null?void 0:o.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const u=i.readValue(n,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),o&&a===void 0&&o.set(e[0])}Ic(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ke.delete(this)}cancel(){this.state==="scheduled"&&(Ke.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Fc=t=>t.startsWith("--");function Uc(t,e,n){Fc(e)?t.style.setProperty(e,n):t.style[e]=n}const bc=Gi(()=>window.ScrollTimeline!==void 0),Bc={};function Gc(t,e){const n=Gi(t);return()=>Bc[e]??n()}const Wa=Gc(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Mt=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Fo={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Mt([0,.65,.55,1]),circOut:Mt([.55,0,1,.45]),backIn:Mt([.31,.01,.66,-.59]),backOut:Mt([.33,1.53,.69,.99])};function Ka(t,e){if(t)return typeof t=="function"?Wa()?qa(t,e):"ease-out":Da(t)?Mt(t):Array.isArray(t)?t.map(n=>Ka(n,e)||Fo.easeOut):Fo[t]}function qc(t,e,n,{delay:i=0,duration:o=300,repeat:a=0,repeatType:l="loop",ease:u="easeOut",times:f}={},c=void 0){const d={[e]:n};f&&(d.offset=f);const h=Ka(u,o);Array.isArray(h)&&(d.easing=h);const p={delay:i,duration:o,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),t.animate(d,p)}function Ya(t){return typeof t=="function"&&"applyToOptions"in t}function $c({type:t,...e}){return Ya(t)&&Wa()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Jc extends Xi{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:o,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:u,onComplete:f}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,Bi(typeof e.type!="string");const c=$c(e);this.animation=qc(n,i,o,c,a),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=Zi(o,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(d):Uc(n,i,d),this.animation.cancel()}f==null||f(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,i;const e=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return Ce(Number(e))}get time(){return Ce(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Te(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&bc()?(this.animation.timeline=e,de):n(this)}}const za={anticipate:Ia,backInOut:Ma,circInOut:wa};function Hc(t){return t in za}function Oc(t){typeof t.ease=="string"&&Hc(t.ease)&&(t.ease=za[t.ease])}const Uo=10;class Wc extends Jc{constructor(e){Oc(e),Ja(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:o,element:a,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new Qi({...l,autoplay:!1}),f=Te(this.finishedTime??this.time);n.setWithVelocity(u.sample(f-Uo).value,u.sample(f).value,Uo),u.stop()}}const bo=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Fe.test(t)||t==="0")&&!t.startsWith("url("));function Kc(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Yc(t,e,n,i){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=bo(o,e),u=bo(a,e);return!l||!u?!1:Kc(t)||(n==="spring"||Ya(n))&&i}function eo(t){return Ta(t)&&"offsetHeight"in t}const zc=new Set(["opacity","clipPath","filter","transform"]),Zc=Gi(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Xc(t){var c;const{motionValue:e,name:n,repeatDelay:i,repeatType:o,damping:a,type:l}=t;if(!eo((c=e==null?void 0:e.owner)==null?void 0:c.current))return!1;const{onUpdate:u,transformTemplate:f}=e.owner.getProps();return Zc()&&n&&zc.has(n)&&(n!=="transform"||!f)&&!u&&!i&&o!=="mirror"&&a!==0&&l!=="inertia"}const Qc=40;class jc extends Xi{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:l="loop",keyframes:u,name:f,motionValue:c,element:d,...h}){var g;super(),this.stop=()=>{var y,T;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=le.now();const p={autoplay:e,delay:n,type:i,repeat:o,repeatDelay:a,repeatType:l,name:f,motionValue:c,element:d,...h},m=(d==null?void 0:d.KeyframeResolver)||ji;this.keyframeResolver=new m(u,(y,T,v)=>this.onKeyframesResolved(y,T,p,!v),f,c,d),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(e,n,i,o){this.keyframeResolver=void 0;const{name:a,type:l,velocity:u,delay:f,isHandoff:c,onUpdate:d}=i;this.resolvedAt=le.now(),Yc(e,a,l,u)||((Me.instantAnimations||!f)&&(d==null||d(Zi(e,i,n))),e[0]=e[e.length-1],i.duration=0,i.repeat=0);const p={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>Qc?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},m=!c&&Xc(p)?new Wc({...p,element:p.motionValue.owner.current}):new Qi(p);m.finished.then(()=>this.notifyFinished()).catch(de),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Lc()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const ef=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function tf(t){const e=ef.exec(t);if(!e)return[,];const[,n,i,o]=e;return[`--${n??i}`,o]}function Za(t,e,n=1){const[i,o]=tf(t);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const l=a.trim();return va(l)?parseFloat(l):l}return Oi(o)?Za(o,e,n+1):o}function to(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Xa=new Set(["width","height","top","left","right","bottom",...yt]),nf={test:t=>t==="auto",parse:t=>t},Qa=t=>e=>e.test(t),ja=[gt,L,_e,ke,Ku,Wu,nf],Bo=t=>ja.find(Qa(t));function of(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Ca(t):!0}const sf=new Set(["brightness","contrast","saturate","opacity"]);function rf(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Wi)||[];if(!i)return t;const o=n.replace(i,"");let a=sf.has(e)?1:0;return i!==n&&(a*=100),e+"("+a+o+")"}const af=/\b([a-z-]*)\(.*?\)/gu,ai={...Fe,getAnimatableNone:t=>{const e=t.match(af);return e?e.map(rf).join(" "):t}},Go={...gt,transform:Math.round},lf={rotate:ke,rotateX:ke,rotateY:ke,rotateZ:ke,scale:Qt,scaleX:Qt,scaleY:Qt,scaleZ:Qt,skew:ke,skewX:ke,skewY:ke,distance:L,translateX:L,translateY:L,translateZ:L,x:L,y:L,z:L,perspective:L,transformPerspective:L,opacity:Ft,originX:Io,originY:Io,originZ:L},no={borderWidth:L,borderTopWidth:L,borderRightWidth:L,borderBottomWidth:L,borderLeftWidth:L,borderRadius:L,radius:L,borderTopLeftRadius:L,borderTopRightRadius:L,borderBottomRightRadius:L,borderBottomLeftRadius:L,width:L,maxWidth:L,height:L,maxHeight:L,top:L,right:L,bottom:L,left:L,padding:L,paddingTop:L,paddingRight:L,paddingBottom:L,paddingLeft:L,margin:L,marginTop:L,marginRight:L,marginBottom:L,marginLeft:L,backgroundPositionX:L,backgroundPositionY:L,...lf,zIndex:Go,fillOpacity:Ft,strokeOpacity:Ft,numOctaves:Go},uf={...no,color:Q,backgroundColor:Q,outlineColor:Q,fill:Q,stroke:Q,borderColor:Q,borderTopColor:Q,borderRightColor:Q,borderBottomColor:Q,borderLeftColor:Q,filter:ai,WebkitFilter:ai},el=t=>uf[t];function tl(t,e){let n=el(t);return n!==ai&&(n=Fe),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const cf=new Set(["auto","none","0"]);function ff(t,e,n){let i=0,o;for(;i<t.length&&!o;){const a=t[i];typeof a=="string"&&!cf.has(a)&&Ut(a).values.length&&(o=t[i]),i++}if(o&&n)for(const a of e)t[a]=tl(n,o)}class df extends ji{constructor(e,n,i,o,a){super(e,n,i,o,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let c=e[f];if(typeof c=="string"&&(c=c.trim(),Oi(c))){const d=Za(c,n.current);d!==void 0&&(e[f]=d),f===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Xa.has(i)||e.length!==2)return;const[o,a]=e,l=Bo(o),u=Bo(a);if(l!==u)if(Lo(l)&&Lo(u))for(let f=0;f<e.length;f++){const c=e[f];typeof c=="string"&&(e[f]=parseFloat(c))}else We[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let o=0;o<e.length;o++)(e[o]===null||of(e[o]))&&i.push(o);i.length&&ff(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=We[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(i,o).jump(o,!1)}measureEndState(){var u;const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const a=i.length-1,l=i[a];i[a]=We[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([f,c])=>{e.getValue(f).set(c)}),this.resolveNoneKeyframes()}}function hf(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const o=(n==null?void 0:n[t])??i.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}const nl=(t,e)=>e&&typeof t=="number"?e.transform(t):t,qo=30,pf=t=>!isNaN(parseFloat(t));class mf{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,o=!0)=>{var l,u;const a=le.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const f of this.dependents)f.dirty();o&&((u=this.events.renderRequest)==null||u.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=le.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=pf(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new qi);const i=this.events[e].add(n);return e==="change"?()=>{i(),K.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=le.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>qo)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,qo);return _a(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ut(t,e){return new mf(t,e)}const{schedule:io}=ka(queueMicrotask,!1),me={x:!1,y:!1};function il(){return me.x||me.y}function gf(t){return t==="x"||t==="y"?me[t]?null:(me[t]=!0,()=>{me[t]=!1}):me.x||me.y?null:(me.x=me.y=!0,()=>{me.x=me.y=!1})}function ol(t,e){const n=hf(t),i=new AbortController,o={passive:!0,...e,signal:i.signal};return[n,o,()=>i.abort()]}function $o(t){return!(t.pointerType==="touch"||il())}function yf(t,e,n={}){const[i,o,a]=ol(t,n),l=u=>{if(!$o(u))return;const{target:f}=u,c=e(f,u);if(typeof c!="function"||!f)return;const d=h=>{$o(h)&&(c(h),f.removeEventListener("pointerleave",d))};f.addEventListener("pointerleave",d,o)};return i.forEach(u=>{u.addEventListener("pointerenter",l,o)}),a}const sl=(t,e)=>e?t===e?!0:sl(t,e.parentElement):!1,oo=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,vf=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Tf(t){return vf.has(t.tagName)||t.tabIndex!==-1}const sn=new WeakSet;function Jo(t){return e=>{e.key==="Enter"&&t(e)}}function Gn(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Cf=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=Jo(()=>{if(sn.has(n))return;Gn(n,"down");const o=Jo(()=>{Gn(n,"up")}),a=()=>Gn(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function Ho(t){return oo(t)&&!il()}function _f(t,e,n={}){const[i,o,a]=ol(t,n),l=u=>{const f=u.currentTarget;if(!Ho(u))return;sn.add(f);const c=e(f,u),d=(m,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),sn.has(f)&&sn.delete(f),Ho(m)&&typeof c=="function"&&c(m,{success:g})},h=m=>{d(m,f===window||f===document||n.useGlobalTarget||sl(f,m.target))},p=m=>{d(m,!1)};window.addEventListener("pointerup",h,o),window.addEventListener("pointercancel",p,o)};return i.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,o),eo(u)&&(u.addEventListener("focus",c=>Cf(c,o)),!Tf(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function rl(t){return Ta(t)&&"ownerSVGElement"in t}function Sf(t){return rl(t)&&t.tagName==="svg"}const oe=t=>!!(t&&t.getVelocity),Ef=[...ja,Q,Fe],xf=t=>Ef.find(Qa(t)),so=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Af extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,o=eo(i)&&i.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=o-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Mf({children:t,isPresent:e,anchorX:n,root:i}){const o=N.useId(),a=N.useRef(null),l=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=N.useContext(so);return N.useInsertionEffect(()=>{const{width:f,height:c,top:d,left:h,right:p}=l.current;if(e||!a.current||!f||!c)return;const m=n==="left"?`left: ${h}`:`right: ${p}`;a.current.dataset.motionPopId=o;const g=document.createElement("style");u&&(g.nonce=u);const y=i??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${c}px !important;
            ${m}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.removeChild(g),y.contains(g)&&y.removeChild(g)}},[e]),xe.jsx(Af,{isPresent:e,childRef:a,sizeRef:l,children:N.cloneElement(t,{ref:a})})}const If=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:o,presenceAffectsLayout:a,mode:l,anchorX:u,root:f})=>{const c=Li(Pf),d=N.useId();let h=!0,p=N.useMemo(()=>(h=!1,{id:d,initial:e,isPresent:n,custom:o,onExitComplete:m=>{c.set(m,!0);for(const g of c.values())if(!g)return;i&&i()},register:m=>(c.set(m,!1),()=>c.delete(m))}),[n,c,i]);return a&&h&&(p={...p}),N.useMemo(()=>{c.forEach((m,g)=>c.set(g,!1))},[n]),N.useEffect(()=>{!n&&!c.size&&i&&i()},[n]),l==="popLayout"&&(t=xe.jsx(Mf,{isPresent:n,anchorX:u,root:f,children:t})),xe.jsx(xn.Provider,{value:p,children:t})};function Pf(){return new Map}function al(t=!0){const e=N.useContext(xn);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:o}=e,a=N.useId();N.useEffect(()=>{if(t)return o(a)},[t]);const l=N.useCallback(()=>t&&i&&i(a),[a,i,t]);return!n&&i?[!1,l]:[!0]}const jt=t=>t.key||"";function Oo(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const ex=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:a="sync",propagate:l=!1,anchorX:u="left",root:f})=>{const[c,d]=al(l),h=N.useMemo(()=>Oo(t),[t]),p=l&&!c?[]:h.map(jt),m=N.useRef(!0),g=N.useRef(h),y=Li(()=>new Map),[T,v]=N.useState(h),[C,_]=N.useState(h);ya(()=>{m.current=!1,g.current=h;for(let A=0;A<C.length;A++){const I=jt(C[A]);p.includes(I)?y.delete(I):y.get(I)!==!0&&y.set(I,!1)}},[C,p.length,p.join("-")]);const E=[];if(h!==T){let A=[...h];for(let I=0;I<C.length;I++){const w=C[I],R=jt(w);p.includes(R)||(A.splice(I,0,w),E.push(w))}return a==="wait"&&E.length&&(A=E),_(Oo(A)),v(h),null}const{forceRender:S}=N.useContext(Vi);return xe.jsx(xe.Fragment,{children:C.map(A=>{const I=jt(A),w=l&&!c?!1:h===C||p.includes(I),R=()=>{if(y.has(I))y.set(I,!0);else return;let F=!0;y.forEach(q=>{q||(F=!1)}),F&&(S==null||S(),_(g.current),l&&(d==null||d()),i&&i())};return xe.jsx(If,{isPresent:w,initial:!m.current||n?void 0:!1,custom:e,presenceAffectsLayout:o,mode:a,root:f,onExitComplete:w?void 0:R,anchorX:u,children:A},I)})})},ll=N.createContext({strict:!1}),Wo={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ct={};for(const t in Wo)ct[t]={isEnabled:e=>Wo[t].some(n=>!!e[n])};function wf(t){for(const e in t)ct[e]={...ct[e],...t[e]}}const Rf=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pn(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Rf.has(t)}let ul=t=>!pn(t);function Df(t){typeof t=="function"&&(ul=e=>e.startsWith("on")?!pn(e):t(e))}try{Df(require("@emotion/is-prop-valid").default)}catch{}function kf(t,e,n){const i={};for(const o in t)o==="values"&&typeof t.values=="object"||(ul(o)||n===!0&&pn(o)||!e&&!pn(o)||t.draggable&&o.startsWith("onDrag"))&&(i[o]=t[o]);return i}function Nf(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,o)=>o==="create"?t:(e.has(o)||e.set(o,t(o)),e.get(o))})}const An=N.createContext({});function Mn(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function bt(t){return typeof t=="string"||Array.isArray(t)}const ro=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ao=["initial",...ro];function In(t){return Mn(t.animate)||ao.some(e=>bt(t[e]))}function cl(t){return!!(In(t)||t.variants)}function Vf(t,e){if(In(t)){const{initial:n,animate:i}=t;return{initial:n===!1||bt(n)?n:void 0,animate:bt(i)?i:void 0}}return t.inherit!==!1?e:{}}function Lf(t){const{initial:e,animate:n}=Vf(t,N.useContext(An));return N.useMemo(()=>({initial:e,animate:n}),[Ko(e),Ko(n)])}function Ko(t){return Array.isArray(t)?t.join(" "):t}const Ff=Symbol.for("motionComponentSymbol");function nt(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Uf(t,e,n){return N.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):nt(n)&&(n.current=i))},[e])}const lo=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),bf="framerAppearId",fl="data-"+lo(bf),dl=N.createContext({});function Bf(t,e,n,i,o){var y,T;const{visualElement:a}=N.useContext(An),l=N.useContext(ll),u=N.useContext(xn),f=N.useContext(so).reducedMotion,c=N.useRef(null);i=i||l.renderer,!c.current&&i&&(c.current=i(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:f}));const d=c.current,h=N.useContext(dl);d&&!d.projection&&o&&(d.type==="html"||d.type==="svg")&&Gf(c.current,n,o,h);const p=N.useRef(!1);N.useInsertionEffect(()=>{d&&p.current&&d.update(n,u)});const m=n[fl],g=N.useRef(!!m&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,m))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,m)));return ya(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),io.render(d.render),g.current&&d.animationState&&d.animationState.animateChanges())}),N.useEffect(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,m)}),g.current=!1))}),d}function Gf(t,e,n,i){const{layoutId:o,layout:a,drag:l,dragConstraints:u,layoutScroll:f,layoutRoot:c,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:hl(t.parent)),t.projection.setOptions({layoutId:o,layout:a,alwaysMeasureLayout:!!l||u&&nt(u),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,crossfade:d,layoutScroll:f,layoutRoot:c})}function hl(t){if(t)return t.options.allowProjection!==!1?t.projection:hl(t.parent)}function qf({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:o}){t&&wf(t);function a(u,f){let c;const d={...N.useContext(so),...u,layoutId:$f(u)},{isStatic:h}=d,p=Lf(u),m=i(u,h);if(!h&&Fi){Jf();const g=Hf(d);c=g.MeasureLayout,p.visualElement=Bf(o,m,d,e,g.ProjectionNode)}return xe.jsxs(An.Provider,{value:p,children:[c&&p.visualElement?xe.jsx(c,{visualElement:p.visualElement,...d}):null,n(o,u,Uf(m,p.visualElement,f),m,h,p.visualElement)]})}a.displayName=`motion.${typeof o=="string"?o:`create(${o.displayName??o.name??""})`}`;const l=N.forwardRef(a);return l[Ff]=o,l}function $f({layoutId:t}){const e=N.useContext(Vi).id;return e&&t!==void 0?e+"-"+t:t}function Jf(t,e){N.useContext(ll).strict}function Hf(t){const{drag:e,layout:n}=ct;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const Bt={};function Of(t){for(const e in t)Bt[e]=t[e],Hi(e)&&(Bt[e].isCSSVariable=!0)}function pl(t,{layout:e,layoutId:n}){return vt.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Bt[t]||t==="opacity")}const Wf={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Kf=yt.length;function Yf(t,e,n){let i="",o=!0;for(let a=0;a<Kf;a++){const l=yt[a],u=t[l];if(u===void 0)continue;let f=!0;if(typeof u=="number"?f=u===(l.startsWith("scale")?1:0):f=parseFloat(u)===0,!f||n){const c=nl(u,no[l]);if(!f){o=!1;const d=Wf[l]||l;i+=`${d}(${c}) `}n&&(e[l]=c)}}return i=i.trim(),n?i=n(e,o?"":i):o&&(i="none"),i}function uo(t,e,n){const{style:i,vars:o,transformOrigin:a}=t;let l=!1,u=!1;for(const f in e){const c=e[f];if(vt.has(f)){l=!0;continue}else if(Hi(f)){o[f]=c;continue}else{const d=nl(c,no[f]);f.startsWith("origin")?(u=!0,a[f]=d):i[f]=d}}if(e.transform||(l||n?i.transform=Yf(e,t.transform,n):i.transform&&(i.transform="none")),u){const{originX:f="50%",originY:c="50%",originZ:d=0}=a;i.transformOrigin=`${f} ${c} ${d}`}}const co=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ml(t,e,n){for(const i in e)!oe(e[i])&&!pl(i,n)&&(t[i]=e[i])}function zf({transformTemplate:t},e){return N.useMemo(()=>{const n=co();return uo(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Zf(t,e){const n=t.style||{},i={};return ml(i,n,t),Object.assign(i,zf(t,e)),i}function Xf(t,e){const n={},i=Zf(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const Qf={offset:"stroke-dashoffset",array:"stroke-dasharray"},jf={offset:"strokeDashoffset",array:"strokeDasharray"};function ed(t,e,n=1,i=0,o=!0){t.pathLength=1;const a=o?Qf:jf;t[a.offset]=L.transform(-i);const l=L.transform(e),u=L.transform(n);t[a.array]=`${l} ${u}`}function gl(t,{attrX:e,attrY:n,attrScale:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},f,c,d){if(uo(t,u,c),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p}=t;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),i!==void 0&&(h.scale=i),o!==void 0&&ed(h,o,a,l,!1)}const yl=()=>({...co(),attrs:{}}),vl=t=>typeof t=="string"&&t.toLowerCase()==="svg";function td(t,e,n,i){const o=N.useMemo(()=>{const a=yl();return gl(a,e,vl(i),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};ml(a,t.style,t),o.style={...a,...o.style}}return o}const nd=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fo(t){return typeof t!="string"||t.includes("-")?!1:!!(nd.indexOf(t)>-1||/[A-Z]/u.test(t))}function id(t=!1){return(n,i,o,{latestValues:a},l)=>{const f=(fo(n)?td:Xf)(i,a,l,n),c=kf(i,typeof n=="string",t),d=n!==N.Fragment?{...c,...f,ref:o}:{},{children:h}=i,p=N.useMemo(()=>oe(h)?h.get():h,[h]);return N.createElement(n,{...d,children:p})}}function Yo(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function ho(t,e,n,i){if(typeof e=="function"){const[o,a]=Yo(i);e=e(n!==void 0?n:t.custom,o,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,a]=Yo(i);e=e(n!==void 0?n:t.custom,o,a)}return e}function rn(t){return oe(t)?t.get():t}function od({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,o){return{latestValues:sd(n,i,o,t),renderState:e()}}const Tl=t=>(e,n)=>{const i=N.useContext(An),o=N.useContext(xn),a=()=>od(t,e,i,o);return n?a():Li(a)};function sd(t,e,n,i){const o={},a=i(t,{});for(const p in a)o[p]=rn(a[p]);let{initial:l,animate:u}=t;const f=In(t),c=cl(t);e&&c&&!f&&t.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let d=n?n.initial===!1:!1;d=d||l===!1;const h=d?u:l;if(h&&typeof h!="boolean"&&!Mn(h)){const p=Array.isArray(h)?h:[h];for(let m=0;m<p.length;m++){const g=ho(t,p[m]);if(g){const{transitionEnd:y,transition:T,...v}=g;for(const C in v){let _=v[C];if(Array.isArray(_)){const E=d?_.length-1:0;_=_[E]}_!==null&&(o[C]=_)}for(const C in y)o[C]=y[C]}}}return o}function po(t,e,n){var a;const{style:i}=t,o={};for(const l in i)(oe(i[l])||e.style&&oe(e.style[l])||pl(l,t)||((a=n==null?void 0:n.getValue(l))==null?void 0:a.liveStyle)!==void 0)&&(o[l]=i[l]);return o}const rd={useVisualState:Tl({scrapeMotionValuesFromProps:po,createRenderState:co})};function Cl(t,e,n){const i=po(t,e,n);for(const o in t)if(oe(t[o])||oe(e[o])){const a=yt.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[a]=t[o]}return i}const ad={useVisualState:Tl({scrapeMotionValuesFromProps:Cl,createRenderState:yl})};function ld(t,e){return function(i,{forwardMotionProps:o}={forwardMotionProps:!1}){const l={...fo(i)?ad:rd,preloadedFeatures:t,useRender:id(o),createVisualElement:e,Component:i};return qf(l)}}function Gt(t,e,n){const i=t.getProps();return ho(i,e,n!==void 0?n:i.custom,t)}const li=t=>Array.isArray(t);function ud(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ut(n))}function cd(t){return li(t)?t[t.length-1]||0:t}function fd(t,e){const n=Gt(t,e);let{transitionEnd:i={},transition:o={},...a}=n||{};a={...a,...i};for(const l in a){const u=cd(a[l]);ud(t,l,u)}}function dd(t){return!!(oe(t)&&t.add)}function ui(t,e){const n=t.getValue("willChange");if(dd(n))return n.add(e);if(!n&&Me.WillChange){const i=new Me.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function _l(t){return t.props[fl]}const hd=t=>t!==null;function pd(t,{repeat:e,repeatType:n="loop"},i){const o=t.filter(hd),a=e&&n!=="loop"&&e%2===1?0:o.length-1;return o[a]}const md={type:"spring",stiffness:500,damping:25,restSpeed:10},gd=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),yd={type:"keyframes",duration:.8},vd={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Td=(t,{keyframes:e})=>e.length>2?yd:vt.has(t)?t.startsWith("scale")?gd(e[1]):md:vd;function Cd({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:o,repeat:a,repeatType:l,repeatDelay:u,from:f,elapsed:c,...d}){return!!Object.keys(d).length}const mo=(t,e,n,i={},o,a)=>l=>{const u=to(i,t)||{},f=u.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Te(f);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-c,onUpdate:p=>{e.set(p),u.onUpdate&&u.onUpdate(p)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:a?void 0:o};Cd(u)||Object.assign(d,Td(t,d)),d.duration&&(d.duration=Te(d.duration)),d.repeatDelay&&(d.repeatDelay=Te(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),(Me.instantAnimations||Me.skipAnimations)&&(h=!0,d.duration=0,d.delay=0),d.allowFlatten=!u.type&&!u.ease,h&&!a&&e.get()!==void 0){const p=pd(d.keyframes,u);if(p!==void 0){K.update(()=>{d.onUpdate(p),d.onComplete()});return}}return u.isSync?new Qi(d):new jc(d)};function _d({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function Sl(t,e,{delay:n=0,transitionOverride:i,type:o}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:l,...u}=e;i&&(a=i);const f=[],c=o&&t.animationState&&t.animationState.getState()[o];for(const d in u){const h=t.getValue(d,t.latestValues[d]??null),p=u[d];if(p===void 0||c&&_d(c,d))continue;const m={delay:n,...to(a||{},d)},g=h.get();if(g!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===g&&!m.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const v=_l(t);if(v){const C=window.MotionHandoffAnimation(v,d,K);C!==null&&(m.startTime=C,y=!0)}}ui(t,d),h.start(mo(d,h,p,t.shouldReduceMotion&&Xa.has(d)?{type:!1}:m,t,y));const T=h.animation;T&&f.push(T)}return l&&Promise.all(f).then(()=>{K.update(()=>{l&&fd(t,l)})}),f}function ci(t,e,n={}){var f;const i=Gt(t,e,n.type==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const a=i?()=>Promise.all(Sl(t,i,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=o;return Sd(t,e,c,d,h,p,n)}:()=>Promise.resolve(),{when:u}=o;if(u){const[c,d]=u==="beforeChildren"?[a,l]:[l,a];return c().then(()=>d())}else return Promise.all([a(),l(n.delay)])}function Sd(t,e,n=0,i=0,o=0,a=1,l){const u=[],f=t.variantChildren.size,c=(f-1)*o,d=typeof i=="function",h=d?p=>i(p,f):a===1?(p=0)=>p*o:(p=0)=>c-p*o;return Array.from(t.variantChildren).sort(Ed).forEach((p,m)=>{p.notify("AnimationStart",e),u.push(ci(p,e,{...l,delay:n+(d?0:i)+h(m)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(u)}function Ed(t,e){return t.sortNodePosition(e)}function xd(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const o=e.map(a=>ci(t,a,n));i=Promise.all(o)}else if(typeof e=="string")i=ci(t,e,n);else{const o=typeof e=="function"?Gt(t,e,n.custom):e;i=Promise.all(Sl(t,o,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function El(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const Ad=ao.length;function xl(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?xl(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Ad;n++){const i=ao[n],o=t.props[i];(bt(o)||o===!1)&&(e[i]=o)}return e}const Md=[...ro].reverse(),Id=ro.length;function Pd(t){return e=>Promise.all(e.map(({animation:n,options:i})=>xd(t,n,i)))}function wd(t){let e=Pd(t),n=zo(),i=!0;const o=f=>(c,d)=>{var p;const h=Gt(t,d,f==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(h){const{transition:m,transitionEnd:g,...y}=h;c={...c,...y,...g}}return c};function a(f){e=f(t)}function l(f){const{props:c}=t,d=xl(t.parent)||{},h=[],p=new Set;let m={},g=1/0;for(let T=0;T<Id;T++){const v=Md[T],C=n[v],_=c[v]!==void 0?c[v]:d[v],E=bt(_),S=v===f?C.isActive:null;S===!1&&(g=T);let A=_===d[v]&&_!==c[v]&&E;if(A&&i&&t.manuallyAnimateOnMount&&(A=!1),C.protectedKeys={...m},!C.isActive&&S===null||!_&&!C.prevProp||Mn(_)||typeof _=="boolean")continue;const I=Rd(C.prevProp,_);let w=I||v===f&&C.isActive&&!A&&E||T>g&&E,R=!1;const F=Array.isArray(_)?_:[_];let q=F.reduce(o(v),{});S===!1&&(q={});const{prevResolvedValues:ne={}}=C,ge={...ne,...q},Re=ee=>{w=!0,p.has(ee)&&(R=!0,p.delete(ee)),C.needsAnimating[ee]=!0;const M=t.getValue(ee);M&&(M.liveStyle=!1)};for(const ee in ge){const M=q[ee],b=ne[ee];if(m.hasOwnProperty(ee))continue;let G=!1;li(M)&&li(b)?G=!El(M,b):G=M!==b,G?M!=null?Re(ee):p.add(ee):M!==void 0&&p.has(ee)?Re(ee):C.protectedKeys[ee]=!0}C.prevProp=_,C.prevResolvedValues=q,C.isActive&&(m={...m,...q}),i&&t.blockInitialAnimation&&(w=!1),w&&(!(A&&I)||R)&&h.push(...F.map(ee=>({animation:ee,options:{type:v}})))}if(p.size){const T={};if(typeof c.initial!="boolean"){const v=Gt(t,Array.isArray(c.initial)?c.initial[0]:c.initial);v&&v.transition&&(T.transition=v.transition)}p.forEach(v=>{const C=t.getBaseTarget(v),_=t.getValue(v);_&&(_.liveStyle=!0),T[v]=C??null}),h.push({animation:T})}let y=!!h.length;return i&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),i=!1,y?e(h):Promise.resolve()}function u(f,c){var h;if(n[f].isActive===c)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(p=>{var m;return(m=p.animationState)==null?void 0:m.setActive(f,c)}),n[f].isActive=c;const d=l(f);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:l,setActive:u,setAnimateFunction:a,getState:()=>n,reset:()=>{n=zo(),i=!0}}}function Rd(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!El(e,t):!1}function qe(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zo(){return{animate:qe(!0),whileInView:qe(),whileHover:qe(),whileTap:qe(),whileDrag:qe(),whileFocus:qe(),exit:qe()}}class be{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Dd extends be{constructor(e){super(e),e.animationState||(e.animationState=wd(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Mn(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let kd=0;class Nd extends be{constructor(){super(...arguments),this.id=kd++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Vd={animation:{Feature:Dd},exit:{Feature:Nd}};function qt(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Kt(t){return{point:{x:t.pageX,y:t.pageY}}}const Ld=t=>e=>oo(e)&&t(e,Kt(e));function Dt(t,e,n,i){return qt(t,e,Ld(n),i)}function Al({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function Fd({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Ud(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}const Ml=1e-4,bd=1-Ml,Bd=1+Ml,Il=.01,Gd=0-Il,qd=0+Il;function re(t){return t.max-t.min}function $d(t,e,n){return Math.abs(t-e)<=n}function Zo(t,e,n,i=.5){t.origin=i,t.originPoint=Y(e.min,e.max,t.origin),t.scale=re(n)/re(e),t.translate=Y(n.min,n.max,t.origin)-t.originPoint,(t.scale>=bd&&t.scale<=Bd||isNaN(t.scale))&&(t.scale=1),(t.translate>=Gd&&t.translate<=qd||isNaN(t.translate))&&(t.translate=0)}function kt(t,e,n,i){Zo(t.x,e.x,n.x,i?i.originX:void 0),Zo(t.y,e.y,n.y,i?i.originY:void 0)}function Xo(t,e,n){t.min=n.min+e.min,t.max=t.min+re(e)}function Jd(t,e,n){Xo(t.x,e.x,n.x),Xo(t.y,e.y,n.y)}function Qo(t,e,n){t.min=e.min-n.min,t.max=t.min+re(e)}function Nt(t,e,n){Qo(t.x,e.x,n.x),Qo(t.y,e.y,n.y)}const jo=()=>({translate:0,scale:1,origin:0,originPoint:0}),it=()=>({x:jo(),y:jo()}),es=()=>({min:0,max:0}),X=()=>({x:es(),y:es()});function fe(t){return[t("x"),t("y")]}function qn(t){return t===void 0||t===1}function fi({scale:t,scaleX:e,scaleY:n}){return!qn(t)||!qn(e)||!qn(n)}function Je(t){return fi(t)||Pl(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Pl(t){return ts(t.x)||ts(t.y)}function ts(t){return t&&t!=="0%"}function mn(t,e,n){const i=t-n,o=e*i;return n+o}function ns(t,e,n,i,o){return o!==void 0&&(t=mn(t,o,i)),mn(t,n,i)+e}function di(t,e=0,n=1,i,o){t.min=ns(t.min,e,n,i,o),t.max=ns(t.max,e,n,i,o)}function wl(t,{x:e,y:n}){di(t.x,e.translate,e.scale,e.originPoint),di(t.y,n.translate,n.scale,n.originPoint)}const is=.999999999999,os=1.0000000000001;function Hd(t,e,n,i=!1){const o=n.length;if(!o)return;e.x=e.y=1;let a,l;for(let u=0;u<o;u++){a=n[u],l=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&st(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,wl(t,l)),i&&Je(a.latestValues)&&st(t,a.latestValues))}e.x<os&&e.x>is&&(e.x=1),e.y<os&&e.y>is&&(e.y=1)}function ot(t,e){t.min=t.min+e,t.max=t.max+e}function ss(t,e,n,i,o=.5){const a=Y(t.min,t.max,o);di(t,e,n,a,i)}function st(t,e){ss(t.x,e.x,e.scaleX,e.scale,e.originX),ss(t.y,e.y,e.scaleY,e.scale,e.originY)}function Rl(t,e){return Al(Ud(t.getBoundingClientRect(),e))}function Od(t,e,n){const i=Rl(t,n),{scroll:o}=e;return o&&(ot(i.x,o.offset.x),ot(i.y,o.offset.y)),i}const Dl=({current:t})=>t?t.ownerDocument.defaultView:null,rs=(t,e)=>Math.abs(t-e);function Wd(t,e){const n=rs(t.x,e.x),i=rs(t.y,e.y);return Math.sqrt(n**2+i**2)}class kl{constructor(e,n,{transformPagePoint:i,contextWindow:o=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Jn(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=Wd(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!g)return;const{point:y}=p,{timestamp:T}=ie;this.history.push({...y,timestamp:T});const{onStart:v,onMove:C}=this.handlers;m||(v&&v(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=$n(m,this.transformPagePoint),K.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Jn(p.type==="pointercancel"?this.lastMoveEventInfo:$n(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,v),y&&y(p,v)},!oo(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=o||window;const u=Kt(e),f=$n(u,this.transformPagePoint),{point:c}=f,{timestamp:d}=ie;this.history=[{...c,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,Jn(f,this.history)),this.removeListeners=Ht(Dt(this.contextWindow,"pointermove",this.handlePointerMove),Dt(this.contextWindow,"pointerup",this.handlePointerUp),Dt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Le(this.updatePoint)}}function $n(t,e){return e?{point:e(t.point)}:t}function as(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Jn({point:t},e){return{point:t,delta:as(t,Nl(e)),offset:as(t,Kd(e)),velocity:Yd(e,.1)}}function Kd(t){return t[0]}function Nl(t){return t[t.length-1]}function Yd(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const o=Nl(t);for(;n>=0&&(i=t[n],!(o.timestamp-i.timestamp>Te(e)));)n--;if(!i)return{x:0,y:0};const a=Ce(o.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const l={x:(o.x-i.x)/a,y:(o.y-i.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function zd(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Y(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Y(n,t,i.max):Math.min(t,n)),t}function ls(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Zd(t,{top:e,left:n,bottom:i,right:o}){return{x:ls(t.x,n,o),y:ls(t.y,e,i)}}function us(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function Xd(t,e){return{x:us(t.x,e.x),y:us(t.y,e.y)}}function Qd(t,e){let n=.5;const i=re(t),o=re(e);return o>i?n=Lt(e.min,e.max-i,t.min):i>o&&(n=Lt(t.min,t.max-o,e.min)),Ae(0,1,n)}function jd(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const hi=.35;function eh(t=hi){return t===!1?t=0:t===!0&&(t=hi),{x:cs(t,"left","right"),y:cs(t,"top","bottom")}}function cs(t,e,n){return{min:fs(t,e),max:fs(t,n)}}function fs(t,e){return typeof t=="number"?t:t[e]||0}const th=new WeakMap;class nh{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=X(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const a=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Kt(h).point)},l=(h,p)=>{const{drag:m,dragPropagation:g,onDragStart:y}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=gf(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fe(v=>{let C=this.getAxisMotionValue(v).get()||0;if(_e.test(C)){const{projection:_}=this.visualElement;if(_&&_.layout){const E=_.layout.layoutBox[v];E&&(C=re(E)*(parseFloat(C)/100))}}this.originPoint[v]=C}),y&&K.postRender(()=>y(h,p)),ui(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},u=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p;const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:y,onDrag:T}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:v}=p;if(g&&this.currentDirection===null){this.currentDirection=ih(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",p.point,v),this.updateAxis("y",p.point,v),this.visualElement.render(),T&&T(h,p)},f=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p,this.stop(h,p),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>fe(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)==null?void 0:p.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new kl(e,{onSessionStart:a,onStart:l,onMove:u,onSessionEnd:f,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:i,contextWindow:Dl(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,o=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!o||!i)return;const{velocity:l}=o;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&K.postRender(()=>u(i,o))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:o}=this.getProps();if(!i||!en(e,o,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=zd(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,o=this.constraints;e&&nt(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=Zd(i.layoutBox,e):this.constraints=!1,this.elastic=eh(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&fe(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=jd(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!nt(e))return!1;const i=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=Od(i,o.root,this.visualElement.getTransformPagePoint());let l=Xd(o.layout.layoutBox,a);if(n){const u=n(Fd(l));this.hasMutatedConstraints=!!u,u&&(l=Al(u))}return l}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:o,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),f=this.constraints||{},c=fe(d=>{if(!en(d,n,this.currentDirection))return;let h=f&&f[d]||{};l&&(h={min:0,max:0});const p=o?200:1e6,m=o?40:1e7,g={type:"inertia",velocity:i?e[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,g)});return Promise.all(c).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return ui(this.visualElement,e),i.start(mo(e,i,0,n,this.visualElement,!1))}stopAnimation(){fe(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){fe(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),o=i[n];return o||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){fe(n=>{const{drag:i}=this.getProps();if(!en(n,i,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(n);if(o&&o.layout){const{min:l,max:u}=o.layout.layoutBox[n];a.set(e[n]-Y(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!nt(n)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};fe(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const f=u.get();o[l]=Qd({min:f,max:f},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),fe(l=>{if(!en(l,e,null))return;const u=this.getAxisMotionValue(l),{min:f,max:c}=this.constraints[l];u.set(Y(f,c,o[l]))})}addListeners(){if(!this.visualElement.current)return;th.set(this.visualElement,this);const e=this.visualElement.current,n=Dt(e,"pointerdown",f=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();nt(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),K.read(i);const l=qt(window,"resize",()=>this.scalePositionWithinConstraints()),u=o.addEventListener("didUpdate",({delta:f,hasLayoutChanged:c})=>{this.isDragging&&c&&(fe(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=f[d].translate,h.set(h.get()+f[d].translate))}),this.visualElement.render())});return()=>{l(),n(),a(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:l=hi,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:a,dragElastic:l,dragMomentum:u}}}function en(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function ih(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class oh extends be{constructor(e){super(e),this.removeGroupControls=de,this.removeListeners=de,this.controls=new nh(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||de}unmount(){this.removeGroupControls(),this.removeListeners()}}const ds=t=>(e,n)=>{t&&K.postRender(()=>t(e,n))};class sh extends be{constructor(){super(...arguments),this.removePointerDownListener=de}onPointerDown(e){this.session=new kl(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Dl(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:ds(e),onStart:ds(n),onMove:i,onEnd:(a,l)=>{delete this.session,o&&K.postRender(()=>o(a,l))}}}mount(){this.removePointerDownListener=Dt(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const an={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hs(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const xt={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(L.test(t))t=parseFloat(t);else return t;const n=hs(t,e.target.x),i=hs(t,e.target.y);return`${n}% ${i}%`}},rh={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,o=Fe.parse(t);if(o.length>5)return i;const a=Fe.createTransformer(t),l=typeof o[0]!="number"?1:0,u=n.x.scale*e.x,f=n.y.scale*e.y;o[0+l]/=u,o[1+l]/=f;const c=Y(u,f,.5);return typeof o[2+l]=="number"&&(o[2+l]/=c),typeof o[3+l]=="number"&&(o[3+l]/=c),a(o)}};let ps=!1;class ah extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:o}=this.props,{projection:a}=e;Of(lh),a&&(n.group&&n.group.add(a),i&&i.register&&o&&i.register(a),ps&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),an.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:o,isPresent:a}=this.props,{projection:l}=i;return l&&(l.isPresent=a,ps=!0,o||e.layoutDependency!==n||n===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||K.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),io.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Vl(t){const[e,n]=al(),i=N.useContext(Vi);return xe.jsx(ah,{...t,layoutGroup:i,switchLayoutGroup:N.useContext(dl),isPresent:e,safeToRemove:n})}const lh={borderRadius:{...xt,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xt,borderTopRightRadius:xt,borderBottomLeftRadius:xt,borderBottomRightRadius:xt,boxShadow:rh};function uh(t,e,n){const i=oe(t)?t:ut(t);return i.start(mo("",i,e,n)),i.animation}const ch=(t,e)=>t.depth-e.depth;class fh{constructor(){this.children=[],this.isDirty=!1}add(e){Ui(this.children,e),this.isDirty=!0}remove(e){bi(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ch),this.isDirty=!1,this.children.forEach(e)}}function dh(t,e){const n=le.now(),i=({timestamp:o})=>{const a=o-n;a>=e&&(Le(i),t(a-e))};return K.setup(i,!0),()=>Le(i)}const Ll=["TopLeft","TopRight","BottomLeft","BottomRight"],hh=Ll.length,ms=t=>typeof t=="string"?parseFloat(t):t,gs=t=>typeof t=="number"||L.test(t);function ph(t,e,n,i,o,a){o?(t.opacity=Y(0,n.opacity??1,mh(i)),t.opacityExit=Y(e.opacity??1,0,gh(i))):a&&(t.opacity=Y(e.opacity??1,n.opacity??1,i));for(let l=0;l<hh;l++){const u=`border${Ll[l]}Radius`;let f=ys(e,u),c=ys(n,u);if(f===void 0&&c===void 0)continue;f||(f=0),c||(c=0),f===0||c===0||gs(f)===gs(c)?(t[u]=Math.max(Y(ms(f),ms(c),i),0),(_e.test(c)||_e.test(f))&&(t[u]+="%")):t[u]=c}(e.rotate||n.rotate)&&(t.rotate=Y(e.rotate||0,n.rotate||0,i))}function ys(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const mh=Fl(0,.5,Pa),gh=Fl(.5,.95,de);function Fl(t,e,n){return i=>i<t?0:i>e?1:n(Lt(t,e,i))}function vs(t,e){t.min=e.min,t.max=e.max}function ce(t,e){vs(t.x,e.x),vs(t.y,e.y)}function Ts(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Cs(t,e,n,i,o){return t-=e,t=mn(t,1/n,i),o!==void 0&&(t=mn(t,1/o,i)),t}function yh(t,e=0,n=1,i=.5,o,a=t,l=t){if(_e.test(e)&&(e=parseFloat(e),e=Y(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=Y(a.min,a.max,i);t===a&&(u-=e),t.min=Cs(t.min,e,n,u,o),t.max=Cs(t.max,e,n,u,o)}function _s(t,e,[n,i,o],a,l){yh(t,e[n],e[i],e[o],e.scale,a,l)}const vh=["x","scaleX","originX"],Th=["y","scaleY","originY"];function Ss(t,e,n,i){_s(t.x,e,vh,n?n.x:void 0,i?i.x:void 0),_s(t.y,e,Th,n?n.y:void 0,i?i.y:void 0)}function Es(t){return t.translate===0&&t.scale===1}function Ul(t){return Es(t.x)&&Es(t.y)}function xs(t,e){return t.min===e.min&&t.max===e.max}function Ch(t,e){return xs(t.x,e.x)&&xs(t.y,e.y)}function As(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function bl(t,e){return As(t.x,e.x)&&As(t.y,e.y)}function Ms(t){return re(t.x)/re(t.y)}function Is(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class _h{constructor(){this.members=[]}add(e){Ui(this.members,e),e.scheduleRender()}remove(e){if(bi(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let i;for(let o=n;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Sh(t,e,n){let i="";const o=t.x.translate/e.x,a=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((o||a||l)&&(i=`translate3d(${o}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:h,rotateY:p,skewX:m,skewY:g}=n;c&&(i=`perspective(${c}px) ${i}`),d&&(i+=`rotate(${d}deg) `),h&&(i+=`rotateX(${h}deg) `),p&&(i+=`rotateY(${p}deg) `),m&&(i+=`skewX(${m}deg) `),g&&(i+=`skewY(${g}deg) `)}const u=t.x.scale*e.x,f=t.y.scale*e.y;return(u!==1||f!==1)&&(i+=`scale(${u}, ${f})`),i||"none"}const Hn=["","X","Y","Z"],Eh=1e3;let xh=0;function On(t,e,n,i){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),i&&(i[t]=0))}function Bl(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=_l(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",K,!(o||a))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&Bl(i)}function Gl({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(l={},u=e==null?void 0:e()){this.id=xh++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ih),this.nodes.forEach(Dh),this.nodes.forEach(kh),this.nodes.forEach(Ph)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new fh)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new qi),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const f=this.eventHandlers.get(l);f&&f.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=rl(l)&&!Sf(l),this.instance=l;const{layoutId:u,layout:f,visualElement:c}=this.options;if(c&&!c.current&&c.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||u)&&(this.isLayoutDirty=!0),t){let d,h=0;const p=()=>this.root.updateBlockedByResize=!1;K.read(()=>{h=window.innerWidth}),t(l,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,d&&d(),d=dh(p,250),an.hasAnimatedSinceResize&&(an.hasAnimatedSinceResize=!1,this.nodes.forEach(Rs)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&c&&(u||f)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||Uh,{onLayoutAnimationStart:y,onLayoutAnimationComplete:T}=c.getProps(),v=!this.targetLayout||!bl(this.targetLayout,m),C=!h&&p;if(this.options.layoutRoot||this.resumeFrom||C||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...to(g,"layout"),onPlay:y,onComplete:T};(c.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(d,C)}else h||Rs(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Le(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Nh),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Bl(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:u,layout:f}=this.options;if(u===void 0&&!f)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ps);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ws);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Rh),this.nodes.forEach(Ah),this.nodes.forEach(Mh)):this.nodes.forEach(ws),this.clearAllSnapshots();const u=le.now();ie.delta=Ae(0,1e3/60,u-ie.timestamp),ie.timestamp=u,ie.isProcessing=!0,Ln.update.process(ie),Ln.preRender.process(ie),Ln.render.process(ie),ie.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,io.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(wh),this.sharedNodes.forEach(Vh)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,K.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){K.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!re(this.snapshot.measuredBox.x)&&!re(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=X(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!o)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!Ul(this.projectionDelta),f=this.getTransformTemplate(),c=f?f(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;l&&this.instance&&(u||Je(this.latestValues)||d)&&(o(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let f=this.removeElementScroll(u);return l&&(f=this.removeTransform(f)),bh(f),{animationId:this.root.animationId,measuredBox:u,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:l}=this.options;if(!l)return X();const u=l.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Bh))){const{scroll:d}=this.root;d&&(ot(u.x,d.offset.x),ot(u.y,d.offset.y))}return u}removeElementScroll(l){var f;const u=X();if(ce(u,l),(f=this.scroll)!=null&&f.wasRoot)return u;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&ce(u,l),ot(u.x,h.offset.x),ot(u.y,h.offset.y))}return u}applyTransform(l,u=!1){const f=X();ce(f,l);for(let c=0;c<this.path.length;c++){const d=this.path[c];!u&&d.options.layoutScroll&&d.scroll&&d!==d.root&&st(f,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Je(d.latestValues)&&st(f,d.latestValues)}return Je(this.latestValues)&&st(f,this.latestValues),f}removeTransform(l){const u=X();ce(u,l);for(let f=0;f<this.path.length;f++){const c=this.path[f];if(!c.instance||!Je(c.latestValues))continue;fi(c.latestValues)&&c.updateSnapshot();const d=X(),h=c.measurePageBox();ce(d,h),Ss(u,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Je(this.latestValues)&&Ss(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ie.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var p;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==u;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=ie.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=X(),this.relativeTargetOrigin=X(),Nt(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),ce(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=X(),this.targetWithTransforms=X()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Jd(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ce(this.target,this.layout.layoutBox),wl(this.target,this.targetDelta)):ce(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=X(),this.relativeTargetOrigin=X(),Nt(this.relativeTargetOrigin,this.target,m.target),ce(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||fi(this.parent.latestValues)||Pl(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(f=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===ie.timestamp&&(f=!1),f)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;ce(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;Hd(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=X());const{target:m}=l;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ts(this.prevProjectionDelta.x,this.projectionDelta.x),Ts(this.prevProjectionDelta.y,this.projectionDelta.y)),kt(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!Is(this.projectionDelta.x,this.prevProjectionDelta.x)||!Is(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),l){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=it(),this.projectionDelta=it(),this.projectionDeltaWithTransform=it()}setAnimationOrigin(l,u=!1){const f=this.snapshot,c=f?f.latestValues:{},d={...this.latestValues},h=it();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const p=X(),m=f?f.source:void 0,g=this.layout?this.layout.source:void 0,y=m!==g,T=this.getStack(),v=!T||T.members.length<=1,C=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(Fh));this.animationProgress=0;let _;this.mixTargetDelta=E=>{const S=E/1e3;Ds(h.x,l.x,S),Ds(h.y,l.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Nt(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Lh(this.relativeTarget,this.relativeTargetOrigin,p,S),_&&Ch(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=X()),ce(_,this.relativeTarget)),y&&(this.animationValues=d,ph(d,c,this.latestValues,S,C,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var u,f,c;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(c=(f=this.resumingFrom)==null?void 0:f.currentAnimation)==null||c.stop(),this.pendingAnimation&&(Le(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=K.update(()=>{an.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ut(0)),this.currentAnimation=uh(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Eh),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:f,layout:c,latestValues:d}=l;if(!(!u||!f||!c)){if(this!==l&&this.layout&&c&&ql(this.options.animationType,this.layout.layoutBox,c.layoutBox)){f=this.target||X();const h=re(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+h;const p=re(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+p}ce(u,f),st(u,d),kt(this.projectionDeltaWithTransform,this.layoutCorrected,u,d)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new _h),this.sharedNodes.get(l).add(u);const c=u.options.initialPromotionConfig;u.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var u;const{layoutId:l}=this.options;return l?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:l}=this.options;return l?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:f}={}){const c=this.getStack();c&&c.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(u=!0),!u)return;const c={};f.z&&On("z",l,c,this.animationValues);for(let d=0;d<Hn.length;d++)On(`rotate${Hn[d]}`,l,c,this.animationValues),On(`skew${Hn[d]}`,l,c,this.animationValues);l.render();for(const d in c)l.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=rn(u==null?void 0:u.pointerEvents)||"",l.transform=f?f(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=rn(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Je(this.latestValues)&&(l.transform=f?f({},""):"none",this.hasProjected=!1);return}l.visibility="";const d=c.animationValues||c.latestValues;this.applyTransformsToTarget();let h=Sh(this.projectionDeltaWithTransform,this.treeScale,d);f&&(h=f(d,h)),l.transform=h;const{x:p,y:m}=this.projectionDelta;l.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,c.animationValues?l.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:l.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in Bt){if(d[g]===void 0)continue;const{correct:y,applyTo:T,isCSSVariable:v}=Bt[g],C=h==="none"?d[g]:y(d[g],c);if(T){const _=T.length;for(let E=0;E<_;E++)l[T[E]]=C}else v?this.options.visualElement.renderState.vars[g]=C:l[g]=C}this.options.layoutId&&(l.pointerEvents=c===this?rn(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(Ps),this.root.sharedNodes.clear()}}}function Ah(t){t.updateLayout()}function Mh(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=t.layout,{animationType:a}=t.options,l=e.source!==t.layout.source;a==="size"?fe(h=>{const p=l?e.measuredBox[h]:e.layoutBox[h],m=re(p);p.min=i[h].min,p.max=p.min+m}):ql(a,e.layoutBox,i)&&fe(h=>{const p=l?e.measuredBox[h]:e.layoutBox[h],m=re(i[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const u=it();kt(u,i,e.layoutBox);const f=it();l?kt(f,t.applyTransform(o,!0),e.measuredBox):kt(f,i,e.layoutBox);const c=!Ul(u);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const g=X();Nt(g,e.layoutBox,p.layoutBox);const y=X();Nt(y,i,m.layoutBox),bl(g,y)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:f,layoutDelta:u,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function Ih(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Ph(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function wh(t){t.clearSnapshot()}function Ps(t){t.clearMeasurements()}function ws(t){t.isLayoutDirty=!1}function Rh(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Rs(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Dh(t){t.resolveTargetDelta()}function kh(t){t.calcProjection()}function Nh(t){t.resetSkewAndRotation()}function Vh(t){t.removeLeadSnapshot()}function Ds(t,e,n){t.translate=Y(e.translate,0,n),t.scale=Y(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ks(t,e,n,i){t.min=Y(e.min,n.min,i),t.max=Y(e.max,n.max,i)}function Lh(t,e,n,i){ks(t.x,e.x,n.x,i),ks(t.y,e.y,n.y,i)}function Fh(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Uh={duration:.45,ease:[.4,0,.1,1]},Ns=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Vs=Ns("applewebkit/")&&!Ns("chrome/")?Math.round:de;function Ls(t){t.min=Vs(t.min),t.max=Vs(t.max)}function bh(t){Ls(t.x),Ls(t.y)}function ql(t,e,n){return t==="position"||t==="preserve-aspect"&&!$d(Ms(e),Ms(n),.2)}function Bh(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Gh=Gl({attachResizeListener:(t,e)=>qt(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wn={current:void 0},$l=Gl({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Wn.current){const t=new Gh({});t.mount(window),t.setOptions({layoutScroll:!0}),Wn.current=t}return Wn.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),qh={pan:{Feature:sh},drag:{Feature:oh,ProjectionNode:$l,MeasureLayout:Vl}};function Fs(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,a=i[o];a&&K.postRender(()=>a(e,Kt(e)))}class $h extends be{mount(){const{current:e}=this.node;e&&(this.unmount=yf(e,(n,i)=>(Fs(this.node,i,"Start"),o=>Fs(this.node,o,"End"))))}unmount(){}}class Jh extends be{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ht(qt(this.node.current,"focus",()=>this.onFocus()),qt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Us(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),a=i[o];a&&K.postRender(()=>a(e,Kt(e)))}class Hh extends be{mount(){const{current:e}=this.node;e&&(this.unmount=_f(e,(n,i)=>(Us(this.node,i,"Start"),(o,{success:a})=>Us(this.node,o,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const pi=new WeakMap,Kn=new WeakMap,Oh=t=>{const e=pi.get(t.target);e&&e(t)},Wh=t=>{t.forEach(Oh)};function Kh({root:t,...e}){const n=t||document;Kn.has(n)||Kn.set(n,{});const i=Kn.get(n),o=JSON.stringify(e);return i[o]||(i[o]=new IntersectionObserver(Wh,{root:t,...e})),i[o]}function Yh(t,e,n){const i=Kh(e);return pi.set(t,n),i.observe(t),()=>{pi.delete(t),i.unobserve(t)}}const zh={some:0,all:1};class Zh extends be{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:o="some",once:a}=e,l={root:n?n.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:zh[o]},u=f=>{const{isIntersecting:c}=f;if(this.isInView===c||(this.isInView=c,a&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=c?d:h;p&&p(f)};return Yh(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Xh(e,n))&&this.startObserver()}unmount(){}}function Xh({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Qh={inView:{Feature:Zh},tap:{Feature:Hh},focus:{Feature:Jh},hover:{Feature:$h}},jh={layout:{ProjectionNode:$l,MeasureLayout:Vl}},mi={current:null},Jl={current:!1};function ep(){if(Jl.current=!0,!!Fi)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>mi.current=t.matches;t.addEventListener("change",e),e()}else mi.current=!1}const tp=new WeakMap;function np(t,e,n){for(const i in e){const o=e[i],a=n[i];if(oe(o))t.addValue(i,o);else if(oe(a))t.addValue(i,ut(o,{owner:t}));else if(a!==o)if(t.hasValue(i)){const l=t.getValue(i);l.liveStyle===!0?l.jump(o):l.hasAnimated||l.set(o)}else{const l=t.getStaticValue(i);t.addValue(i,ut(l!==void 0?l:o,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const bs=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ip{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:a,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ji,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=le.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,K.render(this.render,!1,!0))};const{latestValues:f,renderState:c}=l;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=In(n),this.isVariantNode=cl(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const m=h[p];f[p]!==void 0&&oe(m)&&m.set(f[p],!1)}}mount(e){this.current=e,tp.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),Jl.current||ep(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:mi.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Le(this.notifyUpdate),Le(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=vt.has(e);i&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&K.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),a(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ct){const n=ct[e];if(!n)continue;const{isEnabled:i,Feature:o}=n;if(!this.features[e]&&o&&i(this.props)&&(this.features[e]=new o(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):X()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<bs.length;i++){const o=bs[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a="on"+o,l=e[a];l&&(this.propEventSubscriptions[o]=this.on(o,l))}this.prevMotionValues=np(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=ut(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(va(i)||Ca(i))?i=parseFloat(i):!xf(i)&&Fe.test(n)&&(i=tl(e,n)),this.setBaseTarget(e,oe(i)?i.get():i)),oe(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const l=ho(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);l&&(i=l[e])}if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!oe(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new qi),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Hl extends ip{constructor(){super(...arguments),this.KeyframeResolver=df}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;oe(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Ol(t,{style:e,vars:n},i,o){const a=t.style;let l;for(l in e)a[l]=e[l];o==null||o.applyProjectionStyles(a,i);for(l in n)a.setProperty(l,n[l])}function op(t){return window.getComputedStyle(t)}class sp extends Hl{constructor(){super(...arguments),this.type="html",this.renderInstance=Ol}readValueFromInstance(e,n){var i;if(vt.has(n))return(i=this.projection)!=null&&i.isProjecting?ni(n):Rc(e,n);{const o=op(e),a=(Hi(n)?o.getPropertyValue(n):o[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Rl(e,n)}build(e,n,i){uo(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return po(e,n,i)}}const Wl=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rp(t,e,n,i){Ol(t,e,void 0,i);for(const o in e.attrs)t.setAttribute(Wl.has(o)?o:lo(o),e.attrs[o])}class ap extends Hl{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=X}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(vt.has(n)){const i=el(n);return i&&i.default||0}return n=Wl.has(n)?n:lo(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return Cl(e,n,i)}build(e,n,i){gl(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,o){rp(e,n,i,o)}mount(e){this.isSVGTag=vl(e.tagName),super.mount(e)}}const lp=(t,e)=>fo(t)?new ap(e):new sp(e,{allowProjection:t!==N.Fragment}),up=ld({...Vd,...Qh,...qh,...jh},lp),nx=Nf(up);var H;(function(t){t.assertEqual=o=>{};function e(o){}t.assertIs=e;function n(o){throw new Error}t.assertNever=n,t.arrayToEnum=o=>{const a={};for(const l of o)a[l]=l;return a},t.getValidEnumValues=o=>{const a=t.objectKeys(o).filter(u=>typeof o[o[u]]!="number"),l={};for(const u of a)l[u]=o[u];return t.objectValues(l)},t.objectValues=o=>t.objectKeys(o).map(function(a){return o[a]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const a=[];for(const l in o)Object.prototype.hasOwnProperty.call(o,l)&&a.push(l);return a},t.find=(o,a)=>{for(const l of o)if(a(l))return l},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function i(o,a=" | "){return o.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}t.joinValues=i,t.jsonStringifyReplacer=(o,a)=>typeof a=="bigint"?a.toString():a})(H||(H={}));var Bs;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Bs||(Bs={}));const D=H.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ne=t=>{switch(typeof t){case"undefined":return D.undefined;case"string":return D.string;case"number":return Number.isNaN(t)?D.nan:D.number;case"boolean":return D.boolean;case"function":return D.function;case"bigint":return D.bigint;case"symbol":return D.symbol;case"object":return Array.isArray(t)?D.array:t===null?D.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?D.promise:typeof Map<"u"&&t instanceof Map?D.map:typeof Set<"u"&&t instanceof Set?D.set:typeof Date<"u"&&t instanceof Date?D.date:D.object;default:return D.unknown}},x=H.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ie extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},i={_errors:[]},o=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(o);else if(l.code==="invalid_return_type")o(l.returnTypeError);else if(l.code==="invalid_arguments")o(l.argumentsError);else if(l.path.length===0)i._errors.push(n(l));else{let u=i,f=0;for(;f<l.path.length;){const c=l.path[f];f===l.path.length-1?(u[c]=u[c]||{_errors:[]},u[c]._errors.push(n(l))):u[c]=u[c]||{_errors:[]},u=u[c],f++}}};return o(this),i}static assert(e){if(!(e instanceof Ie))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,H.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const o of this.issues)if(o.path.length>0){const a=o.path[0];n[a]=n[a]||[],n[a].push(e(o))}else i.push(e(o));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}Ie.create=t=>new Ie(t);const gi=(t,e)=>{let n;switch(t.code){case x.invalid_type:t.received===D.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case x.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,H.jsonStringifyReplacer)}`;break;case x.unrecognized_keys:n=`Unrecognized key(s) in object: ${H.joinValues(t.keys,", ")}`;break;case x.invalid_union:n="Invalid input";break;case x.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${H.joinValues(t.options)}`;break;case x.invalid_enum_value:n=`Invalid enum value. Expected ${H.joinValues(t.options)}, received '${t.received}'`;break;case x.invalid_arguments:n="Invalid function arguments";break;case x.invalid_return_type:n="Invalid function return type";break;case x.invalid_date:n="Invalid date";break;case x.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:H.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case x.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case x.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case x.custom:n="Invalid input";break;case x.invalid_intersection_types:n="Intersection results could not be merged";break;case x.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case x.not_finite:n="Number must be finite";break;default:n=e.defaultError,H.assertNever(t)}return{message:n}};let cp=gi;function fp(){return cp}const dp=t=>{const{data:e,path:n,errorMaps:i,issueData:o}=t,a=[...n,...o.path||[]],l={...o,path:a};if(o.message!==void 0)return{...o,path:a,message:o.message};let u="";const f=i.filter(c=>!!c).slice().reverse();for(const c of f)u=c(l,{data:e,defaultError:u}).message;return{...o,path:a,message:u}};function P(t,e){const n=fp(),i=dp({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===gi?void 0:gi].filter(o=>!!o)});t.common.issues.push(i)}class ae{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const o of n){if(o.status==="aborted")return B;o.status==="dirty"&&e.dirty(),i.push(o.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const o of n){const a=await o.key,l=await o.value;i.push({key:a,value:l})}return ae.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const o of n){const{key:a,value:l}=o;if(a.status==="aborted"||l.status==="aborted")return B;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||o.alwaysSet)&&(i[a.value]=l.value)}return{status:e.value,value:i}}}const B=Object.freeze({status:"aborted"}),It=t=>({status:"dirty",value:t}),pe=t=>({status:"valid",value:t}),Gs=t=>t.status==="aborted",qs=t=>t.status==="dirty",ft=t=>t.status==="valid",gn=t=>typeof Promise<"u"&&t instanceof Promise;var k;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(k||(k={}));class Ee{constructor(e,n,i,o){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const $s=(t,e)=>{if(ft(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ie(t.common.issues);return this._error=n,this._error}}};function $(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:o}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(l,u)=>{const{message:f}=t;return l.code==="invalid_enum_value"?{message:f??u.defaultError}:typeof u.data>"u"?{message:f??i??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:f??n??u.defaultError}},description:o}}class J{get description(){return this._def.description}_getType(e){return Ne(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ne(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ae,ctx:{common:e.parent.common,data:e.data,parsedType:Ne(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(gn(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ne(e)},o=this._parseSync({data:e,path:i.path,parent:i});return $s(i,o)}"~validate"(e){var i,o;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ne(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return ft(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(o=(i=a==null?void 0:a.message)==null?void 0:i.toLowerCase())!=null&&o.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>ft(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ne(e)},o=this._parse({data:e,path:i.path,parent:i}),a=await(gn(o)?o:Promise.resolve(o));return $s(i,a)}refine(e,n){const i=o=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(o):n;return this._refinement((o,a)=>{const l=e(o),u=()=>a.addIssue({code:x.custom,...i(o)});return typeof Promise<"u"&&l instanceof Promise?l.then(f=>f?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,n){return this._refinement((i,o)=>e(i)?!0:(o.addIssue(typeof n=="function"?n(i,o):n),!1))}_refinement(e){return new pt({schema:this,typeName:U.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ve.create(this,this._def)}nullable(){return mt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Se.create(this)}promise(){return _n.create(this,this._def)}or(e){return vn.create([this,e],this._def)}and(e){return Tn.create(this,e,this._def)}transform(e){return new pt({...$(this._def),schema:this,typeName:U.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Ci({...$(this._def),innerType:this,defaultValue:n,typeName:U.ZodDefault})}brand(){return new Lp({typeName:U.ZodBranded,type:this,...$(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new _i({...$(this._def),innerType:this,catchValue:n,typeName:U.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return go.create(this,e)}readonly(){return Si.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const hp=/^c[^\s-]{8,}$/i,pp=/^[0-9a-z]+$/,mp=/^[0-9A-HJKMNP-TV-Z]{26}$/i,gp=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,yp=/^[a-z0-9_-]{21}$/i,vp=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Tp=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Cp=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_p="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Yn;const Sp=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ep=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,xp=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ap=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Mp=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ip=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Kl="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Pp=new RegExp(`^${Kl}$`);function Yl(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function wp(t){return new RegExp(`^${Yl(t)}$`)}function Rp(t){let e=`${Kl}T${Yl(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Dp(t,e){return!!((e==="v4"||!e)&&Sp.test(t)||(e==="v6"||!e)&&xp.test(t))}function kp(t,e){if(!vp.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),o=JSON.parse(atob(i));return!(typeof o!="object"||o===null||"typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||e&&o.alg!==e)}catch{return!1}}function Np(t,e){return!!((e==="v4"||!e)&&Ep.test(t)||(e==="v6"||!e)&&Ap.test(t))}class ye extends J{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==D.string){const a=this._getOrReturnCtx(e);return P(a,{code:x.invalid_type,expected:D.string,received:a.parsedType}),B}const i=new ae;let o;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(o=this._getOrReturnCtx(e,o),P(o,{code:x.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="max")e.data.length>a.value&&(o=this._getOrReturnCtx(e,o),P(o,{code:x.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="length"){const l=e.data.length>a.value,u=e.data.length<a.value;(l||u)&&(o=this._getOrReturnCtx(e,o),l?P(o,{code:x.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&P(o,{code:x.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),i.dirty())}else if(a.kind==="email")Cp.test(e.data)||(o=this._getOrReturnCtx(e,o),P(o,{validation:"email",code:x.invalid_string,message:a.message}),i.dirty());else if(a.kind==="emoji")Yn||(Yn=new RegExp(_p,"u")),Yn.test(e.data)||(o=this._getOrReturnCtx(e,o),P(o,{validation:"emoji",code:x.invalid_string,message:a.message}),i.dirty());else if(a.kind==="uuid")gp.test(e.data)||(o=this._getOrReturnCtx(e,o),P(o,{validation:"uuid",code:x.invalid_string,message:a.message}),i.dirty());else if(a.kind==="nanoid")yp.test(e.data)||(o=this._getOrReturnCtx(e,o),P(o,{validation:"nanoid",code:x.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid")hp.test(e.data)||(o=this._getOrReturnCtx(e,o),P(o,{validation:"cuid",code:x.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid2")pp.test(e.data)||(o=this._getOrReturnCtx(e,o),P(o,{validation:"cuid2",code:x.invalid_string,message:a.message}),i.dirty());else if(a.kind==="ulid")mp.test(e.data)||(o=this._getOrReturnCtx(e,o),P(o,{validation:"ulid",code:x.invalid_string,message:a.message}),i.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),P(o,{validation:"url",code:x.invalid_string,message:a.message}),i.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),P(o,{validation:"regex",code:x.invalid_string,message:a.message}),i.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(o=this._getOrReturnCtx(e,o),P(o,{code:x.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),i.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(o=this._getOrReturnCtx(e,o),P(o,{code:x.invalid_string,validation:{startsWith:a.value},message:a.message}),i.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(o=this._getOrReturnCtx(e,o),P(o,{code:x.invalid_string,validation:{endsWith:a.value},message:a.message}),i.dirty()):a.kind==="datetime"?Rp(a).test(e.data)||(o=this._getOrReturnCtx(e,o),P(o,{code:x.invalid_string,validation:"datetime",message:a.message}),i.dirty()):a.kind==="date"?Pp.test(e.data)||(o=this._getOrReturnCtx(e,o),P(o,{code:x.invalid_string,validation:"date",message:a.message}),i.dirty()):a.kind==="time"?wp(a).test(e.data)||(o=this._getOrReturnCtx(e,o),P(o,{code:x.invalid_string,validation:"time",message:a.message}),i.dirty()):a.kind==="duration"?Tp.test(e.data)||(o=this._getOrReturnCtx(e,o),P(o,{validation:"duration",code:x.invalid_string,message:a.message}),i.dirty()):a.kind==="ip"?Dp(e.data,a.version)||(o=this._getOrReturnCtx(e,o),P(o,{validation:"ip",code:x.invalid_string,message:a.message}),i.dirty()):a.kind==="jwt"?kp(e.data,a.alg)||(o=this._getOrReturnCtx(e,o),P(o,{validation:"jwt",code:x.invalid_string,message:a.message}),i.dirty()):a.kind==="cidr"?Np(e.data,a.version)||(o=this._getOrReturnCtx(e,o),P(o,{validation:"cidr",code:x.invalid_string,message:a.message}),i.dirty()):a.kind==="base64"?Mp.test(e.data)||(o=this._getOrReturnCtx(e,o),P(o,{validation:"base64",code:x.invalid_string,message:a.message}),i.dirty()):a.kind==="base64url"?Ip.test(e.data)||(o=this._getOrReturnCtx(e,o),P(o,{validation:"base64url",code:x.invalid_string,message:a.message}),i.dirty()):H.assertNever(a);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(o=>e.test(o),{validation:n,code:x.invalid_string,...k.errToObj(i)})}_addCheck(e){return new ye({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...k.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...k.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...k.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...k.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...k.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...k.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...k.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...k.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...k.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...k.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...k.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...k.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...k.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...k.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...k.errToObj(n)})}nonempty(e){return this.min(1,k.errToObj(e))}trim(){return new ye({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ye({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ye({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ye.create=t=>new ye({checks:[],typeName:U.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...$(t)});function Vp(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,o=n>i?n:i,a=Number.parseInt(t.toFixed(o).replace(".","")),l=Number.parseInt(e.toFixed(o).replace(".",""));return a%l/10**o}class Ye extends J{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==D.number){const a=this._getOrReturnCtx(e);return P(a,{code:x.invalid_type,expected:D.number,received:a.parsedType}),B}let i;const o=new ae;for(const a of this._def.checks)a.kind==="int"?H.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),P(i,{code:x.invalid_type,expected:"integer",received:"float",message:a.message}),o.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(i=this._getOrReturnCtx(e,i),P(i,{code:x.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),o.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(i=this._getOrReturnCtx(e,i),P(i,{code:x.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),o.dirty()):a.kind==="multipleOf"?Vp(e.data,a.value)!==0&&(i=this._getOrReturnCtx(e,i),P(i,{code:x.not_multiple_of,multipleOf:a.value,message:a.message}),o.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),P(i,{code:x.not_finite,message:a.message}),o.dirty()):H.assertNever(a);return{status:o.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,k.toString(n))}gt(e,n){return this.setLimit("min",e,!1,k.toString(n))}lte(e,n){return this.setLimit("max",e,!0,k.toString(n))}lt(e,n){return this.setLimit("max",e,!1,k.toString(n))}setLimit(e,n,i,o){return new Ye({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:k.toString(o)}]})}_addCheck(e){return new Ye({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:k.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:k.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&H.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ye.create=t=>new Ye({checks:[],typeName:U.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...$(t)});class ze extends J{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==D.bigint)return this._getInvalidInput(e);let i;const o=new ae;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(i=this._getOrReturnCtx(e,i),P(i,{code:x.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),o.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(i=this._getOrReturnCtx(e,i),P(i,{code:x.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),o.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),P(i,{code:x.not_multiple_of,multipleOf:a.value,message:a.message}),o.dirty()):H.assertNever(a);return{status:o.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return P(n,{code:x.invalid_type,expected:D.bigint,received:n.parsedType}),B}gte(e,n){return this.setLimit("min",e,!0,k.toString(n))}gt(e,n){return this.setLimit("min",e,!1,k.toString(n))}lte(e,n){return this.setLimit("max",e,!0,k.toString(n))}lt(e,n){return this.setLimit("max",e,!1,k.toString(n))}setLimit(e,n,i,o){return new ze({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:k.toString(o)}]})}_addCheck(e){return new ze({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:k.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ze.create=t=>new ze({checks:[],typeName:U.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...$(t)});class yn extends J{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==D.boolean){const i=this._getOrReturnCtx(e);return P(i,{code:x.invalid_type,expected:D.boolean,received:i.parsedType}),B}return pe(e.data)}}yn.create=t=>new yn({typeName:U.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...$(t)});class dt extends J{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==D.date){const a=this._getOrReturnCtx(e);return P(a,{code:x.invalid_type,expected:D.date,received:a.parsedType}),B}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return P(a,{code:x.invalid_date}),B}const i=new ae;let o;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(o=this._getOrReturnCtx(e,o),P(o,{code:x.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),i.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(o=this._getOrReturnCtx(e,o),P(o,{code:x.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),i.dirty()):H.assertNever(a);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new dt({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}dt.create=t=>new dt({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:U.ZodDate,...$(t)});class Js extends J{_parse(e){if(this._getType(e)!==D.symbol){const i=this._getOrReturnCtx(e);return P(i,{code:x.invalid_type,expected:D.symbol,received:i.parsedType}),B}return pe(e.data)}}Js.create=t=>new Js({typeName:U.ZodSymbol,...$(t)});class Hs extends J{_parse(e){if(this._getType(e)!==D.undefined){const i=this._getOrReturnCtx(e);return P(i,{code:x.invalid_type,expected:D.undefined,received:i.parsedType}),B}return pe(e.data)}}Hs.create=t=>new Hs({typeName:U.ZodUndefined,...$(t)});class Os extends J{_parse(e){if(this._getType(e)!==D.null){const i=this._getOrReturnCtx(e);return P(i,{code:x.invalid_type,expected:D.null,received:i.parsedType}),B}return pe(e.data)}}Os.create=t=>new Os({typeName:U.ZodNull,...$(t)});class Ws extends J{constructor(){super(...arguments),this._any=!0}_parse(e){return pe(e.data)}}Ws.create=t=>new Ws({typeName:U.ZodAny,...$(t)});class yi extends J{constructor(){super(...arguments),this._unknown=!0}_parse(e){return pe(e.data)}}yi.create=t=>new yi({typeName:U.ZodUnknown,...$(t)});class Ue extends J{_parse(e){const n=this._getOrReturnCtx(e);return P(n,{code:x.invalid_type,expected:D.never,received:n.parsedType}),B}}Ue.create=t=>new Ue({typeName:U.ZodNever,...$(t)});class Ks extends J{_parse(e){if(this._getType(e)!==D.undefined){const i=this._getOrReturnCtx(e);return P(i,{code:x.invalid_type,expected:D.void,received:i.parsedType}),B}return pe(e.data)}}Ks.create=t=>new Ks({typeName:U.ZodVoid,...$(t)});class Se extends J{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),o=this._def;if(n.parsedType!==D.array)return P(n,{code:x.invalid_type,expected:D.array,received:n.parsedType}),B;if(o.exactLength!==null){const l=n.data.length>o.exactLength.value,u=n.data.length<o.exactLength.value;(l||u)&&(P(n,{code:l?x.too_big:x.too_small,minimum:u?o.exactLength.value:void 0,maximum:l?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),i.dirty())}if(o.minLength!==null&&n.data.length<o.minLength.value&&(P(n,{code:x.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),i.dirty()),o.maxLength!==null&&n.data.length>o.maxLength.value&&(P(n,{code:x.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((l,u)=>o.type._parseAsync(new Ee(n,l,n.path,u)))).then(l=>ae.mergeArray(i,l));const a=[...n.data].map((l,u)=>o.type._parseSync(new Ee(n,l,n.path,u)));return ae.mergeArray(i,a)}get element(){return this._def.type}min(e,n){return new Se({...this._def,minLength:{value:e,message:k.toString(n)}})}max(e,n){return new Se({...this._def,maxLength:{value:e,message:k.toString(n)}})}length(e,n){return new Se({...this._def,exactLength:{value:e,message:k.toString(n)}})}nonempty(e){return this.min(1,e)}}Se.create=(t,e)=>new Se({type:t,minLength:null,maxLength:null,exactLength:null,typeName:U.ZodArray,...$(e)});function et(t){if(t instanceof j){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=Ve.create(et(i))}return new j({...t._def,shape:()=>e})}else return t instanceof Se?new Se({...t._def,type:et(t.element)}):t instanceof Ve?Ve.create(et(t.unwrap())):t instanceof mt?mt.create(et(t.unwrap())):t instanceof Ze?Ze.create(t.items.map(e=>et(e))):t}class j extends J{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=H.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==D.object){const c=this._getOrReturnCtx(e);return P(c,{code:x.invalid_type,expected:D.object,received:c.parsedType}),B}const{status:i,ctx:o}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof Ue&&this._def.unknownKeys==="strip"))for(const c in o.data)l.includes(c)||u.push(c);const f=[];for(const c of l){const d=a[c],h=o.data[c];f.push({key:{status:"valid",value:c},value:d._parse(new Ee(o,h,o.path,c)),alwaysSet:c in o.data})}if(this._def.catchall instanceof Ue){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of u)f.push({key:{status:"valid",value:d},value:{status:"valid",value:o.data[d]}});else if(c==="strict")u.length>0&&(P(o,{code:x.unrecognized_keys,keys:u}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of u){const h=o.data[d];f.push({key:{status:"valid",value:d},value:c._parse(new Ee(o,h,o.path,d)),alwaysSet:d in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of f){const h=await d.key,p=await d.value;c.push({key:h,value:p,alwaysSet:d.alwaysSet})}return c}).then(c=>ae.mergeObjectSync(i,c)):ae.mergeObjectSync(i,f)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new j({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var a,l;const o=((l=(a=this._def).errorMap)==null?void 0:l.call(a,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:k.errToObj(e).message??o}:{message:o}}}:{}})}strip(){return new j({...this._def,unknownKeys:"strip"})}passthrough(){return new j({...this._def,unknownKeys:"passthrough"})}extend(e){return new j({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new j({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:U.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new j({...this._def,catchall:e})}pick(e){const n={};for(const i of H.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new j({...this._def,shape:()=>n})}omit(e){const n={};for(const i of H.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new j({...this._def,shape:()=>n})}deepPartial(){return et(this)}partial(e){const n={};for(const i of H.objectKeys(this.shape)){const o=this.shape[i];e&&!e[i]?n[i]=o:n[i]=o.optional()}return new j({...this._def,shape:()=>n})}required(e){const n={};for(const i of H.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let a=this.shape[i];for(;a instanceof Ve;)a=a._def.innerType;n[i]=a}return new j({...this._def,shape:()=>n})}keyof(){return zl(H.objectKeys(this.shape))}}j.create=(t,e)=>new j({shape:()=>t,unknownKeys:"strip",catchall:Ue.create(),typeName:U.ZodObject,...$(e)});j.strictCreate=(t,e)=>new j({shape:()=>t,unknownKeys:"strict",catchall:Ue.create(),typeName:U.ZodObject,...$(e)});j.lazycreate=(t,e)=>new j({shape:t,unknownKeys:"strip",catchall:Ue.create(),typeName:U.ZodObject,...$(e)});class vn extends J{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function o(a){for(const u of a)if(u.result.status==="valid")return u.result;for(const u of a)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const l=a.map(u=>new Ie(u.ctx.common.issues));return P(n,{code:x.invalid_union,unionErrors:l}),B}if(n.common.async)return Promise.all(i.map(async a=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(o);{let a;const l=[];for(const f of i){const c={...n,common:{...n.common,issues:[]},parent:null},d=f._parseSync({data:n.data,path:n.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:c}),c.common.issues.length&&l.push(c.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const u=l.map(f=>new Ie(f));return P(n,{code:x.invalid_union,unionErrors:u}),B}}get options(){return this._def.options}}vn.create=(t,e)=>new vn({options:t,typeName:U.ZodUnion,...$(e)});function vi(t,e){const n=Ne(t),i=Ne(e);if(t===e)return{valid:!0,data:t};if(n===D.object&&i===D.object){const o=H.objectKeys(e),a=H.objectKeys(t).filter(u=>o.indexOf(u)!==-1),l={...t,...e};for(const u of a){const f=vi(t[u],e[u]);if(!f.valid)return{valid:!1};l[u]=f.data}return{valid:!0,data:l}}else if(n===D.array&&i===D.array){if(t.length!==e.length)return{valid:!1};const o=[];for(let a=0;a<t.length;a++){const l=t[a],u=e[a],f=vi(l,u);if(!f.valid)return{valid:!1};o.push(f.data)}return{valid:!0,data:o}}else return n===D.date&&i===D.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Tn extends J{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),o=(a,l)=>{if(Gs(a)||Gs(l))return B;const u=vi(a.value,l.value);return u.valid?((qs(a)||qs(l))&&n.dirty(),{status:n.value,value:u.data}):(P(i,{code:x.invalid_intersection_types}),B)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([a,l])=>o(a,l)):o(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Tn.create=(t,e,n)=>new Tn({left:t,right:e,typeName:U.ZodIntersection,...$(n)});class Ze extends J{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==D.array)return P(i,{code:x.invalid_type,expected:D.array,received:i.parsedType}),B;if(i.data.length<this._def.items.length)return P(i,{code:x.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),B;!this._def.rest&&i.data.length>this._def.items.length&&(P(i,{code:x.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...i.data].map((l,u)=>{const f=this._def.items[u]||this._def.rest;return f?f._parse(new Ee(i,l,i.path,u)):null}).filter(l=>!!l);return i.common.async?Promise.all(a).then(l=>ae.mergeArray(n,l)):ae.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Ze({...this._def,rest:e})}}Ze.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ze({items:t,typeName:U.ZodTuple,rest:null,...$(e)})};class Cn extends J{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==D.object)return P(i,{code:x.invalid_type,expected:D.object,received:i.parsedType}),B;const o=[],a=this._def.keyType,l=this._def.valueType;for(const u in i.data)o.push({key:a._parse(new Ee(i,u,i.path,u)),value:l._parse(new Ee(i,i.data[u],i.path,u)),alwaysSet:u in i.data});return i.common.async?ae.mergeObjectAsync(n,o):ae.mergeObjectSync(n,o)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof J?new Cn({keyType:e,valueType:n,typeName:U.ZodRecord,...$(i)}):new Cn({keyType:ye.create(),valueType:e,typeName:U.ZodRecord,...$(n)})}}class Ys extends J{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==D.map)return P(i,{code:x.invalid_type,expected:D.map,received:i.parsedType}),B;const o=this._def.keyType,a=this._def.valueType,l=[...i.data.entries()].map(([u,f],c)=>({key:o._parse(new Ee(i,u,i.path,[c,"key"])),value:a._parse(new Ee(i,f,i.path,[c,"value"]))}));if(i.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const f of l){const c=await f.key,d=await f.value;if(c.status==="aborted"||d.status==="aborted")return B;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),u.set(c.value,d.value)}return{status:n.value,value:u}})}else{const u=new Map;for(const f of l){const c=f.key,d=f.value;if(c.status==="aborted"||d.status==="aborted")return B;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),u.set(c.value,d.value)}return{status:n.value,value:u}}}}Ys.create=(t,e,n)=>new Ys({valueType:e,keyType:t,typeName:U.ZodMap,...$(n)});class $t extends J{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==D.set)return P(i,{code:x.invalid_type,expected:D.set,received:i.parsedType}),B;const o=this._def;o.minSize!==null&&i.data.size<o.minSize.value&&(P(i,{code:x.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),n.dirty()),o.maxSize!==null&&i.data.size>o.maxSize.value&&(P(i,{code:x.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),n.dirty());const a=this._def.valueType;function l(f){const c=new Set;for(const d of f){if(d.status==="aborted")return B;d.status==="dirty"&&n.dirty(),c.add(d.value)}return{status:n.value,value:c}}const u=[...i.data.values()].map((f,c)=>a._parse(new Ee(i,f,i.path,c)));return i.common.async?Promise.all(u).then(f=>l(f)):l(u)}min(e,n){return new $t({...this._def,minSize:{value:e,message:k.toString(n)}})}max(e,n){return new $t({...this._def,maxSize:{value:e,message:k.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}$t.create=(t,e)=>new $t({valueType:t,minSize:null,maxSize:null,typeName:U.ZodSet,...$(e)});class Ti extends J{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ti.create=(t,e)=>new Ti({getter:t,typeName:U.ZodLazy,...$(e)});class zs extends J{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return P(n,{received:n.data,code:x.invalid_literal,expected:this._def.value}),B}return{status:"valid",value:e.data}}get value(){return this._def.value}}zs.create=(t,e)=>new zs({value:t,typeName:U.ZodLiteral,...$(e)});function zl(t,e){return new ht({values:t,typeName:U.ZodEnum,...$(e)})}class ht extends J{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return P(n,{expected:H.joinValues(i),received:n.parsedType,code:x.invalid_type}),B}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return P(n,{received:n.data,code:x.invalid_enum_value,options:i}),B}return pe(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ht.create(e,{...this._def,...n})}exclude(e,n=this._def){return ht.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}ht.create=zl;class Zs extends J{_parse(e){const n=H.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==D.string&&i.parsedType!==D.number){const o=H.objectValues(n);return P(i,{expected:H.joinValues(o),received:i.parsedType,code:x.invalid_type}),B}if(this._cache||(this._cache=new Set(H.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const o=H.objectValues(n);return P(i,{received:i.data,code:x.invalid_enum_value,options:o}),B}return pe(e.data)}get enum(){return this._def.values}}Zs.create=(t,e)=>new Zs({values:t,typeName:U.ZodNativeEnum,...$(e)});class _n extends J{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==D.promise&&n.common.async===!1)return P(n,{code:x.invalid_type,expected:D.promise,received:n.parsedType}),B;const i=n.parsedType===D.promise?n.data:Promise.resolve(n.data);return pe(i.then(o=>this._def.type.parseAsync(o,{path:n.path,errorMap:n.common.contextualErrorMap})))}}_n.create=(t,e)=>new _n({type:t,typeName:U.ZodPromise,...$(e)});class pt extends J{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===U.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),o=this._def.effect||null,a={addIssue:l=>{P(i,l),l.fatal?n.abort():n.dirty()},get path(){return i.path}};if(a.addIssue=a.addIssue.bind(a),o.type==="preprocess"){const l=o.transform(i.data,a);if(i.common.async)return Promise.resolve(l).then(async u=>{if(n.value==="aborted")return B;const f=await this._def.schema._parseAsync({data:u,path:i.path,parent:i});return f.status==="aborted"?B:f.status==="dirty"||n.value==="dirty"?It(f.value):f});{if(n.value==="aborted")return B;const u=this._def.schema._parseSync({data:l,path:i.path,parent:i});return u.status==="aborted"?B:u.status==="dirty"||n.value==="dirty"?It(u.value):u}}if(o.type==="refinement"){const l=u=>{const f=o.refinement(u,a);if(i.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(i.common.async===!1){const u=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return u.status==="aborted"?B:(u.status==="dirty"&&n.dirty(),l(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(u=>u.status==="aborted"?B:(u.status==="dirty"&&n.dirty(),l(u.value).then(()=>({status:n.value,value:u.value}))))}if(o.type==="transform")if(i.common.async===!1){const l=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!ft(l))return B;const u=o.transform(l.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(l=>ft(l)?Promise.resolve(o.transform(l.value,a)).then(u=>({status:n.value,value:u})):B);H.assertNever(o)}}pt.create=(t,e,n)=>new pt({schema:t,typeName:U.ZodEffects,effect:e,...$(n)});pt.createWithPreprocess=(t,e,n)=>new pt({schema:e,effect:{type:"preprocess",transform:t},typeName:U.ZodEffects,...$(n)});class Ve extends J{_parse(e){return this._getType(e)===D.undefined?pe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ve.create=(t,e)=>new Ve({innerType:t,typeName:U.ZodOptional,...$(e)});class mt extends J{_parse(e){return this._getType(e)===D.null?pe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}mt.create=(t,e)=>new mt({innerType:t,typeName:U.ZodNullable,...$(e)});class Ci extends J{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===D.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Ci.create=(t,e)=>new Ci({innerType:t,typeName:U.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...$(e)});class _i extends J{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},o=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return gn(o)?o.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ie(i.common.issues)},input:i.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Ie(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}_i.create=(t,e)=>new _i({innerType:t,typeName:U.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...$(e)});class Xs extends J{_parse(e){if(this._getType(e)!==D.nan){const i=this._getOrReturnCtx(e);return P(i,{code:x.invalid_type,expected:D.nan,received:i.parsedType}),B}return{status:"valid",value:e.data}}}Xs.create=t=>new Xs({typeName:U.ZodNaN,...$(t)});class Lp extends J{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class go extends J{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?B:a.status==="dirty"?(n.dirty(),It(a.value)):this._def.out._parseAsync({data:a.value,path:i.path,parent:i})})();{const o=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return o.status==="aborted"?B:o.status==="dirty"?(n.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:i.path,parent:i})}}static create(e,n){return new go({in:e,out:n,typeName:U.ZodPipeline})}}class Si extends J{_parse(e){const n=this._def.innerType._parse(e),i=o=>(ft(o)&&(o.value=Object.freeze(o.value)),o);return gn(n)?n.then(o=>i(o)):i(n)}unwrap(){return this._def.innerType}}Si.create=(t,e)=>new Si({innerType:t,typeName:U.ZodReadonly,...$(e)});var U;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(U||(U={}));const $e=ye.create,Qs=Ye.create;ze.create;const Fp=yn.create;dt.create;const js=yi.create;Ue.create;const Pt=Se.create,Up=j.create,bp=vn.create;Tn.create;Ze.create;const Bp=Cn.create,Gp=Ti.create,qp=ht.create;_n.create;Ve.create;mt.create;const je={string:t=>ye.create({...t,coerce:!0}),number:t=>Ye.create({...t,coerce:!0}),boolean:t=>yn.create({...t,coerce:!0}),bigint:t=>ze.create({...t,coerce:!0}),date:t=>dt.create({...t,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $p,Jp;function Hp(){return{geminiUrl:$p,vertexUrl:Jp}}function Op(t,e,n){var i,o,a;if(!(!((i=t.httpOptions)===null||i===void 0)&&i.baseUrl)){const l=Hp();return t.vertexai?(o=l.vertexUrl)!==null&&o!==void 0?o:e:(a=l.geminiUrl)!==null&&a!==void 0?a:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qe{}function V(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function r(t,e,n){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[u])){const f=t[u];if(Array.isArray(n))for(let c=0;c<f.length;c++){const d=f[c];r(d,e.slice(a+1),n[c])}else for(const c of f)r(c,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in t||(t[u]=[{}]);const f=t[u];r(f[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function s(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const a=t[o];return Array.isArray(a)?a.map(l=>s(l,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var er;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(er||(er={}));var tr;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(tr||(tr={}));var ve;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ve||(ve={}));var nr;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(nr||(nr={}));var ir;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(ir||(ir={}));var or;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(or||(or={}));var sr;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(sr||(sr={}));var rr;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(rr||(rr={}));var ar;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ar||(ar={}));var lr;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(lr||(lr={}));var ur;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(ur||(ur={}));var cr;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(cr||(cr={}));var fr;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(fr||(fr={}));var dr;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(dr||(dr={}));var hr;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(hr||(hr={}));var pr;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(pr||(pr={}));var Sn;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Sn||(Sn={}));var mr;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(mr||(mr={}));var Ei;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ei||(Ei={}));var gr;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(gr||(gr={}));var yr;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(yr||(yr={}));var vr;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(vr||(vr={}));var Tr;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Tr||(Tr={}));var Cr;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Cr||(Cr={}));var _r;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(_r||(_r={}));var Sr;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Sr||(Sr={}));var Er;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(Er||(Er={}));var xr;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(xr||(xr={}));var Ar;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ar||(Ar={}));var Mr;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Mr||(Mr={}));var Ir;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Ir||(Ir={}));var Pr;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Pr||(Pr={}));var wr;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(wr||(wr={}));var Rr;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Rr||(Rr={}));var Dr;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Dr||(Dr={}));var kr;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(kr||(kr={}));var Nr;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Nr||(Nr={}));var Vr;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Vr||(Vr={}));var Lr;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Lr||(Lr={}));var Fr;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Fr||(Fr={}));var Ur;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ur||(Ur={}));var rt;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(rt||(rt={}));class xi{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class At{get text(){var e,n,i,o,a,l,u,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const h=[];for(const p of(f=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[m,g]of Object.entries(p))m!=="text"&&m!=="thought"&&(g!==null||g!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;d=!0,c+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,n,i,o,a,l,u,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const h of(f=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&d.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,i,o,a,l,u,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(f=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,i,o,a,l,u,f,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(f=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,i,o,a,l,u,f,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(f=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class br{}class Br{}class Wp{}class Kp{}class Gr{}class qr{}class $r{}class Yp{}class Jr{}class Hr{}class Or{}class zp{}class Zp{}class Xp{}class Wr{}class Qp{get text(){var e,n,i;let o="",a=!1;const l=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,c]of Object.entries(u))f!=="text"&&f!=="thought"&&c!==null&&l.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;a=!0,o+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,n,i;let o="";const a=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,f]of Object.entries(l))u!=="inlineData"&&f!==null&&a.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(o+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class jp{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Zl(t,e){const n=O(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Xl(t){return Array.isArray(t)?t.map(e=>En(e)):[En(t)]}function En(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Ql(t){const e=En(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jl(t){const e=En(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Kr(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function eu(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Kr(e)):[Kr(t)]}function Ai(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Yr(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function zr(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function se(t){if(t==null)throw new Error("ContentUnion is required");return Ai(t)?t:{role:"user",parts:eu(t)}}function tu(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=se(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=se(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>se(n)):[se(e)]}function he(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Yr(t)||zr(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[se(t)]}const e=[],n=[],i=Ai(t[0]);for(const o of t){const a=Ai(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(Yr(o)||zr(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:eu(n)}),e}const em=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Zr=qp(["string","number","integer","object","array","boolean","null"]),tm=bp([Zr,Pt(Zr)]);function nm(t=!0){const e=Gp(()=>{const n=Up({type:tm.optional(),format:$e().optional(),title:$e().optional(),description:$e().optional(),default:js().optional(),items:e.optional(),minItems:je.string().optional(),maxItems:je.string().optional(),enum:Pt(js()).optional(),properties:Bp($e(),e).optional(),required:Pt($e()).optional(),minProperties:je.string().optional(),maxProperties:je.string().optional(),propertyOrdering:Pt($e()).optional(),minimum:Qs().optional(),maximum:Qs().optional(),minLength:je.string().optional(),maxLength:je.string().optional(),pattern:$e().optional(),anyOf:Pt(e).optional(),additionalProperties:Fp().optional()});return t?n.strict():n});return e}function im(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(ve).includes(n[0].toUpperCase())?n[0].toUpperCase():ve.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(ve).includes(i.toUpperCase())?i.toUpperCase():ve.TYPE_UNSPECIFIED})}}function at(t){const e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&im(t.type,e);for(const[l,u]of Object.entries(t))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(ve).includes(u.toUpperCase())?u.toUpperCase():ve.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=at(u);else if(i.includes(l)){const f=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}f.push(at(c))}e[l]=f}else if(o.includes(l)){const f={};for(const[c,d]of Object.entries(u))f[c]=at(d);e[l]=f}else{if(l==="additionalProperties")continue;e[l]=u}return e}function Jt(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=nm().parse(t);return at(e)}else return at(t)}function yo(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function vo(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Tt(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=Jt(e.parameters)),e.response&&(e.response=Jt(e.response));return t}function Ct(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function om(t,e,n,i=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function Pe(t,e){if(typeof e!="string")throw new Error("name must be a string");return om(t,e,"cachedContents")}function nu(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function we(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function sm(t){return t!=null&&typeof t=="object"&&"name"in t}function rm(t){return t!=null&&typeof t=="object"&&"video"in t}function am(t){return t!=null&&typeof t=="object"&&"uri"in t}function iu(t){var e;let n;if(sm(t)&&(n=t.name),!(am(t)&&(n=t.uri,n===void 0))&&!(rm(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function ou(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function su(t){for(const e of["models","tunedModels","publisherModels"])if(lm(t,e))return t[e];return[]}function lm(t,e){return t!==null&&typeof t=="object"&&e in t}function um(t,e={}){const n=t,i={name:n.name,description:n.description,parameters:at(Pn(n.inputSchema))};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function cm(t,e={}){const n=[],i=new Set;for(const o of t){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const l=um(o,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function fm(t){const e=[];for(const n of t)e.push(Pn(n));return e}function dm(t){const e={};for(const[n,i]of Object.entries(t)){const o=i;e[n]=Pn(o)}return e}function Pn(t){const e=new Set(["items"]),n=new Set(["anyOf"]),i=new Set(["properties"]),o={};for(const[a,l]of Object.entries(t))if(e.has(a))o[a]=Pn(l);else if(n.has(a))o[a]=fm(l);else if(i.has(a))o[a]=dm(l);else if(a==="type"){const u=l.toUpperCase();o[a]=Object.values(ve).includes(u)?u:ve.TYPE_UNSPECIFIED}else em.has(a)&&(o[a]=l);return o}function ru(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function hm(t){const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function _t(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function au(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pm(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function mm(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function gm(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function ym(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],pm(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],mm(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],gm(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const f=s(t,["executableCode"]);f!=null&&r(e,["executableCode"],f);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const d=s(t,["functionResponse"]);d!=null&&r(e,["functionResponse"],d);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function lu(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>ym(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function vm(t){const e={},n=s(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const i=s(t,["default"]);i!=null&&r(e,["default"],i);const o=s(t,["description"]);o!=null&&r(e,["description"],o);const a=s(t,["enum"]);a!=null&&r(e,["enum"],a);const l=s(t,["example"]);l!=null&&r(e,["example"],l);const u=s(t,["format"]);u!=null&&r(e,["format"],u);const f=s(t,["items"]);f!=null&&r(e,["items"],f);const c=s(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const d=s(t,["maxLength"]);d!=null&&r(e,["maxLength"],d);const h=s(t,["maxProperties"]);h!=null&&r(e,["maxProperties"],h);const p=s(t,["maximum"]);p!=null&&r(e,["maximum"],p);const m=s(t,["minItems"]);m!=null&&r(e,["minItems"],m);const g=s(t,["minLength"]);g!=null&&r(e,["minLength"],g);const y=s(t,["minProperties"]);y!=null&&r(e,["minProperties"],y);const T=s(t,["minimum"]);T!=null&&r(e,["minimum"],T);const v=s(t,["nullable"]);v!=null&&r(e,["nullable"],v);const C=s(t,["pattern"]);C!=null&&r(e,["pattern"],C);const _=s(t,["properties"]);_!=null&&r(e,["properties"],_);const E=s(t,["propertyOrdering"]);E!=null&&r(e,["propertyOrdering"],E);const S=s(t,["required"]);S!=null&&r(e,["required"],S);const A=s(t,["title"]);A!=null&&r(e,["title"],A);const I=s(t,["type"]);return I!=null&&r(e,["type"],I),e}function Tm(t){const e={};if(s(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=s(t,["category"]);n!=null&&r(e,["category"],n);const i=s(t,["threshold"]);return i!=null&&r(e,["threshold"],i),e}function Cm(t){const e={},n=s(t,["behavior"]);n!=null&&r(e,["behavior"],n);const i=s(t,["description"]);i!=null&&r(e,["description"],i);const o=s(t,["name"]);o!=null&&r(e,["name"],o);const a=s(t,["parameters"]);a!=null&&r(e,["parameters"],a);const l=s(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const u=s(t,["response"]);u!=null&&r(e,["response"],u);const f=s(t,["responseJsonSchema"]);return f!=null&&r(e,["responseJsonSchema"],f),e}function _m(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function Sm(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],_m(n)),e}function Em(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function xm(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Em(n)),e}function Am(){return{}}function Mm(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>Cm(c))),r(e,["functionDeclarations"],f)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(t,["googleSearch"]);i!=null&&r(e,["googleSearch"],Sm(i));const o=s(t,["googleSearchRetrieval"]);if(o!=null&&r(e,["googleSearchRetrieval"],xm(o)),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(t,["urlContext"])!=null&&r(e,["urlContext"],Am());const l=s(t,["codeExecution"]);l!=null&&r(e,["codeExecution"],l);const u=s(t,["computerUse"]);return u!=null&&r(e,["computerUse"],u),e}function Im(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["allowedFunctionNames"]);return i!=null&&r(e,["allowedFunctionNames"],i),e}function Pm(t){const e={},n=s(t,["latitude"]);n!=null&&r(e,["latitude"],n);const i=s(t,["longitude"]);return i!=null&&r(e,["longitude"],i),e}function wm(t){const e={},n=s(t,["latLng"]);n!=null&&r(e,["latLng"],Pm(n));const i=s(t,["languageCode"]);return i!=null&&r(e,["languageCode"],i),e}function Rm(t){const e={},n=s(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],Im(n));const i=s(t,["retrievalConfig"]);return i!=null&&r(e,["retrievalConfig"],wm(i)),e}function Dm(t){const e={},n=s(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function uu(t){const e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],Dm(n)),e}function km(t){const e={},n=s(t,["speaker"]);n!=null&&r(e,["speaker"],n);const i=s(t,["voiceConfig"]);return i!=null&&r(e,["voiceConfig"],uu(i)),e}function Nm(t){const e={},n=s(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>km(o))),r(e,["speakerVoiceConfigs"],i)}return e}function Vm(t){const e={},n=s(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],uu(n));const i=s(t,["multiSpeakerVoiceConfig"]);i!=null&&r(e,["multiSpeakerVoiceConfig"],Nm(i));const o=s(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function Lm(t){const e={},n=s(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const i=s(t,["thinkingBudget"]);return i!=null&&r(e,["thinkingBudget"],i),e}function Fm(t,e,n){const i={},o=s(e,["systemInstruction"]);n!==void 0&&o!=null&&r(n,["systemInstruction"],lu(se(o)));const a=s(e,["temperature"]);a!=null&&r(i,["temperature"],a);const l=s(e,["topP"]);l!=null&&r(i,["topP"],l);const u=s(e,["topK"]);u!=null&&r(i,["topK"],u);const f=s(e,["candidateCount"]);f!=null&&r(i,["candidateCount"],f);const c=s(e,["maxOutputTokens"]);c!=null&&r(i,["maxOutputTokens"],c);const d=s(e,["stopSequences"]);d!=null&&r(i,["stopSequences"],d);const h=s(e,["responseLogprobs"]);h!=null&&r(i,["responseLogprobs"],h);const p=s(e,["logprobs"]);p!=null&&r(i,["logprobs"],p);const m=s(e,["presencePenalty"]);m!=null&&r(i,["presencePenalty"],m);const g=s(e,["frequencyPenalty"]);g!=null&&r(i,["frequencyPenalty"],g);const y=s(e,["seed"]);y!=null&&r(i,["seed"],y);const T=s(e,["responseMimeType"]);T!=null&&r(i,["responseMimeType"],T);const v=s(e,["responseSchema"]);v!=null&&r(i,["responseSchema"],vm(Jt(v)));const C=s(e,["responseJsonSchema"]);if(C!=null&&r(i,["responseJsonSchema"],C),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=s(e,["safetySettings"]);if(n!==void 0&&_!=null){let q=_;Array.isArray(q)&&(q=q.map(ne=>Tm(ne))),r(n,["safetySettings"],q)}const E=s(e,["tools"]);if(n!==void 0&&E!=null){let q=Ct(E);Array.isArray(q)&&(q=q.map(ne=>Mm(Tt(ne)))),r(n,["tools"],q)}const S=s(e,["toolConfig"]);if(n!==void 0&&S!=null&&r(n,["toolConfig"],Rm(S)),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=s(e,["cachedContent"]);n!==void 0&&A!=null&&r(n,["cachedContent"],Pe(t,A));const I=s(e,["responseModalities"]);I!=null&&r(i,["responseModalities"],I);const w=s(e,["mediaResolution"]);w!=null&&r(i,["mediaResolution"],w);const R=s(e,["speechConfig"]);if(R!=null&&r(i,["speechConfig"],Vm(yo(R))),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=s(e,["thinkingConfig"]);return F!=null&&r(i,["thinkingConfig"],Lm(F)),i}function Um(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["request","model"],O(t,i));const o=s(e,["contents"]);if(o!=null){let l=he(o);Array.isArray(l)&&(l=l.map(u=>lu(u))),r(n,["request","contents"],l)}const a=s(e,["config"]);return a!=null&&r(n,["request","generationConfig"],Fm(t,a,n)),n}function bm(t,e){const n={};if(s(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=s(e,["fileName"]);i!=null&&r(n,["fileName"],i);const o=s(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Um(t,l))),r(n,["requests","requests"],a)}return n}function Bm(t,e){const n={},i=s(t,["displayName"]);if(e!==void 0&&i!=null&&r(e,["batch","displayName"],i),s(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Gm(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["src"]);o!=null&&r(n,["batch","inputConfig"],bm(t,ru(t,o)));const a=s(e,["config"]);return a!=null&&r(n,["config"],Bm(a,n)),n}function qm(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],_t(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function $m(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],_t(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function Jm(t,e){const n={},i=s(t,["pageSize"]);e!==void 0&&i!=null&&r(e,["_query","pageSize"],i);const o=s(t,["pageToken"]);if(e!==void 0&&o!=null&&r(e,["_query","pageToken"],o),s(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Hm(t){const e={},n=s(t,["config"]);return n!=null&&r(e,["config"],Jm(n,e)),e}function Om(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],_t(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function Wm(t){const e={},n=s(t,["format"]);n!=null&&r(e,["instancesFormat"],n);const i=s(t,["gcsUri"]);i!=null&&r(e,["gcsSource","uris"],i);const o=s(t,["bigqueryUri"]);if(o!=null&&r(e,["bigquerySource","inputUri"],o),s(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Km(t){const e={},n=s(t,["format"]);n!=null&&r(e,["predictionsFormat"],n);const i=s(t,["gcsUri"]);i!=null&&r(e,["gcsDestination","outputUriPrefix"],i);const o=s(t,["bigqueryUri"]);if(o!=null&&r(e,["bigqueryDestination","outputUri"],o),s(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function Ym(t,e){const n={},i=s(t,["displayName"]);e!==void 0&&i!=null&&r(e,["displayName"],i);const o=s(t,["dest"]);return e!==void 0&&o!=null&&r(e,["outputConfig"],Km(hm(o))),n}function zm(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["model"],O(t,i));const o=s(e,["src"]);o!=null&&r(n,["inputConfig"],Wm(ru(t,o)));const a=s(e,["config"]);return a!=null&&r(n,["config"],Ym(a,n)),n}function Zm(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],_t(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function Xm(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],_t(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function Qm(t,e){const n={},i=s(t,["pageSize"]);e!==void 0&&i!=null&&r(e,["_query","pageSize"],i);const o=s(t,["pageToken"]);e!==void 0&&o!=null&&r(e,["_query","pageToken"],o);const a=s(t,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),n}function jm(t){const e={},n=s(t,["config"]);return n!=null&&r(e,["config"],Qm(n,e)),e}function eg(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],_t(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function cu(){return{}}function tg(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function ng(t){const e={},n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function ig(t){const e={},n=s(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function og(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],tg(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],ng(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],ig(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const f=s(t,["executableCode"]);f!=null&&r(e,["executableCode"],f);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const d=s(t,["functionResponse"]);d!=null&&r(e,["functionResponse"],d);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function sg(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>og(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function rg(t){const e={},n=s(t,["citationSources"]);return n!=null&&r(e,["citations"],n),e}function ag(t){const e={},n=s(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const i=s(t,["urlRetrievalStatus"]);return i!=null&&r(e,["urlRetrievalStatus"],i),e}function lg(t){const e={},n=s(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ag(o))),r(e,["urlMetadata"],i)}return e}function ug(t){const e={},n=s(t,["content"]);n!=null&&r(e,["content"],sg(n));const i=s(t,["citationMetadata"]);i!=null&&r(e,["citationMetadata"],rg(i));const o=s(t,["tokenCount"]);o!=null&&r(e,["tokenCount"],o);const a=s(t,["finishReason"]);a!=null&&r(e,["finishReason"],a);const l=s(t,["urlContextMetadata"]);l!=null&&r(e,["urlContextMetadata"],lg(l));const u=s(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const f=s(t,["groundingMetadata"]);f!=null&&r(e,["groundingMetadata"],f);const c=s(t,["index"]);c!=null&&r(e,["index"],c);const d=s(t,["logprobsResult"]);d!=null&&r(e,["logprobsResult"],d);const h=s(t,["safetyRatings"]);return h!=null&&r(e,["safetyRatings"],h),e}function cg(t){const e={},n=s(t,["candidates"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>ug(u))),r(e,["candidates"],l)}const i=s(t,["modelVersion"]);i!=null&&r(e,["modelVersion"],i);const o=s(t,["promptFeedback"]);o!=null&&r(e,["promptFeedback"],o);const a=s(t,["usageMetadata"]);return a!=null&&r(e,["usageMetadata"],a),e}function fg(t){const e={},n=s(t,["response"]);return n!=null&&r(e,["response"],cg(n)),s(t,["error"])!=null&&r(e,["error"],cu()),e}function dg(t){const e={},n=s(t,["responsesFile"]);n!=null&&r(e,["fileName"],n);const i=s(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>fg(a))),r(e,["inlinedResponses"],o)}return e}function Mi(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["metadata","displayName"]);i!=null&&r(e,["displayName"],i);const o=s(t,["metadata","state"]);o!=null&&r(e,["state"],au(o));const a=s(t,["metadata","createTime"]);a!=null&&r(e,["createTime"],a);const l=s(t,["metadata","endTime"]);l!=null&&r(e,["endTime"],l);const u=s(t,["metadata","updateTime"]);u!=null&&r(e,["updateTime"],u);const f=s(t,["metadata","model"]);f!=null&&r(e,["model"],f);const c=s(t,["metadata","output"]);return c!=null&&r(e,["dest"],dg(c)),e}function hg(t){const e={},n=s(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const i=s(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Mi(a))),r(e,["batchJobs"],o)}return e}function pg(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["done"]);return i!=null&&r(e,["done"],i),s(t,["error"])!=null&&r(e,["error"],cu()),e}function fu(t){const e={},n=s(t,["details"]);n!=null&&r(e,["details"],n);const i=s(t,["code"]);i!=null&&r(e,["code"],i);const o=s(t,["message"]);return o!=null&&r(e,["message"],o),e}function mg(t){const e={},n=s(t,["instancesFormat"]);n!=null&&r(e,["format"],n);const i=s(t,["gcsSource","uris"]);i!=null&&r(e,["gcsUri"],i);const o=s(t,["bigquerySource","inputUri"]);return o!=null&&r(e,["bigqueryUri"],o),e}function gg(t){const e={},n=s(t,["predictionsFormat"]);n!=null&&r(e,["format"],n);const i=s(t,["gcsDestination","outputUriPrefix"]);i!=null&&r(e,["gcsUri"],i);const o=s(t,["bigqueryDestination","outputUri"]);return o!=null&&r(e,["bigqueryUri"],o),e}function Ii(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["displayName"]);i!=null&&r(e,["displayName"],i);const o=s(t,["state"]);o!=null&&r(e,["state"],au(o));const a=s(t,["error"]);a!=null&&r(e,["error"],fu(a));const l=s(t,["createTime"]);l!=null&&r(e,["createTime"],l);const u=s(t,["startTime"]);u!=null&&r(e,["startTime"],u);const f=s(t,["endTime"]);f!=null&&r(e,["endTime"],f);const c=s(t,["updateTime"]);c!=null&&r(e,["updateTime"],c);const d=s(t,["model"]);d!=null&&r(e,["model"],d);const h=s(t,["inputConfig"]);h!=null&&r(e,["src"],mg(h));const p=s(t,["outputConfig"]);return p!=null&&r(e,["dest"],gg(p)),e}function yg(t){const e={},n=s(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const i=s(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Ii(a))),r(e,["batchJobs"],o)}return e}function vg(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["done"]);i!=null&&r(e,["done"],i);const o=s(t,["error"]);return o!=null&&r(e,["error"],fu(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xe;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Xe||(Xe={}));class Yt{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let l={config:{}};i?typeof i=="object"?l=Object.assign({},i):l=i:l={config:{}},l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(o=l.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tg extends Qe{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const o=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${o}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new Yt(Xe.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}async createInternal(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=zm(this.apiClient,e);return u=V("batchPredictionJobs",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>Ii(d))}else{const c=Gm(this.apiClient,e);return u=V("{model}:batchGenerateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>Mi(d))}}async get(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=Zm(this.apiClient,e);return u=V("batchPredictionJobs/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>Ii(d))}else{const c=qm(this.apiClient,e);return u=V("batches/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>Mi(d))}}async cancel(e){var n,i,o,a;let l="",u={};if(this.apiClient.isVertexAI()){const f=Xm(this.apiClient,e);l=V("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=$m(this.apiClient,e);l=V("batches/{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=jm(e);return u=V("batchPredictionJobs",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>{const h=yg(d),p=new Wr;return Object.assign(p,h),p})}else{const c=Hm(e);return u=V("batches",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>{const h=hg(d),p=new Wr;return Object.assign(p,h),p})}}async delete(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=eg(this.apiClient,e);return u=V("batchPredictionJobs/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>vg(d))}else{const c=Om(this.apiClient,e);return u=V("batches/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>pg(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cg(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function _g(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function Sg(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function Eg(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Cg(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],_g(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],Sg(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const f=s(t,["executableCode"]);f!=null&&r(e,["executableCode"],f);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const d=s(t,["functionResponse"]);d!=null&&r(e,["functionResponse"],d);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function Xr(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Eg(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function xg(t){const e={},n=s(t,["behavior"]);n!=null&&r(e,["behavior"],n);const i=s(t,["description"]);i!=null&&r(e,["description"],i);const o=s(t,["name"]);o!=null&&r(e,["name"],o);const a=s(t,["parameters"]);a!=null&&r(e,["parameters"],a);const l=s(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const u=s(t,["response"]);u!=null&&r(e,["response"],u);const f=s(t,["responseJsonSchema"]);return f!=null&&r(e,["responseJsonSchema"],f),e}function Ag(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function Mg(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],Ag(n)),e}function Ig(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function Pg(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Ig(n)),e}function wg(){return{}}function Rg(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>xg(c))),r(e,["functionDeclarations"],f)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(t,["googleSearch"]);i!=null&&r(e,["googleSearch"],Mg(i));const o=s(t,["googleSearchRetrieval"]);if(o!=null&&r(e,["googleSearchRetrieval"],Pg(o)),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(t,["urlContext"])!=null&&r(e,["urlContext"],wg());const l=s(t,["codeExecution"]);l!=null&&r(e,["codeExecution"],l);const u=s(t,["computerUse"]);return u!=null&&r(e,["computerUse"],u),e}function Dg(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["allowedFunctionNames"]);return i!=null&&r(e,["allowedFunctionNames"],i),e}function kg(t){const e={},n=s(t,["latitude"]);n!=null&&r(e,["latitude"],n);const i=s(t,["longitude"]);return i!=null&&r(e,["longitude"],i),e}function Ng(t){const e={},n=s(t,["latLng"]);n!=null&&r(e,["latLng"],kg(n));const i=s(t,["languageCode"]);return i!=null&&r(e,["languageCode"],i),e}function Vg(t){const e={},n=s(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],Dg(n));const i=s(t,["retrievalConfig"]);return i!=null&&r(e,["retrievalConfig"],Ng(i)),e}function Lg(t,e){const n={},i=s(t,["ttl"]);e!==void 0&&i!=null&&r(e,["ttl"],i);const o=s(t,["expireTime"]);e!==void 0&&o!=null&&r(e,["expireTime"],o);const a=s(t,["displayName"]);e!==void 0&&a!=null&&r(e,["displayName"],a);const l=s(t,["contents"]);if(e!==void 0&&l!=null){let d=he(l);Array.isArray(d)&&(d=d.map(h=>Xr(h))),r(e,["contents"],d)}const u=s(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],Xr(se(u)));const f=s(t,["tools"]);if(e!==void 0&&f!=null){let d=f;Array.isArray(d)&&(d=d.map(h=>Rg(h))),r(e,["tools"],d)}const c=s(t,["toolConfig"]);if(e!==void 0&&c!=null&&r(e,["toolConfig"],Vg(c)),s(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Fg(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["model"],Zl(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],Lg(o,n)),n}function Ug(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],Pe(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function bg(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],Pe(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function Bg(t,e){const n={},i=s(t,["ttl"]);e!==void 0&&i!=null&&r(e,["ttl"],i);const o=s(t,["expireTime"]);return e!==void 0&&o!=null&&r(e,["expireTime"],o),n}function Gg(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],Pe(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],Bg(o,n)),n}function qg(t,e){const n={},i=s(t,["pageSize"]);e!==void 0&&i!=null&&r(e,["_query","pageSize"],i);const o=s(t,["pageToken"]);return e!==void 0&&o!=null&&r(e,["_query","pageToken"],o),n}function $g(t){const e={},n=s(t,["config"]);return n!=null&&r(e,["config"],qg(n,e)),e}function Jg(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function Hg(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["data"]);i!=null&&r(e,["data"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Og(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["fileUri"]);i!=null&&r(e,["fileUri"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Wg(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Jg(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],Hg(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],Og(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const f=s(t,["executableCode"]);f!=null&&r(e,["executableCode"],f);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const d=s(t,["functionResponse"]);d!=null&&r(e,["functionResponse"],d);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function Qr(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Wg(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function Kg(t){const e={};if(s(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(t,["description"]);n!=null&&r(e,["description"],n);const i=s(t,["name"]);i!=null&&r(e,["name"],i);const o=s(t,["parameters"]);o!=null&&r(e,["parameters"],o);const a=s(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const l=s(t,["response"]);l!=null&&r(e,["response"],l);const u=s(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function Yg(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function zg(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],Yg(n)),e}function Zg(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function Xg(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Zg(n)),e}function Qg(){return{}}function jg(t){const e={},n=s(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function ey(t){const e={},n=s(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],jg(n));const i=s(t,["authType"]);i!=null&&r(e,["authType"],i);const o=s(t,["googleServiceAccountConfig"]);o!=null&&r(e,["googleServiceAccountConfig"],o);const a=s(t,["httpBasicAuthConfig"]);a!=null&&r(e,["httpBasicAuthConfig"],a);const l=s(t,["oauthConfig"]);l!=null&&r(e,["oauthConfig"],l);const u=s(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function ty(t){const e={},n=s(t,["authConfig"]);return n!=null&&r(e,["authConfig"],ey(n)),e}function ny(){return{}}function iy(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>Kg(p))),r(e,["functionDeclarations"],h)}const i=s(t,["retrieval"]);i!=null&&r(e,["retrieval"],i);const o=s(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],zg(o));const a=s(t,["googleSearchRetrieval"]);a!=null&&r(e,["googleSearchRetrieval"],Xg(a)),s(t,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],Qg());const u=s(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],ty(u)),s(t,["urlContext"])!=null&&r(e,["urlContext"],ny());const c=s(t,["codeExecution"]);c!=null&&r(e,["codeExecution"],c);const d=s(t,["computerUse"]);return d!=null&&r(e,["computerUse"],d),e}function oy(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["allowedFunctionNames"]);return i!=null&&r(e,["allowedFunctionNames"],i),e}function sy(t){const e={},n=s(t,["latitude"]);n!=null&&r(e,["latitude"],n);const i=s(t,["longitude"]);return i!=null&&r(e,["longitude"],i),e}function ry(t){const e={},n=s(t,["latLng"]);n!=null&&r(e,["latLng"],sy(n));const i=s(t,["languageCode"]);return i!=null&&r(e,["languageCode"],i),e}function ay(t){const e={},n=s(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],oy(n));const i=s(t,["retrievalConfig"]);return i!=null&&r(e,["retrievalConfig"],ry(i)),e}function ly(t,e){const n={},i=s(t,["ttl"]);e!==void 0&&i!=null&&r(e,["ttl"],i);const o=s(t,["expireTime"]);e!==void 0&&o!=null&&r(e,["expireTime"],o);const a=s(t,["displayName"]);e!==void 0&&a!=null&&r(e,["displayName"],a);const l=s(t,["contents"]);if(e!==void 0&&l!=null){let h=he(l);Array.isArray(h)&&(h=h.map(p=>Qr(p))),r(e,["contents"],h)}const u=s(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],Qr(se(u)));const f=s(t,["tools"]);if(e!==void 0&&f!=null){let h=f;Array.isArray(h)&&(h=h.map(p=>iy(p))),r(e,["tools"],h)}const c=s(t,["toolConfig"]);e!==void 0&&c!=null&&r(e,["toolConfig"],ay(c));const d=s(t,["kmsKeyName"]);return e!==void 0&&d!=null&&r(e,["encryption_spec","kmsKeyName"],d),n}function uy(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["model"],Zl(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],ly(o,n)),n}function cy(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],Pe(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function fy(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],Pe(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function dy(t,e){const n={},i=s(t,["ttl"]);e!==void 0&&i!=null&&r(e,["ttl"],i);const o=s(t,["expireTime"]);return e!==void 0&&o!=null&&r(e,["expireTime"],o),n}function hy(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],Pe(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],dy(o,n)),n}function py(t,e){const n={},i=s(t,["pageSize"]);e!==void 0&&i!=null&&r(e,["_query","pageSize"],i);const o=s(t,["pageToken"]);return e!==void 0&&o!=null&&r(e,["_query","pageToken"],o),n}function my(t){const e={},n=s(t,["config"]);return n!=null&&r(e,["config"],py(n,e)),e}function ln(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["displayName"]);i!=null&&r(e,["displayName"],i);const o=s(t,["model"]);o!=null&&r(e,["model"],o);const a=s(t,["createTime"]);a!=null&&r(e,["createTime"],a);const l=s(t,["updateTime"]);l!=null&&r(e,["updateTime"],l);const u=s(t,["expireTime"]);u!=null&&r(e,["expireTime"],u);const f=s(t,["usageMetadata"]);return f!=null&&r(e,["usageMetadata"],f),e}function gy(){return{}}function yy(t){const e={},n=s(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const i=s(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>ln(a))),r(e,["cachedContents"],o)}return e}function un(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["displayName"]);i!=null&&r(e,["displayName"],i);const o=s(t,["model"]);o!=null&&r(e,["model"],o);const a=s(t,["createTime"]);a!=null&&r(e,["createTime"],a);const l=s(t,["updateTime"]);l!=null&&r(e,["updateTime"],l);const u=s(t,["expireTime"]);u!=null&&r(e,["expireTime"],u);const f=s(t,["usageMetadata"]);return f!=null&&r(e,["usageMetadata"],f),e}function vy(){return{}}function Ty(t){const e={},n=s(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const i=s(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>un(a))),r(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cy extends Qe{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Yt(Xe.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=uy(this.apiClient,e);return u=V("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>un(d))}else{const c=Fg(this.apiClient,e);return u=V("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>ln(d))}}async get(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=cy(this.apiClient,e);return u=V("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>un(d))}else{const c=Ug(this.apiClient,e);return u=V("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>ln(d))}}async delete(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=fy(this.apiClient,e);return u=V("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(()=>{const d=vy(),h=new Hr;return Object.assign(h,d),h})}else{const c=bg(this.apiClient,e);return u=V("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(()=>{const d=gy(),h=new Hr;return Object.assign(h,d),h})}}async update(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=hy(this.apiClient,e);return u=V("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>un(d))}else{const c=Gg(this.apiClient,e);return u=V("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>ln(d))}}async listInternal(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=my(e);return u=V("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>{const h=Ty(d),p=new Or;return Object.assign(p,h),p})}else{const c=$g(e);return u=V("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>{const h=yy(d),p=new Or;return Object.assign(p,h),p})}}}function jr(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(t){return this instanceof W?(this.v=t,this):new W(t)}function lt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(m){return function(g){return Promise.resolve(g).then(m,h)}}function u(m,g){i[m]&&(o[m]=function(y){return new Promise(function(T,v){a.push([m,y,T,v])>1||f(m,y)})},g&&(o[m]=g(o[m])))}function f(m,g){try{c(i[m](g))}catch(y){p(a[0][3],y)}}function c(m){m.value instanceof W?Promise.resolve(m.value.v).then(d,h):p(a[0][2],m)}function d(m){f("next",m)}function h(m){f("throw",m)}function p(m,g){m(g),a.shift(),a.length&&f(a[0][0],a[0][1])}}function Vt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jr=="function"?jr(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(l){return new Promise(function(u,f){l=t[a](l),o(u,f,l.done,l.value)})}}function o(a,l,u,f){Promise.resolve(f).then(function(c){a({value:c,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _y(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:du(n)}function du(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Sy(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ea(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let a=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),a&&!du(t[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class Ey{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new xy(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class xy{constructor(e,n,i,o={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),Sy(a)}async sendMessage(e){var n;await this.sendPromise;const i=se(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,u;const f=await o,c=(l=(a=f.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,d=f.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];d!=null&&(p=(u=d.slice(h))!==null&&u!==void 0?u:[]);const m=c?[c]:[];this.recordHistory(i,m,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const i=se(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?ea(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,o;return lt(this,arguments,function*(){var l,u,f,c;const d=[];try{for(var h=!0,p=Vt(e),m;m=yield W(p.next()),l=m.done,!l;h=!0){c=m.value,h=!1;const g=c;if(_y(g)){const y=(o=(i=g.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;y!==void 0&&d.push(y)}yield yield W(g)}}catch(g){u={error:g}}finally{try{!h&&!l&&(f=p.return)&&(yield W(f.call(p)))}finally{if(u)throw u.error}}this.recordHistory(n,d)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(a=>a.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...ea(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wn extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,wn.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ay(t,e){const n={},i=s(t,["pageSize"]);e!==void 0&&i!=null&&r(e,["_query","pageSize"],i);const o=s(t,["pageToken"]);return e!==void 0&&o!=null&&r(e,["_query","pageToken"],o),n}function My(t){const e={},n=s(t,["config"]);return n!=null&&r(e,["config"],Ay(n,e)),e}function Iy(t){const e={},n=s(t,["details"]);n!=null&&r(e,["details"],n);const i=s(t,["message"]);i!=null&&r(e,["message"],i);const o=s(t,["code"]);return o!=null&&r(e,["code"],o),e}function Py(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["displayName"]);i!=null&&r(e,["displayName"],i);const o=s(t,["mimeType"]);o!=null&&r(e,["mimeType"],o);const a=s(t,["sizeBytes"]);a!=null&&r(e,["sizeBytes"],a);const l=s(t,["createTime"]);l!=null&&r(e,["createTime"],l);const u=s(t,["expirationTime"]);u!=null&&r(e,["expirationTime"],u);const f=s(t,["updateTime"]);f!=null&&r(e,["updateTime"],f);const c=s(t,["sha256Hash"]);c!=null&&r(e,["sha256Hash"],c);const d=s(t,["uri"]);d!=null&&r(e,["uri"],d);const h=s(t,["downloadUri"]);h!=null&&r(e,["downloadUri"],h);const p=s(t,["state"]);p!=null&&r(e,["state"],p);const m=s(t,["source"]);m!=null&&r(e,["source"],m);const g=s(t,["videoMetadata"]);g!=null&&r(e,["videoMetadata"],g);const y=s(t,["error"]);return y!=null&&r(e,["error"],Iy(y)),e}function wy(t){const e={},n=s(t,["file"]);n!=null&&r(e,["file"],Py(n));const i=s(t,["config"]);return i!=null&&r(e,["config"],i),e}function Ry(t){const e={},n=s(t,["name"]);n!=null&&r(e,["_url","file"],iu(n));const i=s(t,["config"]);return i!=null&&r(e,["config"],i),e}function Dy(t){const e={},n=s(t,["name"]);n!=null&&r(e,["_url","file"],iu(n));const i=s(t,["config"]);return i!=null&&r(e,["config"],i),e}function ky(t){const e={},n=s(t,["details"]);n!=null&&r(e,["details"],n);const i=s(t,["message"]);i!=null&&r(e,["message"],i);const o=s(t,["code"]);return o!=null&&r(e,["code"],o),e}function Pi(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["displayName"]);i!=null&&r(e,["displayName"],i);const o=s(t,["mimeType"]);o!=null&&r(e,["mimeType"],o);const a=s(t,["sizeBytes"]);a!=null&&r(e,["sizeBytes"],a);const l=s(t,["createTime"]);l!=null&&r(e,["createTime"],l);const u=s(t,["expirationTime"]);u!=null&&r(e,["expirationTime"],u);const f=s(t,["updateTime"]);f!=null&&r(e,["updateTime"],f);const c=s(t,["sha256Hash"]);c!=null&&r(e,["sha256Hash"],c);const d=s(t,["uri"]);d!=null&&r(e,["uri"],d);const h=s(t,["downloadUri"]);h!=null&&r(e,["downloadUri"],h);const p=s(t,["state"]);p!=null&&r(e,["state"],p);const m=s(t,["source"]);m!=null&&r(e,["source"],m);const g=s(t,["videoMetadata"]);g!=null&&r(e,["videoMetadata"],g);const y=s(t,["error"]);return y!=null&&r(e,["error"],ky(y)),e}function Ny(t){const e={},n=s(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const i=s(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Pi(a))),r(e,["files"],o)}return e}function Vy(){return{}}function Ly(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fy extends Qe{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Yt(Xe.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>Pi(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=My(e);return a=V("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=Ny(f),d=new zp;return Object.assign(d,c),d})}}async createInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=wy(e);return a=V("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Vy(),c=new Zp;return Object.assign(c,f),c})}}async get(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ry(e);return a=V("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Pi(f))}}async delete(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Dy(e);return a=V("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Ly(),c=new Xp;return Object.assign(c,f),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uy(t){const e={},n=s(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function by(t){const e={},n=s(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function hu(t){const e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],Uy(n)),e}function By(t){const e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],by(n)),e}function Gy(t){const e={},n=s(t,["speaker"]);n!=null&&r(e,["speaker"],n);const i=s(t,["voiceConfig"]);return i!=null&&r(e,["voiceConfig"],hu(i)),e}function qy(t){const e={},n=s(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Gy(o))),r(e,["speakerVoiceConfigs"],i)}return e}function $y(t){const e={},n=s(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],hu(n));const i=s(t,["multiSpeakerVoiceConfig"]);i!=null&&r(e,["multiSpeakerVoiceConfig"],qy(i));const o=s(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function Jy(t){const e={},n=s(t,["voiceConfig"]);if(n!=null&&r(e,["voiceConfig"],By(n)),s(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=s(t,["languageCode"]);return i!=null&&r(e,["languageCode"],i),e}function Hy(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function Oy(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function Wy(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function Ky(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["data"]);i!=null&&r(e,["data"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Yy(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function zy(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["fileUri"]);i!=null&&r(e,["fileUri"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Zy(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Hy(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],Wy(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],Yy(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const f=s(t,["executableCode"]);f!=null&&r(e,["executableCode"],f);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const d=s(t,["functionResponse"]);d!=null&&r(e,["functionResponse"],d);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function Xy(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Oy(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],Ky(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],zy(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const f=s(t,["executableCode"]);f!=null&&r(e,["executableCode"],f);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const d=s(t,["functionResponse"]);d!=null&&r(e,["functionResponse"],d);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function Qy(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Zy(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function jy(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Xy(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function ev(t){const e={},n=s(t,["behavior"]);n!=null&&r(e,["behavior"],n);const i=s(t,["description"]);i!=null&&r(e,["description"],i);const o=s(t,["name"]);o!=null&&r(e,["name"],o);const a=s(t,["parameters"]);a!=null&&r(e,["parameters"],a);const l=s(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const u=s(t,["response"]);u!=null&&r(e,["response"],u);const f=s(t,["responseJsonSchema"]);return f!=null&&r(e,["responseJsonSchema"],f),e}function tv(t){const e={};if(s(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(t,["description"]);n!=null&&r(e,["description"],n);const i=s(t,["name"]);i!=null&&r(e,["name"],i);const o=s(t,["parameters"]);o!=null&&r(e,["parameters"],o);const a=s(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const l=s(t,["response"]);l!=null&&r(e,["response"],l);const u=s(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function nv(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function iv(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function ov(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],nv(n)),e}function sv(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],iv(n)),e}function rv(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function av(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function lv(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],rv(n)),e}function uv(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],av(n)),e}function cv(){return{}}function fv(t){const e={},n=s(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function dv(t){const e={},n=s(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],fv(n));const i=s(t,["authType"]);i!=null&&r(e,["authType"],i);const o=s(t,["googleServiceAccountConfig"]);o!=null&&r(e,["googleServiceAccountConfig"],o);const a=s(t,["httpBasicAuthConfig"]);a!=null&&r(e,["httpBasicAuthConfig"],a);const l=s(t,["oauthConfig"]);l!=null&&r(e,["oauthConfig"],l);const u=s(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function hv(t){const e={},n=s(t,["authConfig"]);return n!=null&&r(e,["authConfig"],dv(n)),e}function pv(){return{}}function mv(){return{}}function gv(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>ev(c))),r(e,["functionDeclarations"],f)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(t,["googleSearch"]);i!=null&&r(e,["googleSearch"],ov(i));const o=s(t,["googleSearchRetrieval"]);if(o!=null&&r(e,["googleSearchRetrieval"],lv(o)),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(t,["urlContext"])!=null&&r(e,["urlContext"],pv());const l=s(t,["codeExecution"]);l!=null&&r(e,["codeExecution"],l);const u=s(t,["computerUse"]);return u!=null&&r(e,["computerUse"],u),e}function yv(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>tv(p))),r(e,["functionDeclarations"],h)}const i=s(t,["retrieval"]);i!=null&&r(e,["retrieval"],i);const o=s(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],sv(o));const a=s(t,["googleSearchRetrieval"]);a!=null&&r(e,["googleSearchRetrieval"],uv(a)),s(t,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],cv());const u=s(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],hv(u)),s(t,["urlContext"])!=null&&r(e,["urlContext"],mv());const c=s(t,["codeExecution"]);c!=null&&r(e,["codeExecution"],c);const d=s(t,["computerUse"]);return d!=null&&r(e,["computerUse"],d),e}function vv(t){const e={},n=s(t,["handle"]);if(n!=null&&r(e,["handle"],n),s(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Tv(t){const e={},n=s(t,["handle"]);n!=null&&r(e,["handle"],n);const i=s(t,["transparent"]);return i!=null&&r(e,["transparent"],i),e}function ta(){return{}}function na(){return{}}function Cv(t){const e={},n=s(t,["disabled"]);n!=null&&r(e,["disabled"],n);const i=s(t,["startOfSpeechSensitivity"]);i!=null&&r(e,["startOfSpeechSensitivity"],i);const o=s(t,["endOfSpeechSensitivity"]);o!=null&&r(e,["endOfSpeechSensitivity"],o);const a=s(t,["prefixPaddingMs"]);a!=null&&r(e,["prefixPaddingMs"],a);const l=s(t,["silenceDurationMs"]);return l!=null&&r(e,["silenceDurationMs"],l),e}function _v(t){const e={},n=s(t,["disabled"]);n!=null&&r(e,["disabled"],n);const i=s(t,["startOfSpeechSensitivity"]);i!=null&&r(e,["startOfSpeechSensitivity"],i);const o=s(t,["endOfSpeechSensitivity"]);o!=null&&r(e,["endOfSpeechSensitivity"],o);const a=s(t,["prefixPaddingMs"]);a!=null&&r(e,["prefixPaddingMs"],a);const l=s(t,["silenceDurationMs"]);return l!=null&&r(e,["silenceDurationMs"],l),e}function Sv(t){const e={},n=s(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],Cv(n));const i=s(t,["activityHandling"]);i!=null&&r(e,["activityHandling"],i);const o=s(t,["turnCoverage"]);return o!=null&&r(e,["turnCoverage"],o),e}function Ev(t){const e={},n=s(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],_v(n));const i=s(t,["activityHandling"]);i!=null&&r(e,["activityHandling"],i);const o=s(t,["turnCoverage"]);return o!=null&&r(e,["turnCoverage"],o),e}function xv(t){const e={},n=s(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function Av(t){const e={},n=s(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function Mv(t){const e={},n=s(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const i=s(t,["slidingWindow"]);return i!=null&&r(e,["slidingWindow"],xv(i)),e}function Iv(t){const e={},n=s(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const i=s(t,["slidingWindow"]);return i!=null&&r(e,["slidingWindow"],Av(i)),e}function Pv(t){const e={},n=s(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function wv(t){const e={},n=s(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function Rv(t,e){const n={},i=s(t,["generationConfig"]);e!==void 0&&i!=null&&r(e,["setup","generationConfig"],i);const o=s(t,["responseModalities"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig","responseModalities"],o);const a=s(t,["temperature"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","temperature"],a);const l=s(t,["topP"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","topP"],l);const u=s(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const f=s(t,["maxOutputTokens"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","maxOutputTokens"],f);const c=s(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const d=s(t,["seed"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","seed"],d);const h=s(t,["speechConfig"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","speechConfig"],$y(vo(h)));const p=s(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=s(t,["systemInstruction"]);e!==void 0&&m!=null&&r(e,["setup","systemInstruction"],Qy(se(m)));const g=s(t,["tools"]);if(e!==void 0&&g!=null){let S=Ct(g);Array.isArray(S)&&(S=S.map(A=>gv(Tt(A)))),r(e,["setup","tools"],S)}const y=s(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],vv(y));const T=s(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&r(e,["setup","inputAudioTranscription"],ta());const v=s(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&r(e,["setup","outputAudioTranscription"],ta());const C=s(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&r(e,["setup","realtimeInputConfig"],Sv(C));const _=s(t,["contextWindowCompression"]);e!==void 0&&_!=null&&r(e,["setup","contextWindowCompression"],Mv(_));const E=s(t,["proactivity"]);return e!==void 0&&E!=null&&r(e,["setup","proactivity"],Pv(E)),n}function Dv(t,e){const n={},i=s(t,["generationConfig"]);e!==void 0&&i!=null&&r(e,["setup","generationConfig"],i);const o=s(t,["responseModalities"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig","responseModalities"],o);const a=s(t,["temperature"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","temperature"],a);const l=s(t,["topP"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","topP"],l);const u=s(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const f=s(t,["maxOutputTokens"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","maxOutputTokens"],f);const c=s(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const d=s(t,["seed"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","seed"],d);const h=s(t,["speechConfig"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","speechConfig"],Jy(vo(h)));const p=s(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=s(t,["systemInstruction"]);e!==void 0&&m!=null&&r(e,["setup","systemInstruction"],jy(se(m)));const g=s(t,["tools"]);if(e!==void 0&&g!=null){let S=Ct(g);Array.isArray(S)&&(S=S.map(A=>yv(Tt(A)))),r(e,["setup","tools"],S)}const y=s(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],Tv(y));const T=s(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&r(e,["setup","inputAudioTranscription"],na());const v=s(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&r(e,["setup","outputAudioTranscription"],na());const C=s(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&r(e,["setup","realtimeInputConfig"],Ev(C));const _=s(t,["contextWindowCompression"]);e!==void 0&&_!=null&&r(e,["setup","contextWindowCompression"],Iv(_));const E=s(t,["proactivity"]);return e!==void 0&&E!=null&&r(e,["setup","proactivity"],wv(E)),n}function kv(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["setup","model"],O(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],Rv(o,n)),n}function Nv(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["setup","model"],O(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],Dv(o,n)),n}function Vv(){return{}}function Lv(){return{}}function Fv(){return{}}function Uv(){return{}}function bv(t){const e={},n=s(t,["media"]);n!=null&&r(e,["mediaChunks"],Xl(n));const i=s(t,["audio"]);i!=null&&r(e,["audio"],jl(i));const o=s(t,["audioStreamEnd"]);o!=null&&r(e,["audioStreamEnd"],o);const a=s(t,["video"]);a!=null&&r(e,["video"],Ql(a));const l=s(t,["text"]);return l!=null&&r(e,["text"],l),s(t,["activityStart"])!=null&&r(e,["activityStart"],Vv()),s(t,["activityEnd"])!=null&&r(e,["activityEnd"],Fv()),e}function Bv(t){const e={},n=s(t,["media"]);n!=null&&r(e,["mediaChunks"],Xl(n));const i=s(t,["audio"]);i!=null&&r(e,["audio"],jl(i));const o=s(t,["audioStreamEnd"]);o!=null&&r(e,["audioStreamEnd"],o);const a=s(t,["video"]);a!=null&&r(e,["video"],Ql(a));const l=s(t,["text"]);return l!=null&&r(e,["text"],l),s(t,["activityStart"])!=null&&r(e,["activityStart"],Lv()),s(t,["activityEnd"])!=null&&r(e,["activityEnd"],Uv()),e}function pu(t){const e={},n=s(t,["text"]);n!=null&&r(e,["text"],n);const i=s(t,["weight"]);return i!=null&&r(e,["weight"],i),e}function Gv(t){const e={},n=s(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>pu(o))),r(e,["weightedPrompts"],i)}return e}function mu(t){const e={},n=s(t,["temperature"]);n!=null&&r(e,["temperature"],n);const i=s(t,["topK"]);i!=null&&r(e,["topK"],i);const o=s(t,["seed"]);o!=null&&r(e,["seed"],o);const a=s(t,["guidance"]);a!=null&&r(e,["guidance"],a);const l=s(t,["bpm"]);l!=null&&r(e,["bpm"],l);const u=s(t,["density"]);u!=null&&r(e,["density"],u);const f=s(t,["brightness"]);f!=null&&r(e,["brightness"],f);const c=s(t,["scale"]);c!=null&&r(e,["scale"],c);const d=s(t,["muteBass"]);d!=null&&r(e,["muteBass"],d);const h=s(t,["muteDrums"]);h!=null&&r(e,["muteDrums"],h);const p=s(t,["onlyBassAndDrums"]);return p!=null&&r(e,["onlyBassAndDrums"],p),e}function qv(t){const e={},n=s(t,["musicGenerationConfig"]);return n!=null&&r(e,["musicGenerationConfig"],mu(n)),e}function gu(t){const e={},n=s(t,["model"]);return n!=null&&r(e,["model"],n),e}function yu(t){const e={},n=s(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>pu(o))),r(e,["weightedPrompts"],i)}return e}function wi(t){const e={},n=s(t,["setup"]);n!=null&&r(e,["setup"],gu(n));const i=s(t,["clientContent"]);i!=null&&r(e,["clientContent"],yu(i));const o=s(t,["musicGenerationConfig"]);o!=null&&r(e,["musicGenerationConfig"],mu(o));const a=s(t,["playbackControl"]);return a!=null&&r(e,["playbackControl"],a),e}function $v(){return{}}function Jv(t){const e={},n=s(t,["sessionId"]);return n!=null&&r(e,["sessionId"],n),e}function Hv(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function Ov(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function Wv(t){const e={},n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function Kv(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["data"]);i!=null&&r(e,["data"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Yv(t){const e={},n=s(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function zv(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["fileUri"]);i!=null&&r(e,["fileUri"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Zv(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Hv(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],Wv(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],Yv(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const f=s(t,["executableCode"]);f!=null&&r(e,["executableCode"],f);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const d=s(t,["functionResponse"]);d!=null&&r(e,["functionResponse"],d);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function Xv(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Ov(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],Kv(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],zv(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const f=s(t,["executableCode"]);f!=null&&r(e,["executableCode"],f);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const d=s(t,["functionResponse"]);d!=null&&r(e,["functionResponse"],d);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function Qv(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Zv(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function jv(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Xv(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function ia(t){const e={},n=s(t,["text"]);n!=null&&r(e,["text"],n);const i=s(t,["finished"]);return i!=null&&r(e,["finished"],i),e}function oa(t){const e={},n=s(t,["text"]);n!=null&&r(e,["text"],n);const i=s(t,["finished"]);return i!=null&&r(e,["finished"],i),e}function eT(t){const e={},n=s(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const i=s(t,["urlRetrievalStatus"]);return i!=null&&r(e,["urlRetrievalStatus"],i),e}function tT(t){const e={},n=s(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>eT(o))),r(e,["urlMetadata"],i)}return e}function nT(t){const e={},n=s(t,["modelTurn"]);n!=null&&r(e,["modelTurn"],Qv(n));const i=s(t,["turnComplete"]);i!=null&&r(e,["turnComplete"],i);const o=s(t,["interrupted"]);o!=null&&r(e,["interrupted"],o);const a=s(t,["groundingMetadata"]);a!=null&&r(e,["groundingMetadata"],a);const l=s(t,["generationComplete"]);l!=null&&r(e,["generationComplete"],l);const u=s(t,["inputTranscription"]);u!=null&&r(e,["inputTranscription"],ia(u));const f=s(t,["outputTranscription"]);f!=null&&r(e,["outputTranscription"],ia(f));const c=s(t,["urlContextMetadata"]);return c!=null&&r(e,["urlContextMetadata"],tT(c)),e}function iT(t){const e={},n=s(t,["modelTurn"]);n!=null&&r(e,["modelTurn"],jv(n));const i=s(t,["turnComplete"]);i!=null&&r(e,["turnComplete"],i);const o=s(t,["interrupted"]);o!=null&&r(e,["interrupted"],o);const a=s(t,["groundingMetadata"]);a!=null&&r(e,["groundingMetadata"],a);const l=s(t,["generationComplete"]);l!=null&&r(e,["generationComplete"],l);const u=s(t,["inputTranscription"]);u!=null&&r(e,["inputTranscription"],oa(u));const f=s(t,["outputTranscription"]);return f!=null&&r(e,["outputTranscription"],oa(f)),e}function oT(t){const e={},n=s(t,["id"]);n!=null&&r(e,["id"],n);const i=s(t,["args"]);i!=null&&r(e,["args"],i);const o=s(t,["name"]);return o!=null&&r(e,["name"],o),e}function sT(t){const e={},n=s(t,["args"]);n!=null&&r(e,["args"],n);const i=s(t,["name"]);return i!=null&&r(e,["name"],i),e}function rT(t){const e={},n=s(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>oT(o))),r(e,["functionCalls"],i)}return e}function aT(t){const e={},n=s(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>sT(o))),r(e,["functionCalls"],i)}return e}function lT(t){const e={},n=s(t,["ids"]);return n!=null&&r(e,["ids"],n),e}function uT(t){const e={},n=s(t,["ids"]);return n!=null&&r(e,["ids"],n),e}function tn(t){const e={},n=s(t,["modality"]);n!=null&&r(e,["modality"],n);const i=s(t,["tokenCount"]);return i!=null&&r(e,["tokenCount"],i),e}function nn(t){const e={},n=s(t,["modality"]);n!=null&&r(e,["modality"],n);const i=s(t,["tokenCount"]);return i!=null&&r(e,["tokenCount"],i),e}function cT(t){const e={},n=s(t,["promptTokenCount"]);n!=null&&r(e,["promptTokenCount"],n);const i=s(t,["cachedContentTokenCount"]);i!=null&&r(e,["cachedContentTokenCount"],i);const o=s(t,["responseTokenCount"]);o!=null&&r(e,["responseTokenCount"],o);const a=s(t,["toolUsePromptTokenCount"]);a!=null&&r(e,["toolUsePromptTokenCount"],a);const l=s(t,["thoughtsTokenCount"]);l!=null&&r(e,["thoughtsTokenCount"],l);const u=s(t,["totalTokenCount"]);u!=null&&r(e,["totalTokenCount"],u);const f=s(t,["promptTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>tn(m))),r(e,["promptTokensDetails"],p)}const c=s(t,["cacheTokensDetails"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>tn(m))),r(e,["cacheTokensDetails"],p)}const d=s(t,["responseTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>tn(m))),r(e,["responseTokensDetails"],p)}const h=s(t,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>tn(m))),r(e,["toolUsePromptTokensDetails"],p)}return e}function fT(t){const e={},n=s(t,["promptTokenCount"]);n!=null&&r(e,["promptTokenCount"],n);const i=s(t,["cachedContentTokenCount"]);i!=null&&r(e,["cachedContentTokenCount"],i);const o=s(t,["candidatesTokenCount"]);o!=null&&r(e,["responseTokenCount"],o);const a=s(t,["toolUsePromptTokenCount"]);a!=null&&r(e,["toolUsePromptTokenCount"],a);const l=s(t,["thoughtsTokenCount"]);l!=null&&r(e,["thoughtsTokenCount"],l);const u=s(t,["totalTokenCount"]);u!=null&&r(e,["totalTokenCount"],u);const f=s(t,["promptTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>nn(g))),r(e,["promptTokensDetails"],m)}const c=s(t,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>nn(g))),r(e,["cacheTokensDetails"],m)}const d=s(t,["candidatesTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>nn(g))),r(e,["responseTokensDetails"],m)}const h=s(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>nn(g))),r(e,["toolUsePromptTokensDetails"],m)}const p=s(t,["trafficType"]);return p!=null&&r(e,["trafficType"],p),e}function dT(t){const e={},n=s(t,["timeLeft"]);return n!=null&&r(e,["timeLeft"],n),e}function hT(t){const e={},n=s(t,["timeLeft"]);return n!=null&&r(e,["timeLeft"],n),e}function pT(t){const e={},n=s(t,["newHandle"]);n!=null&&r(e,["newHandle"],n);const i=s(t,["resumable"]);i!=null&&r(e,["resumable"],i);const o=s(t,["lastConsumedClientMessageIndex"]);return o!=null&&r(e,["lastConsumedClientMessageIndex"],o),e}function mT(t){const e={},n=s(t,["newHandle"]);n!=null&&r(e,["newHandle"],n);const i=s(t,["resumable"]);i!=null&&r(e,["resumable"],i);const o=s(t,["lastConsumedClientMessageIndex"]);return o!=null&&r(e,["lastConsumedClientMessageIndex"],o),e}function gT(t){const e={};s(t,["setupComplete"])!=null&&r(e,["setupComplete"],$v());const i=s(t,["serverContent"]);i!=null&&r(e,["serverContent"],nT(i));const o=s(t,["toolCall"]);o!=null&&r(e,["toolCall"],rT(o));const a=s(t,["toolCallCancellation"]);a!=null&&r(e,["toolCallCancellation"],lT(a));const l=s(t,["usageMetadata"]);l!=null&&r(e,["usageMetadata"],cT(l));const u=s(t,["goAway"]);u!=null&&r(e,["goAway"],dT(u));const f=s(t,["sessionResumptionUpdate"]);return f!=null&&r(e,["sessionResumptionUpdate"],pT(f)),e}function yT(t){const e={},n=s(t,["setupComplete"]);n!=null&&r(e,["setupComplete"],Jv(n));const i=s(t,["serverContent"]);i!=null&&r(e,["serverContent"],iT(i));const o=s(t,["toolCall"]);o!=null&&r(e,["toolCall"],aT(o));const a=s(t,["toolCallCancellation"]);a!=null&&r(e,["toolCallCancellation"],uT(a));const l=s(t,["usageMetadata"]);l!=null&&r(e,["usageMetadata"],fT(l));const u=s(t,["goAway"]);u!=null&&r(e,["goAway"],hT(u));const f=s(t,["sessionResumptionUpdate"]);return f!=null&&r(e,["sessionResumptionUpdate"],mT(f)),e}function vT(){return{}}function TT(t){const e={},n=s(t,["text"]);n!=null&&r(e,["text"],n);const i=s(t,["weight"]);return i!=null&&r(e,["weight"],i),e}function CT(t){const e={},n=s(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>TT(o))),r(e,["weightedPrompts"],i)}return e}function _T(t){const e={},n=s(t,["temperature"]);n!=null&&r(e,["temperature"],n);const i=s(t,["topK"]);i!=null&&r(e,["topK"],i);const o=s(t,["seed"]);o!=null&&r(e,["seed"],o);const a=s(t,["guidance"]);a!=null&&r(e,["guidance"],a);const l=s(t,["bpm"]);l!=null&&r(e,["bpm"],l);const u=s(t,["density"]);u!=null&&r(e,["density"],u);const f=s(t,["brightness"]);f!=null&&r(e,["brightness"],f);const c=s(t,["scale"]);c!=null&&r(e,["scale"],c);const d=s(t,["muteBass"]);d!=null&&r(e,["muteBass"],d);const h=s(t,["muteDrums"]);h!=null&&r(e,["muteDrums"],h);const p=s(t,["onlyBassAndDrums"]);return p!=null&&r(e,["onlyBassAndDrums"],p),e}function ST(t){const e={},n=s(t,["clientContent"]);n!=null&&r(e,["clientContent"],CT(n));const i=s(t,["musicGenerationConfig"]);return i!=null&&r(e,["musicGenerationConfig"],_T(i)),e}function ET(t){const e={},n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);i!=null&&r(e,["mimeType"],i);const o=s(t,["sourceMetadata"]);return o!=null&&r(e,["sourceMetadata"],ST(o)),e}function xT(t){const e={},n=s(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ET(o))),r(e,["audioChunks"],i)}return e}function AT(t){const e={},n=s(t,["text"]);n!=null&&r(e,["text"],n);const i=s(t,["filteredReason"]);return i!=null&&r(e,["filteredReason"],i),e}function MT(t){const e={};s(t,["setupComplete"])!=null&&r(e,["setupComplete"],vT());const i=s(t,["serverContent"]);i!=null&&r(e,["serverContent"],xT(i));const o=s(t,["filteredPrompt"]);return o!=null&&r(e,["filteredPrompt"],AT(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IT(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function PT(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function wT(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function RT(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],IT(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],PT(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],wT(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const f=s(t,["executableCode"]);f!=null&&r(e,["executableCode"],f);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const d=s(t,["functionResponse"]);d!=null&&r(e,["functionResponse"],d);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function Rn(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>RT(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function DT(t){const e={},n=s(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const i=s(t,["default"]);i!=null&&r(e,["default"],i);const o=s(t,["description"]);o!=null&&r(e,["description"],o);const a=s(t,["enum"]);a!=null&&r(e,["enum"],a);const l=s(t,["example"]);l!=null&&r(e,["example"],l);const u=s(t,["format"]);u!=null&&r(e,["format"],u);const f=s(t,["items"]);f!=null&&r(e,["items"],f);const c=s(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const d=s(t,["maxLength"]);d!=null&&r(e,["maxLength"],d);const h=s(t,["maxProperties"]);h!=null&&r(e,["maxProperties"],h);const p=s(t,["maximum"]);p!=null&&r(e,["maximum"],p);const m=s(t,["minItems"]);m!=null&&r(e,["minItems"],m);const g=s(t,["minLength"]);g!=null&&r(e,["minLength"],g);const y=s(t,["minProperties"]);y!=null&&r(e,["minProperties"],y);const T=s(t,["minimum"]);T!=null&&r(e,["minimum"],T);const v=s(t,["nullable"]);v!=null&&r(e,["nullable"],v);const C=s(t,["pattern"]);C!=null&&r(e,["pattern"],C);const _=s(t,["properties"]);_!=null&&r(e,["properties"],_);const E=s(t,["propertyOrdering"]);E!=null&&r(e,["propertyOrdering"],E);const S=s(t,["required"]);S!=null&&r(e,["required"],S);const A=s(t,["title"]);A!=null&&r(e,["title"],A);const I=s(t,["type"]);return I!=null&&r(e,["type"],I),e}function kT(t){const e={};if(s(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=s(t,["category"]);n!=null&&r(e,["category"],n);const i=s(t,["threshold"]);return i!=null&&r(e,["threshold"],i),e}function NT(t){const e={},n=s(t,["behavior"]);n!=null&&r(e,["behavior"],n);const i=s(t,["description"]);i!=null&&r(e,["description"],i);const o=s(t,["name"]);o!=null&&r(e,["name"],o);const a=s(t,["parameters"]);a!=null&&r(e,["parameters"],a);const l=s(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const u=s(t,["response"]);u!=null&&r(e,["response"],u);const f=s(t,["responseJsonSchema"]);return f!=null&&r(e,["responseJsonSchema"],f),e}function VT(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function LT(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],VT(n)),e}function FT(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function UT(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],FT(n)),e}function bT(){return{}}function BT(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>NT(c))),r(e,["functionDeclarations"],f)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(t,["googleSearch"]);i!=null&&r(e,["googleSearch"],LT(i));const o=s(t,["googleSearchRetrieval"]);if(o!=null&&r(e,["googleSearchRetrieval"],UT(o)),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(t,["urlContext"])!=null&&r(e,["urlContext"],bT());const l=s(t,["codeExecution"]);l!=null&&r(e,["codeExecution"],l);const u=s(t,["computerUse"]);return u!=null&&r(e,["computerUse"],u),e}function GT(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["allowedFunctionNames"]);return i!=null&&r(e,["allowedFunctionNames"],i),e}function qT(t){const e={},n=s(t,["latitude"]);n!=null&&r(e,["latitude"],n);const i=s(t,["longitude"]);return i!=null&&r(e,["longitude"],i),e}function $T(t){const e={},n=s(t,["latLng"]);n!=null&&r(e,["latLng"],qT(n));const i=s(t,["languageCode"]);return i!=null&&r(e,["languageCode"],i),e}function JT(t){const e={},n=s(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],GT(n));const i=s(t,["retrievalConfig"]);return i!=null&&r(e,["retrievalConfig"],$T(i)),e}function HT(t){const e={},n=s(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function vu(t){const e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],HT(n)),e}function OT(t){const e={},n=s(t,["speaker"]);n!=null&&r(e,["speaker"],n);const i=s(t,["voiceConfig"]);return i!=null&&r(e,["voiceConfig"],vu(i)),e}function WT(t){const e={},n=s(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>OT(o))),r(e,["speakerVoiceConfigs"],i)}return e}function KT(t){const e={},n=s(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],vu(n));const i=s(t,["multiSpeakerVoiceConfig"]);i!=null&&r(e,["multiSpeakerVoiceConfig"],WT(i));const o=s(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function YT(t){const e={},n=s(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const i=s(t,["thinkingBudget"]);return i!=null&&r(e,["thinkingBudget"],i),e}function zT(t,e,n){const i={},o=s(e,["systemInstruction"]);n!==void 0&&o!=null&&r(n,["systemInstruction"],Rn(se(o)));const a=s(e,["temperature"]);a!=null&&r(i,["temperature"],a);const l=s(e,["topP"]);l!=null&&r(i,["topP"],l);const u=s(e,["topK"]);u!=null&&r(i,["topK"],u);const f=s(e,["candidateCount"]);f!=null&&r(i,["candidateCount"],f);const c=s(e,["maxOutputTokens"]);c!=null&&r(i,["maxOutputTokens"],c);const d=s(e,["stopSequences"]);d!=null&&r(i,["stopSequences"],d);const h=s(e,["responseLogprobs"]);h!=null&&r(i,["responseLogprobs"],h);const p=s(e,["logprobs"]);p!=null&&r(i,["logprobs"],p);const m=s(e,["presencePenalty"]);m!=null&&r(i,["presencePenalty"],m);const g=s(e,["frequencyPenalty"]);g!=null&&r(i,["frequencyPenalty"],g);const y=s(e,["seed"]);y!=null&&r(i,["seed"],y);const T=s(e,["responseMimeType"]);T!=null&&r(i,["responseMimeType"],T);const v=s(e,["responseSchema"]);v!=null&&r(i,["responseSchema"],DT(Jt(v)));const C=s(e,["responseJsonSchema"]);if(C!=null&&r(i,["responseJsonSchema"],C),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=s(e,["safetySettings"]);if(n!==void 0&&_!=null){let q=_;Array.isArray(q)&&(q=q.map(ne=>kT(ne))),r(n,["safetySettings"],q)}const E=s(e,["tools"]);if(n!==void 0&&E!=null){let q=Ct(E);Array.isArray(q)&&(q=q.map(ne=>BT(Tt(ne)))),r(n,["tools"],q)}const S=s(e,["toolConfig"]);if(n!==void 0&&S!=null&&r(n,["toolConfig"],JT(S)),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=s(e,["cachedContent"]);n!==void 0&&A!=null&&r(n,["cachedContent"],Pe(t,A));const I=s(e,["responseModalities"]);I!=null&&r(i,["responseModalities"],I);const w=s(e,["mediaResolution"]);w!=null&&r(i,["mediaResolution"],w);const R=s(e,["speechConfig"]);if(R!=null&&r(i,["speechConfig"],KT(yo(R))),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=s(e,["thinkingConfig"]);return F!=null&&r(i,["thinkingConfig"],YT(F)),i}function sa(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["contents"]);if(o!=null){let l=he(o);Array.isArray(l)&&(l=l.map(u=>Rn(u))),r(n,["contents"],l)}const a=s(e,["config"]);return a!=null&&r(n,["generationConfig"],zT(t,a,n)),n}function ZT(t,e){const n={},i=s(t,["taskType"]);e!==void 0&&i!=null&&r(e,["requests[]","taskType"],i);const o=s(t,["title"]);e!==void 0&&o!=null&&r(e,["requests[]","title"],o);const a=s(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&r(e,["requests[]","outputDimensionality"],a),s(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function XT(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["contents"]);o!=null&&r(n,["requests[]","content"],tu(t,o));const a=s(e,["config"]);a!=null&&r(n,["config"],ZT(a,n));const l=s(e,["model"]);return l!==void 0&&r(n,["requests[]","model"],O(t,l)),n}function QT(t,e){const n={};if(s(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=s(t,["numberOfImages"]);e!==void 0&&i!=null&&r(e,["parameters","sampleCount"],i);const o=s(t,["aspectRatio"]);e!==void 0&&o!=null&&r(e,["parameters","aspectRatio"],o);const a=s(t,["guidanceScale"]);if(e!==void 0&&a!=null&&r(e,["parameters","guidanceScale"],a),s(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=s(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&r(e,["parameters","safetySetting"],l);const u=s(t,["personGeneration"]);e!==void 0&&u!=null&&r(e,["parameters","personGeneration"],u);const f=s(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&r(e,["parameters","includeSafetyAttributes"],f);const c=s(t,["includeRaiReason"]);e!==void 0&&c!=null&&r(e,["parameters","includeRaiReason"],c);const d=s(t,["language"]);e!==void 0&&d!=null&&r(e,["parameters","language"],d);const h=s(t,["outputMimeType"]);e!==void 0&&h!=null&&r(e,["parameters","outputOptions","mimeType"],h);const p=s(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&r(e,["parameters","outputOptions","compressionQuality"],p),s(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(s(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function jT(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["prompt"]);o!=null&&r(n,["instances[0]","prompt"],o);const a=s(e,["config"]);return a!=null&&r(n,["config"],QT(a,n)),n}function eC(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","name"],O(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function tC(t,e,n){const i={},o=s(e,["pageSize"]);n!==void 0&&o!=null&&r(n,["_query","pageSize"],o);const a=s(e,["pageToken"]);n!==void 0&&a!=null&&r(n,["_query","pageToken"],a);const l=s(e,["filter"]);n!==void 0&&l!=null&&r(n,["_query","filter"],l);const u=s(e,["queryBase"]);return n!==void 0&&u!=null&&r(n,["_url","models_url"],ou(t,u)),i}function nC(t,e){const n={},i=s(e,["config"]);return i!=null&&r(n,["config"],tC(t,i,n)),n}function iC(t,e){const n={},i=s(t,["displayName"]);e!==void 0&&i!=null&&r(e,["displayName"],i);const o=s(t,["description"]);e!==void 0&&o!=null&&r(e,["description"],o);const a=s(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&r(e,["defaultCheckpointId"],a),n}function oC(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","name"],O(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],iC(o,n)),n}function sC(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","name"],O(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function rC(t){const e={};if(s(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(s(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(s(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function aC(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["contents"]);if(o!=null){let l=he(o);Array.isArray(l)&&(l=l.map(u=>Rn(u))),r(n,["contents"],l)}const a=s(e,["config"]);return a!=null&&r(n,["config"],rC(a)),n}function lC(t){const e={};if(s(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=s(t,["imageBytes"]);n!=null&&r(e,["bytesBase64Encoded"],we(n));const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function uC(t,e){const n={},i=s(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&r(e,["parameters","sampleCount"],i),s(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=s(t,["durationSeconds"]);if(e!==void 0&&o!=null&&r(e,["parameters","durationSeconds"],o),s(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=s(t,["aspectRatio"]);if(e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a),s(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=s(t,["personGeneration"]);if(e!==void 0&&l!=null&&r(e,["parameters","personGeneration"],l),s(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=s(t,["negativePrompt"]);e!==void 0&&u!=null&&r(e,["parameters","negativePrompt"],u);const f=s(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&r(e,["parameters","enhancePrompt"],f),s(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(s(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(s(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function cC(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["prompt"]);o!=null&&r(n,["instances[0]","prompt"],o);const a=s(e,["image"]);if(a!=null&&r(n,["instances[0]","image"],lC(a)),s(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const l=s(e,["config"]);return l!=null&&r(n,["config"],uC(l,n)),n}function fC(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function dC(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["data"]);i!=null&&r(e,["data"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function hC(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["fileUri"]);i!=null&&r(e,["fileUri"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function pC(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],fC(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],dC(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],hC(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const f=s(t,["executableCode"]);f!=null&&r(e,["executableCode"],f);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const d=s(t,["functionResponse"]);d!=null&&r(e,["functionResponse"],d);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function St(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>pC(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function mC(t){const e={},n=s(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const i=s(t,["default"]);i!=null&&r(e,["default"],i);const o=s(t,["description"]);o!=null&&r(e,["description"],o);const a=s(t,["enum"]);a!=null&&r(e,["enum"],a);const l=s(t,["example"]);l!=null&&r(e,["example"],l);const u=s(t,["format"]);u!=null&&r(e,["format"],u);const f=s(t,["items"]);f!=null&&r(e,["items"],f);const c=s(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const d=s(t,["maxLength"]);d!=null&&r(e,["maxLength"],d);const h=s(t,["maxProperties"]);h!=null&&r(e,["maxProperties"],h);const p=s(t,["maximum"]);p!=null&&r(e,["maximum"],p);const m=s(t,["minItems"]);m!=null&&r(e,["minItems"],m);const g=s(t,["minLength"]);g!=null&&r(e,["minLength"],g);const y=s(t,["minProperties"]);y!=null&&r(e,["minProperties"],y);const T=s(t,["minimum"]);T!=null&&r(e,["minimum"],T);const v=s(t,["nullable"]);v!=null&&r(e,["nullable"],v);const C=s(t,["pattern"]);C!=null&&r(e,["pattern"],C);const _=s(t,["properties"]);_!=null&&r(e,["properties"],_);const E=s(t,["propertyOrdering"]);E!=null&&r(e,["propertyOrdering"],E);const S=s(t,["required"]);S!=null&&r(e,["required"],S);const A=s(t,["title"]);A!=null&&r(e,["title"],A);const I=s(t,["type"]);return I!=null&&r(e,["type"],I),e}function gC(t){const e={},n=s(t,["featureSelectionPreference"]);return n!=null&&r(e,["featureSelectionPreference"],n),e}function yC(t){const e={},n=s(t,["method"]);n!=null&&r(e,["method"],n);const i=s(t,["category"]);i!=null&&r(e,["category"],i);const o=s(t,["threshold"]);return o!=null&&r(e,["threshold"],o),e}function vC(t){const e={};if(s(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(t,["description"]);n!=null&&r(e,["description"],n);const i=s(t,["name"]);i!=null&&r(e,["name"],i);const o=s(t,["parameters"]);o!=null&&r(e,["parameters"],o);const a=s(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const l=s(t,["response"]);l!=null&&r(e,["response"],l);const u=s(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function TC(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function CC(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],TC(n)),e}function _C(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function SC(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],_C(n)),e}function EC(){return{}}function xC(t){const e={},n=s(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function AC(t){const e={},n=s(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],xC(n));const i=s(t,["authType"]);i!=null&&r(e,["authType"],i);const o=s(t,["googleServiceAccountConfig"]);o!=null&&r(e,["googleServiceAccountConfig"],o);const a=s(t,["httpBasicAuthConfig"]);a!=null&&r(e,["httpBasicAuthConfig"],a);const l=s(t,["oauthConfig"]);l!=null&&r(e,["oauthConfig"],l);const u=s(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function MC(t){const e={},n=s(t,["authConfig"]);return n!=null&&r(e,["authConfig"],AC(n)),e}function IC(){return{}}function Tu(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>vC(p))),r(e,["functionDeclarations"],h)}const i=s(t,["retrieval"]);i!=null&&r(e,["retrieval"],i);const o=s(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],CC(o));const a=s(t,["googleSearchRetrieval"]);a!=null&&r(e,["googleSearchRetrieval"],SC(a)),s(t,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],EC());const u=s(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],MC(u)),s(t,["urlContext"])!=null&&r(e,["urlContext"],IC());const c=s(t,["codeExecution"]);c!=null&&r(e,["codeExecution"],c);const d=s(t,["computerUse"]);return d!=null&&r(e,["computerUse"],d),e}function PC(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["allowedFunctionNames"]);return i!=null&&r(e,["allowedFunctionNames"],i),e}function wC(t){const e={},n=s(t,["latitude"]);n!=null&&r(e,["latitude"],n);const i=s(t,["longitude"]);return i!=null&&r(e,["longitude"],i),e}function RC(t){const e={},n=s(t,["latLng"]);n!=null&&r(e,["latLng"],wC(n));const i=s(t,["languageCode"]);return i!=null&&r(e,["languageCode"],i),e}function DC(t){const e={},n=s(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],PC(n));const i=s(t,["retrievalConfig"]);return i!=null&&r(e,["retrievalConfig"],RC(i)),e}function kC(t){const e={},n=s(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function NC(t){const e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],kC(n)),e}function VC(t){const e={},n=s(t,["voiceConfig"]);if(n!=null&&r(e,["voiceConfig"],NC(n)),s(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=s(t,["languageCode"]);return i!=null&&r(e,["languageCode"],i),e}function LC(t){const e={},n=s(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const i=s(t,["thinkingBudget"]);return i!=null&&r(e,["thinkingBudget"],i),e}function FC(t,e,n){const i={},o=s(e,["systemInstruction"]);n!==void 0&&o!=null&&r(n,["systemInstruction"],St(se(o)));const a=s(e,["temperature"]);a!=null&&r(i,["temperature"],a);const l=s(e,["topP"]);l!=null&&r(i,["topP"],l);const u=s(e,["topK"]);u!=null&&r(i,["topK"],u);const f=s(e,["candidateCount"]);f!=null&&r(i,["candidateCount"],f);const c=s(e,["maxOutputTokens"]);c!=null&&r(i,["maxOutputTokens"],c);const d=s(e,["stopSequences"]);d!=null&&r(i,["stopSequences"],d);const h=s(e,["responseLogprobs"]);h!=null&&r(i,["responseLogprobs"],h);const p=s(e,["logprobs"]);p!=null&&r(i,["logprobs"],p);const m=s(e,["presencePenalty"]);m!=null&&r(i,["presencePenalty"],m);const g=s(e,["frequencyPenalty"]);g!=null&&r(i,["frequencyPenalty"],g);const y=s(e,["seed"]);y!=null&&r(i,["seed"],y);const T=s(e,["responseMimeType"]);T!=null&&r(i,["responseMimeType"],T);const v=s(e,["responseSchema"]);v!=null&&r(i,["responseSchema"],mC(Jt(v)));const C=s(e,["responseJsonSchema"]);C!=null&&r(i,["responseJsonSchema"],C);const _=s(e,["routingConfig"]);_!=null&&r(i,["routingConfig"],_);const E=s(e,["modelSelectionConfig"]);E!=null&&r(i,["modelConfig"],gC(E));const S=s(e,["safetySettings"]);if(n!==void 0&&S!=null){let ue=S;Array.isArray(ue)&&(ue=ue.map(De=>yC(De))),r(n,["safetySettings"],ue)}const A=s(e,["tools"]);if(n!==void 0&&A!=null){let ue=Ct(A);Array.isArray(ue)&&(ue=ue.map(De=>Tu(Tt(De)))),r(n,["tools"],ue)}const I=s(e,["toolConfig"]);n!==void 0&&I!=null&&r(n,["toolConfig"],DC(I));const w=s(e,["labels"]);n!==void 0&&w!=null&&r(n,["labels"],w);const R=s(e,["cachedContent"]);n!==void 0&&R!=null&&r(n,["cachedContent"],Pe(t,R));const F=s(e,["responseModalities"]);F!=null&&r(i,["responseModalities"],F);const q=s(e,["mediaResolution"]);q!=null&&r(i,["mediaResolution"],q);const ne=s(e,["speechConfig"]);ne!=null&&r(i,["speechConfig"],VC(yo(ne)));const ge=s(e,["audioTimestamp"]);ge!=null&&r(i,["audioTimestamp"],ge);const Re=s(e,["thinkingConfig"]);return Re!=null&&r(i,["thinkingConfig"],LC(Re)),i}function ra(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["contents"]);if(o!=null){let l=he(o);Array.isArray(l)&&(l=l.map(u=>St(u))),r(n,["contents"],l)}const a=s(e,["config"]);return a!=null&&r(n,["generationConfig"],FC(t,a,n)),n}function UC(t,e){const n={},i=s(t,["taskType"]);e!==void 0&&i!=null&&r(e,["instances[]","task_type"],i);const o=s(t,["title"]);e!==void 0&&o!=null&&r(e,["instances[]","title"],o);const a=s(t,["outputDimensionality"]);e!==void 0&&a!=null&&r(e,["parameters","outputDimensionality"],a);const l=s(t,["mimeType"]);e!==void 0&&l!=null&&r(e,["instances[]","mimeType"],l);const u=s(t,["autoTruncate"]);return e!==void 0&&u!=null&&r(e,["parameters","autoTruncate"],u),n}function bC(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["contents"]);o!=null&&r(n,["instances[]","content"],tu(t,o));const a=s(e,["config"]);return a!=null&&r(n,["config"],UC(a,n)),n}function BC(t,e){const n={},i=s(t,["outputGcsUri"]);e!==void 0&&i!=null&&r(e,["parameters","storageUri"],i);const o=s(t,["negativePrompt"]);e!==void 0&&o!=null&&r(e,["parameters","negativePrompt"],o);const a=s(t,["numberOfImages"]);e!==void 0&&a!=null&&r(e,["parameters","sampleCount"],a);const l=s(t,["aspectRatio"]);e!==void 0&&l!=null&&r(e,["parameters","aspectRatio"],l);const u=s(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const f=s(t,["seed"]);e!==void 0&&f!=null&&r(e,["parameters","seed"],f);const c=s(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&r(e,["parameters","safetySetting"],c);const d=s(t,["personGeneration"]);e!==void 0&&d!=null&&r(e,["parameters","personGeneration"],d);const h=s(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&r(e,["parameters","includeSafetyAttributes"],h);const p=s(t,["includeRaiReason"]);e!==void 0&&p!=null&&r(e,["parameters","includeRaiReason"],p);const m=s(t,["language"]);e!==void 0&&m!=null&&r(e,["parameters","language"],m);const g=s(t,["outputMimeType"]);e!==void 0&&g!=null&&r(e,["parameters","outputOptions","mimeType"],g);const y=s(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&r(e,["parameters","outputOptions","compressionQuality"],y);const T=s(t,["addWatermark"]);e!==void 0&&T!=null&&r(e,["parameters","addWatermark"],T);const v=s(t,["enhancePrompt"]);return e!==void 0&&v!=null&&r(e,["parameters","enhancePrompt"],v),n}function GC(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["prompt"]);o!=null&&r(n,["instances[0]","prompt"],o);const a=s(e,["config"]);return a!=null&&r(n,["config"],BC(a,n)),n}function Dn(t){const e={},n=s(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const i=s(t,["imageBytes"]);i!=null&&r(e,["bytesBase64Encoded"],we(i));const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function qC(t){const e={},n=s(t,["maskMode"]);n!=null&&r(e,["maskMode"],n);const i=s(t,["segmentationClasses"]);i!=null&&r(e,["maskClasses"],i);const o=s(t,["maskDilation"]);return o!=null&&r(e,["dilation"],o),e}function $C(t){const e={},n=s(t,["controlType"]);n!=null&&r(e,["controlType"],n);const i=s(t,["enableControlImageComputation"]);return i!=null&&r(e,["computeControl"],i),e}function JC(t){const e={},n=s(t,["styleDescription"]);return n!=null&&r(e,["styleDescription"],n),e}function HC(t){const e={},n=s(t,["subjectType"]);n!=null&&r(e,["subjectType"],n);const i=s(t,["subjectDescription"]);return i!=null&&r(e,["subjectDescription"],i),e}function OC(t){const e={},n=s(t,["referenceImage"]);n!=null&&r(e,["referenceImage"],Dn(n));const i=s(t,["referenceId"]);i!=null&&r(e,["referenceId"],i);const o=s(t,["referenceType"]);o!=null&&r(e,["referenceType"],o);const a=s(t,["maskImageConfig"]);a!=null&&r(e,["maskImageConfig"],qC(a));const l=s(t,["controlImageConfig"]);l!=null&&r(e,["controlImageConfig"],$C(l));const u=s(t,["styleImageConfig"]);u!=null&&r(e,["styleImageConfig"],JC(u));const f=s(t,["subjectImageConfig"]);return f!=null&&r(e,["subjectImageConfig"],HC(f)),e}function WC(t,e){const n={},i=s(t,["outputGcsUri"]);e!==void 0&&i!=null&&r(e,["parameters","storageUri"],i);const o=s(t,["negativePrompt"]);e!==void 0&&o!=null&&r(e,["parameters","negativePrompt"],o);const a=s(t,["numberOfImages"]);e!==void 0&&a!=null&&r(e,["parameters","sampleCount"],a);const l=s(t,["aspectRatio"]);e!==void 0&&l!=null&&r(e,["parameters","aspectRatio"],l);const u=s(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const f=s(t,["seed"]);e!==void 0&&f!=null&&r(e,["parameters","seed"],f);const c=s(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&r(e,["parameters","safetySetting"],c);const d=s(t,["personGeneration"]);e!==void 0&&d!=null&&r(e,["parameters","personGeneration"],d);const h=s(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&r(e,["parameters","includeSafetyAttributes"],h);const p=s(t,["includeRaiReason"]);e!==void 0&&p!=null&&r(e,["parameters","includeRaiReason"],p);const m=s(t,["language"]);e!==void 0&&m!=null&&r(e,["parameters","language"],m);const g=s(t,["outputMimeType"]);e!==void 0&&g!=null&&r(e,["parameters","outputOptions","mimeType"],g);const y=s(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&r(e,["parameters","outputOptions","compressionQuality"],y);const T=s(t,["editMode"]);e!==void 0&&T!=null&&r(e,["parameters","editMode"],T);const v=s(t,["baseSteps"]);return e!==void 0&&v!=null&&r(e,["parameters","editConfig","baseSteps"],v),n}function KC(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["prompt"]);o!=null&&r(n,["instances[0]","prompt"],o);const a=s(e,["referenceImages"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>OC(f))),r(n,["instances[0]","referenceImages"],u)}const l=s(e,["config"]);return l!=null&&r(n,["config"],WC(l,n)),n}function YC(t,e){const n={},i=s(t,["includeRaiReason"]);e!==void 0&&i!=null&&r(e,["parameters","includeRaiReason"],i);const o=s(t,["outputMimeType"]);e!==void 0&&o!=null&&r(e,["parameters","outputOptions","mimeType"],o);const a=s(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&r(e,["parameters","outputOptions","compressionQuality"],a);const l=s(t,["enhanceInputImage"]);e!==void 0&&l!=null&&r(e,["parameters","upscaleConfig","enhanceInputImage"],l);const u=s(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&r(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const f=s(t,["numberOfImages"]);e!==void 0&&f!=null&&r(e,["parameters","sampleCount"],f);const c=s(t,["mode"]);return e!==void 0&&c!=null&&r(e,["parameters","mode"],c),n}function zC(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["image"]);o!=null&&r(n,["instances[0]","image"],Dn(o));const a=s(e,["upscaleFactor"]);a!=null&&r(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=s(e,["config"]);return l!=null&&r(n,["config"],YC(l,n)),n}function ZC(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","name"],O(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function XC(t,e,n){const i={},o=s(e,["pageSize"]);n!==void 0&&o!=null&&r(n,["_query","pageSize"],o);const a=s(e,["pageToken"]);n!==void 0&&a!=null&&r(n,["_query","pageToken"],a);const l=s(e,["filter"]);n!==void 0&&l!=null&&r(n,["_query","filter"],l);const u=s(e,["queryBase"]);return n!==void 0&&u!=null&&r(n,["_url","models_url"],ou(t,u)),i}function QC(t,e){const n={},i=s(e,["config"]);return i!=null&&r(n,["config"],XC(t,i,n)),n}function jC(t,e){const n={},i=s(t,["displayName"]);e!==void 0&&i!=null&&r(e,["displayName"],i);const o=s(t,["description"]);e!==void 0&&o!=null&&r(e,["description"],o);const a=s(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&r(e,["defaultCheckpointId"],a),n}function e_(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],jC(o,n)),n}function t_(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","name"],O(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function n_(t,e){const n={},i=s(t,["systemInstruction"]);e!==void 0&&i!=null&&r(e,["systemInstruction"],St(se(i)));const o=s(t,["tools"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Tu(u))),r(e,["tools"],l)}const a=s(t,["generationConfig"]);return e!==void 0&&a!=null&&r(e,["generationConfig"],a),n}function i_(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["contents"]);if(o!=null){let l=he(o);Array.isArray(l)&&(l=l.map(u=>St(u))),r(n,["contents"],l)}const a=s(e,["config"]);return a!=null&&r(n,["config"],n_(a,n)),n}function o_(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["contents"]);if(o!=null){let l=he(o);Array.isArray(l)&&(l=l.map(u=>St(u))),r(n,["contents"],l)}const a=s(e,["config"]);return a!=null&&r(n,["config"],a),n}function s_(t){const e={},n=s(t,["uri"]);n!=null&&r(e,["gcsUri"],n);const i=s(t,["videoBytes"]);i!=null&&r(e,["bytesBase64Encoded"],we(i));const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function r_(t,e){const n={},i=s(t,["numberOfVideos"]);e!==void 0&&i!=null&&r(e,["parameters","sampleCount"],i);const o=s(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const a=s(t,["fps"]);e!==void 0&&a!=null&&r(e,["parameters","fps"],a);const l=s(t,["durationSeconds"]);e!==void 0&&l!=null&&r(e,["parameters","durationSeconds"],l);const u=s(t,["seed"]);e!==void 0&&u!=null&&r(e,["parameters","seed"],u);const f=s(t,["aspectRatio"]);e!==void 0&&f!=null&&r(e,["parameters","aspectRatio"],f);const c=s(t,["resolution"]);e!==void 0&&c!=null&&r(e,["parameters","resolution"],c);const d=s(t,["personGeneration"]);e!==void 0&&d!=null&&r(e,["parameters","personGeneration"],d);const h=s(t,["pubsubTopic"]);e!==void 0&&h!=null&&r(e,["parameters","pubsubTopic"],h);const p=s(t,["negativePrompt"]);e!==void 0&&p!=null&&r(e,["parameters","negativePrompt"],p);const m=s(t,["enhancePrompt"]);e!==void 0&&m!=null&&r(e,["parameters","enhancePrompt"],m);const g=s(t,["generateAudio"]);e!==void 0&&g!=null&&r(e,["parameters","generateAudio"],g);const y=s(t,["lastFrame"]);e!==void 0&&y!=null&&r(e,["instances[0]","lastFrame"],Dn(y));const T=s(t,["compressionQuality"]);return e!==void 0&&T!=null&&r(e,["parameters","compressionQuality"],T),n}function a_(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],O(t,i));const o=s(e,["prompt"]);o!=null&&r(n,["instances[0]","prompt"],o);const a=s(e,["image"]);a!=null&&r(n,["instances[0]","image"],Dn(a));const l=s(e,["video"]);l!=null&&r(n,["instances[0]","video"],s_(l));const u=s(e,["config"]);return u!=null&&r(n,["config"],r_(u,n)),n}function l_(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function u_(t){const e={},n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function c_(t){const e={},n=s(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function f_(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],l_(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],u_(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],c_(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const f=s(t,["executableCode"]);f!=null&&r(e,["executableCode"],f);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const d=s(t,["functionResponse"]);d!=null&&r(e,["functionResponse"],d);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function d_(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>f_(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function h_(t){const e={},n=s(t,["citationSources"]);return n!=null&&r(e,["citations"],n),e}function p_(t){const e={},n=s(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const i=s(t,["urlRetrievalStatus"]);return i!=null&&r(e,["urlRetrievalStatus"],i),e}function m_(t){const e={},n=s(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>p_(o))),r(e,["urlMetadata"],i)}return e}function g_(t){const e={},n=s(t,["content"]);n!=null&&r(e,["content"],d_(n));const i=s(t,["citationMetadata"]);i!=null&&r(e,["citationMetadata"],h_(i));const o=s(t,["tokenCount"]);o!=null&&r(e,["tokenCount"],o);const a=s(t,["finishReason"]);a!=null&&r(e,["finishReason"],a);const l=s(t,["urlContextMetadata"]);l!=null&&r(e,["urlContextMetadata"],m_(l));const u=s(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const f=s(t,["groundingMetadata"]);f!=null&&r(e,["groundingMetadata"],f);const c=s(t,["index"]);c!=null&&r(e,["index"],c);const d=s(t,["logprobsResult"]);d!=null&&r(e,["logprobsResult"],d);const h=s(t,["safetyRatings"]);return h!=null&&r(e,["safetyRatings"],h),e}function aa(t){const e={},n=s(t,["candidates"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>g_(u))),r(e,["candidates"],l)}const i=s(t,["modelVersion"]);i!=null&&r(e,["modelVersion"],i);const o=s(t,["promptFeedback"]);o!=null&&r(e,["promptFeedback"],o);const a=s(t,["usageMetadata"]);return a!=null&&r(e,["usageMetadata"],a),e}function y_(t){const e={},n=s(t,["values"]);return n!=null&&r(e,["values"],n),e}function v_(){return{}}function T_(t){const e={},n=s(t,["embeddings"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>y_(a))),r(e,["embeddings"],o)}return s(t,["metadata"])!=null&&r(e,["metadata"],v_()),e}function C_(t){const e={},n=s(t,["bytesBase64Encoded"]);n!=null&&r(e,["imageBytes"],we(n));const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function Cu(t){const e={},n=s(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const i=s(t,["safetyAttributes","scores"]);i!=null&&r(e,["scores"],i);const o=s(t,["contentType"]);return o!=null&&r(e,["contentType"],o),e}function __(t){const e={},n=s(t,["_self"]);n!=null&&r(e,["image"],C_(n));const i=s(t,["raiFilteredReason"]);i!=null&&r(e,["raiFilteredReason"],i);const o=s(t,["_self"]);return o!=null&&r(e,["safetyAttributes"],Cu(o)),e}function S_(t){const e={},n=s(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>__(a))),r(e,["generatedImages"],o)}const i=s(t,["positivePromptSafetyAttributes"]);return i!=null&&r(e,["positivePromptSafetyAttributes"],Cu(i)),e}function E_(t){const e={},n=s(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const i=s(t,["createTime"]);i!=null&&r(e,["createTime"],i);const o=s(t,["updateTime"]);return o!=null&&r(e,["updateTime"],o),e}function Ri(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["displayName"]);i!=null&&r(e,["displayName"],i);const o=s(t,["description"]);o!=null&&r(e,["description"],o);const a=s(t,["version"]);a!=null&&r(e,["version"],a);const l=s(t,["_self"]);l!=null&&r(e,["tunedModelInfo"],E_(l));const u=s(t,["inputTokenLimit"]);u!=null&&r(e,["inputTokenLimit"],u);const f=s(t,["outputTokenLimit"]);f!=null&&r(e,["outputTokenLimit"],f);const c=s(t,["supportedGenerationMethods"]);return c!=null&&r(e,["supportedActions"],c),e}function x_(t){const e={},n=s(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const i=s(t,["_self"]);if(i!=null){let o=su(i);Array.isArray(o)&&(o=o.map(a=>Ri(a))),r(e,["models"],o)}return e}function A_(){return{}}function M_(t){const e={},n=s(t,["totalTokens"]);n!=null&&r(e,["totalTokens"],n);const i=s(t,["cachedContentTokenCount"]);return i!=null&&r(e,["cachedContentTokenCount"],i),e}function I_(t){const e={},n=s(t,["video","uri"]);n!=null&&r(e,["uri"],n);const i=s(t,["video","encodedVideo"]);i!=null&&r(e,["videoBytes"],we(i));const o=s(t,["encoding"]);return o!=null&&r(e,["mimeType"],o),e}function P_(t){const e={},n=s(t,["_self"]);return n!=null&&r(e,["video"],I_(n)),e}function w_(t){const e={},n=s(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>P_(l))),r(e,["generatedVideos"],a)}const i=s(t,["raiMediaFilteredCount"]);i!=null&&r(e,["raiMediaFilteredCount"],i);const o=s(t,["raiMediaFilteredReasons"]);return o!=null&&r(e,["raiMediaFilteredReasons"],o),e}function R_(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["metadata"]);i!=null&&r(e,["metadata"],i);const o=s(t,["done"]);o!=null&&r(e,["done"],o);const a=s(t,["error"]);a!=null&&r(e,["error"],a);const l=s(t,["response","generateVideoResponse"]);return l!=null&&r(e,["response"],w_(l)),e}function D_(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function k_(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["data"]);i!=null&&r(e,["data"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function N_(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["fileUri"]);i!=null&&r(e,["fileUri"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function V_(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],D_(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],k_(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],N_(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const f=s(t,["executableCode"]);f!=null&&r(e,["executableCode"],f);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const d=s(t,["functionResponse"]);d!=null&&r(e,["functionResponse"],d);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function L_(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>V_(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function F_(t){const e={},n=s(t,["citations"]);return n!=null&&r(e,["citations"],n),e}function U_(t){const e={},n=s(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const i=s(t,["urlRetrievalStatus"]);return i!=null&&r(e,["urlRetrievalStatus"],i),e}function b_(t){const e={},n=s(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>U_(o))),r(e,["urlMetadata"],i)}return e}function B_(t){const e={},n=s(t,["content"]);n!=null&&r(e,["content"],L_(n));const i=s(t,["citationMetadata"]);i!=null&&r(e,["citationMetadata"],F_(i));const o=s(t,["finishMessage"]);o!=null&&r(e,["finishMessage"],o);const a=s(t,["finishReason"]);a!=null&&r(e,["finishReason"],a);const l=s(t,["urlContextMetadata"]);l!=null&&r(e,["urlContextMetadata"],b_(l));const u=s(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const f=s(t,["groundingMetadata"]);f!=null&&r(e,["groundingMetadata"],f);const c=s(t,["index"]);c!=null&&r(e,["index"],c);const d=s(t,["logprobsResult"]);d!=null&&r(e,["logprobsResult"],d);const h=s(t,["safetyRatings"]);return h!=null&&r(e,["safetyRatings"],h),e}function la(t){const e={},n=s(t,["candidates"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>B_(c))),r(e,["candidates"],f)}const i=s(t,["createTime"]);i!=null&&r(e,["createTime"],i);const o=s(t,["responseId"]);o!=null&&r(e,["responseId"],o);const a=s(t,["modelVersion"]);a!=null&&r(e,["modelVersion"],a);const l=s(t,["promptFeedback"]);l!=null&&r(e,["promptFeedback"],l);const u=s(t,["usageMetadata"]);return u!=null&&r(e,["usageMetadata"],u),e}function G_(t){const e={},n=s(t,["truncated"]);n!=null&&r(e,["truncated"],n);const i=s(t,["token_count"]);return i!=null&&r(e,["tokenCount"],i),e}function q_(t){const e={},n=s(t,["values"]);n!=null&&r(e,["values"],n);const i=s(t,["statistics"]);return i!=null&&r(e,["statistics"],G_(i)),e}function $_(t){const e={},n=s(t,["billableCharacterCount"]);return n!=null&&r(e,["billableCharacterCount"],n),e}function J_(t){const e={},n=s(t,["predictions[]","embeddings"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>q_(a))),r(e,["embeddings"],o)}const i=s(t,["metadata"]);return i!=null&&r(e,["metadata"],$_(i)),e}function H_(t){const e={},n=s(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const i=s(t,["bytesBase64Encoded"]);i!=null&&r(e,["imageBytes"],we(i));const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function _u(t){const e={},n=s(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const i=s(t,["safetyAttributes","scores"]);i!=null&&r(e,["scores"],i);const o=s(t,["contentType"]);return o!=null&&r(e,["contentType"],o),e}function To(t){const e={},n=s(t,["_self"]);n!=null&&r(e,["image"],H_(n));const i=s(t,["raiFilteredReason"]);i!=null&&r(e,["raiFilteredReason"],i);const o=s(t,["_self"]);o!=null&&r(e,["safetyAttributes"],_u(o));const a=s(t,["prompt"]);return a!=null&&r(e,["enhancedPrompt"],a),e}function O_(t){const e={},n=s(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>To(a))),r(e,["generatedImages"],o)}const i=s(t,["positivePromptSafetyAttributes"]);return i!=null&&r(e,["positivePromptSafetyAttributes"],_u(i)),e}function W_(t){const e={},n=s(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>To(o))),r(e,["generatedImages"],i)}return e}function K_(t){const e={},n=s(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>To(o))),r(e,["generatedImages"],i)}return e}function Y_(t){const e={},n=s(t,["endpoint"]);n!=null&&r(e,["name"],n);const i=s(t,["deployedModelId"]);return i!=null&&r(e,["deployedModelId"],i),e}function z_(t){const e={},n=s(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&r(e,["baseModel"],n);const i=s(t,["createTime"]);i!=null&&r(e,["createTime"],i);const o=s(t,["updateTime"]);return o!=null&&r(e,["updateTime"],o),e}function Z_(t){const e={},n=s(t,["checkpointId"]);n!=null&&r(e,["checkpointId"],n);const i=s(t,["epoch"]);i!=null&&r(e,["epoch"],i);const o=s(t,["step"]);return o!=null&&r(e,["step"],o),e}function Di(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["displayName"]);i!=null&&r(e,["displayName"],i);const o=s(t,["description"]);o!=null&&r(e,["description"],o);const a=s(t,["versionId"]);a!=null&&r(e,["version"],a);const l=s(t,["deployedModels"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>Y_(p))),r(e,["endpoints"],h)}const u=s(t,["labels"]);u!=null&&r(e,["labels"],u);const f=s(t,["_self"]);f!=null&&r(e,["tunedModelInfo"],z_(f));const c=s(t,["defaultCheckpointId"]);c!=null&&r(e,["defaultCheckpointId"],c);const d=s(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(p=>Z_(p))),r(e,["checkpoints"],h)}return e}function X_(t){const e={},n=s(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const i=s(t,["_self"]);if(i!=null){let o=su(i);Array.isArray(o)&&(o=o.map(a=>Di(a))),r(e,["models"],o)}return e}function Q_(){return{}}function j_(t){const e={},n=s(t,["totalTokens"]);return n!=null&&r(e,["totalTokens"],n),e}function eS(t){const e={},n=s(t,["tokensInfo"]);return n!=null&&r(e,["tokensInfo"],n),e}function tS(t){const e={},n=s(t,["gcsUri"]);n!=null&&r(e,["uri"],n);const i=s(t,["bytesBase64Encoded"]);i!=null&&r(e,["videoBytes"],we(i));const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function nS(t){const e={},n=s(t,["_self"]);return n!=null&&r(e,["video"],tS(n)),e}function iS(t){const e={},n=s(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>nS(l))),r(e,["generatedVideos"],a)}const i=s(t,["raiMediaFilteredCount"]);i!=null&&r(e,["raiMediaFilteredCount"],i);const o=s(t,["raiMediaFilteredReasons"]);return o!=null&&r(e,["raiMediaFilteredReasons"],o),e}function oS(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["metadata"]);i!=null&&r(e,["metadata"],i);const o=s(t,["done"]);o!=null&&r(e,["done"],o);const a=s(t,["error"]);a!=null&&r(e,["error"],a);const l=s(t,["response"]);return l!=null&&r(e,["response"],iS(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sS="Content-Type",rS="X-Server-Timeout",aS="User-Agent",ki="x-goog-api-client",lS="1.8.0",uS=`google-genai-sdk/${lS}`,cS="v1beta1",fS="v1beta",ua=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class dS{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:cS,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:fS,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))o.searchParams.append(l,String(u));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(n))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const o=new AbortController,a=o.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>o.abort(),n.timeout),i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=a}return n&&n.extraBody!==null&&hS(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await ca(o),new xi(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await ca(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return lt(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let l="";for(;;){const{done:u,value:f}=yield W(o.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=a.decode(f);try{const h=JSON.parse(c);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),m=p.status,g=p.code,y=`got status: ${m}. ${JSON.stringify(h)}`;if(g>=400&&g<600)throw new wn({message:y,status:g})}}catch(h){if(h.name==="ApiError")throw h}l+=c;let d=l.match(ua);for(;d;){const h=d[1];try{const p=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield W(new xi(p)),l=l.slice(d[0].length),d=l.match(ua)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=uS+" "+this.clientOptions.userAgentExtra;return e[aS]=n,e[ki]=n,e[sS]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))n.append(i,o);e.timeout&&e.timeout>0&&n.append(rS,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);o.sizeBytes=String(l.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const f=await this.fetchUploadUrl(o,n);return a.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let o={};n!=null&&n.httpOptions?o=n.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},l=await this.request({path:V("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:o});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(i=l==null?void 0:l.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function ca(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new wn({message:o,status:n}):new Error(o)}}function hS(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){const u=Object.assign({},a);for(const f in l)if(Object.prototype.hasOwnProperty.call(l,f)){const c=l[f],d=u[f];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?u[f]=i(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),u[f]=c)}return u}const o=i(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pS="mcp_used/unknown";function Su(t){for(const e of t)if(Co(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function Eu(t){var e;const n=(e=t[ki])!==null&&e!==void 0?e:"";t[ki]=(n+` ${pS}`).trimStart()}function mS(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>Co(o)))!==null&&i!==void 0?i:!1}function gS(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>!Co(o)))!==null&&i!==void 0?i:!1}function Co(t){return t!==null&&typeof t=="object"&&t instanceof _o}function yS(t,e=100){return lt(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield W(t.listTools({cursor:i}));for(const l of a.tools)yield yield W(l),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class _o{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new _o(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;const a={},l=[];for(const d of this.mcpClients)try{for(var u=!0,f=(n=void 0,Vt(yS(d))),c;c=await f.next(),e=c.done,!e;u=!0){o=c.value,u=!1;const h=o;l.push(h);const p=h.name;if(a[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);a[p]=d}}catch(h){n={error:h}}finally{try{!u&&!e&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),cm(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await o.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function vS(t,e,n){const i=new jp;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data);const a=MT(o);Object.assign(i,a),e(i)}class TS{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=SS(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const d=new Promise(_=>{c=_}),h=e.callbacks,p=function(){c({})},m=this.apiClient,g={onopen:p,onmessage:_=>{vS(m,h.onmessage,_)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(_){},onclose:(i=h==null?void 0:h.onclose)!==null&&i!==void 0?i:function(_){}},y=this.webSocketFactory.create(f,_S(l),g);y.connect(),await d;const T=O(this.apiClient,e.model),v=gu({model:T}),C=wi({setup:v});return y.send(JSON.stringify(C)),new CS(y,this.apiClient)}}class CS{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Gv(e),i=yu(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=qv(e),i=wi(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const n=wi({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(rt.PLAY)}pause(){this.sendPlaybackControl(rt.PAUSE)}stop(){this.sendPlaybackControl(rt.STOP)}resetContext(){this.sendPlaybackControl(rt.RESET_CONTEXT)}close(){this.conn.close()}}function _S(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function SS(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ES="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function xS(t,e,n){const i=new Qp;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const a=JSON.parse(o);if(t.isVertexAI()){const l=yT(a);Object.assign(i,l)}else{const l=gT(a);Object.assign(i,l)}e(i)}class AS{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new TS(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,a,l,u;const f=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const h=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&Su(e.config.tools)&&Eu(h);const p=wS(h);if(this.apiClient.isVertexAI())d=`${f}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const R=this.apiClient.getApiKey();let F="BidiGenerateContent",q="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),F="BidiGenerateContentConstrained",q="access_token"),d=`${f}/ws/google.ai.generativelanguage.${c}.GenerativeService.${F}?${q}=${R}`}let m=()=>{};const g=new Promise(R=>{m=R}),y=e.callbacks,T=function(){var R;(R=y==null?void 0:y.onopen)===null||R===void 0||R.call(y),m({})},v=this.apiClient,C={onopen:T,onmessage:R=>{xS(v,y.onmessage,R)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(R){}},_=this.webSocketFactory.create(d,PS(p),C);_.connect(),await g;let E=O(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const R=this.apiClient.getProject(),F=this.apiClient.getLocation();E=`projects/${R}/locations/${F}/`+E}let S={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Sn.AUDIO]}:e.config.responseModalities=[Sn.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const A=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],I=[];for(const R of A)if(this.isCallableTool(R)){const F=R;I.push(await F.tool())}else I.push(R);I.length>0&&(e.config.tools=I);const w={model:E,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?S=Nv(this.apiClient,w):S=kv(this.apiClient,w),delete S.config,_.send(JSON.stringify(S)),new IS(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const MS={turnComplete:!0};class IS{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=he(n.turns),e.isVertexAI()?i=i.map(o=>St(o)):i=i.map(o=>Rn(o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(ES)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},MS),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Bv(e)}:n={realtimeInput:bv(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function PS(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function wS(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fa=10;function da(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(cn(l)){o=!0;break}if(!o)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function cn(t){return"callTool"in t&&typeof t.callTool=="function"}function ha(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RS extends Qe{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,a,l,u;const f=await this.processParamsForMcpUsage(n);if(!mS(n)||da(n.config))return await this.generateContentInternal(f);if(gS(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,d;const h=he(f.contents),p=(a=(o=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:fa;let m=0;for(;m<p&&(c=await this.generateContentInternal(f),!(!c.functionCalls||c.functionCalls.length===0));){const g=c.candidates[0].content,y=[];for(const T of(u=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(cn(T)){const C=await T.callTool(c.functionCalls);y.push(...C)}m++,d={role:"user",parts:y},f.contents=he(f.contents),f.contents.push(g),f.contents.push(d),ha(f.config)&&(h.push(g),h.push(d))}return ha(f.config)&&(c.automaticFunctionCallingHistory=h),c},this.generateContentStream=async n=>{if(da(n.config)){const i=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let a;const l=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((o=f==null?void 0:f.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=f==null?void 0:f.safetyAttributes:l.push(f);let u;return a?u={generatedImages:l,positivePromptSafetyAttributes:a}:u={generatedImages:l},u}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Yt(Xe.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)}}async processParamsForMcpUsage(e){var n,i,o;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const l=await Promise.all(a.map(async f=>cn(f)?await f.tool():f)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&Su(e.config.tools)){const f=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},f);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Eu(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var n,i,o;const a=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(cn(l)){const u=l,f=await u.tool();for(const c of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(a.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);a.set(c.name,u)}}return a}async processAfcStream(e){var n,i,o;const a=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:fa;let l=!1,u=0;const f=await this.initAfcToolsMap(e);return function(c,d,h){var p,m;return lt(this,arguments,function*(){for(var g,y,T,v;u<a;){l&&(u++,l=!1);const S=yield W(c.processParamsForMcpUsage(h)),A=yield W(c.generateContentStreamInternal(S)),I=[],w=[];try{for(var C=!0,_=(y=void 0,Vt(A)),E;E=yield W(_.next()),g=E.done,!g;C=!0){v=E.value,C=!1;const R=v;if(yield yield W(R),R.candidates&&(!((p=R.candidates[0])===null||p===void 0)&&p.content)){w.push(R.candidates[0].content);for(const F of(m=R.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(u<a&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(F.functionCall.name)){const q=yield W(d.get(F.functionCall.name).callTool([F.functionCall]));I.push(...q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(R){y={error:R}}finally{try{!C&&!g&&(T=_.return)&&(yield W(T.call(_)))}finally{if(y)throw y.error}}if(I.length>0){l=!0;const R=new At;R.candidates=[{content:{role:"user",parts:I}}],yield yield W(R);const F=[];F.push(...w),F.push({role:"user",parts:I});const q=he(h.contents).concat(F);h.contents=q}else break}})}(this,f,e)}async generateContentInternal(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=ra(this.apiClient,e);return u=V("{model}:generateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>{const h=la(d),p=new At;return Object.assign(p,h),p})}else{const c=sa(this.apiClient,e);return u=V("{model}:generateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>{const h=aa(d),p=new At;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=ra(this.apiClient,e);return u=V("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(h){return lt(this,arguments,function*(){var p,m,g,y;try{for(var T=!0,v=Vt(h),C;C=yield W(v.next()),p=C.done,!p;T=!0){y=C.value,T=!1;const E=la(yield W(y.json())),S=new At;Object.assign(S,E),yield yield W(S)}}catch(_){m={error:_}}finally{try{!T&&!p&&(g=v.return)&&(yield W(g.call(v)))}finally{if(m)throw m.error}}})})}else{const c=sa(this.apiClient,e);return u=V("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(h){return lt(this,arguments,function*(){var p,m,g,y;try{for(var T=!0,v=Vt(h),C;C=yield W(v.next()),p=C.done,!p;T=!0){y=C.value,T=!1;const E=aa(yield W(y.json())),S=new At;Object.assign(S,E),yield yield W(S)}}catch(_){m={error:_}}finally{try{!T&&!p&&(g=v.return)&&(yield W(g.call(v)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=bC(this.apiClient,e);return u=V("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>{const h=J_(d),p=new br;return Object.assign(p,h),p})}else{const c=XT(this.apiClient,e);return u=V("{model}:batchEmbedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>{const h=T_(d),p=new br;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=GC(this.apiClient,e);return u=V("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>{const h=O_(d),p=new Br;return Object.assign(p,h),p})}else{const c=jT(this.apiClient,e);return u=V("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>{const h=S_(d),p=new Br;return Object.assign(p,h),p})}}async editImageInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=KC(this.apiClient,e);return a=V("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=W_(f),d=new Wp;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=zC(this.apiClient,e);return a=V("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=K_(f),d=new Kp;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=ZC(this.apiClient,e);return u=V("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>Di(d))}else{const c=eC(this.apiClient,e);return u=V("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>Ri(d))}}async listInternal(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=QC(this.apiClient,e);return u=V("{models_url}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>{const h=X_(d),p=new Gr;return Object.assign(p,h),p})}else{const c=nC(this.apiClient,e);return u=V("{models_url}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>{const h=x_(d),p=new Gr;return Object.assign(p,h),p})}}async update(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=e_(this.apiClient,e);return u=V("{model}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>Di(d))}else{const c=oC(this.apiClient,e);return u=V("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>Ri(d))}}async delete(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=t_(this.apiClient,e);return u=V("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(()=>{const d=Q_(),h=new qr;return Object.assign(h,d),h})}else{const c=sC(this.apiClient,e);return u=V("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(()=>{const d=A_(),h=new qr;return Object.assign(h,d),h})}}async countTokens(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=i_(this.apiClient,e);return u=V("{model}:countTokens",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>{const h=j_(d),p=new $r;return Object.assign(p,h),p})}else{const c=aC(this.apiClient,e);return u=V("{model}:countTokens",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>{const h=M_(d),p=new $r;return Object.assign(p,h),p})}}async computeTokens(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=o_(this.apiClient,e);return a=V("{model}:computeTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=eS(f),d=new Yp;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=a_(this.apiClient,e);return u=V("{model}:predictLongRunning",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>oS(d))}else{const c=cC(this.apiClient,e);return u=V("{model}:predictLongRunning",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>R_(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DS(t){const e={},n=s(t,["operationName"]);n!=null&&r(e,["_url","operationName"],n);const i=s(t,["config"]);return i!=null&&r(e,["config"],i),e}function kS(t){const e={},n=s(t,["operationName"]);n!=null&&r(e,["_url","operationName"],n);const i=s(t,["config"]);return i!=null&&r(e,["config"],i),e}function NS(t){const e={},n=s(t,["operationName"]);n!=null&&r(e,["operationName"],n);const i=s(t,["resourceName"]);i!=null&&r(e,["_url","resourceName"],i);const o=s(t,["config"]);return o!=null&&r(e,["config"],o),e}function VS(t){const e={},n=s(t,["video","uri"]);n!=null&&r(e,["uri"],n);const i=s(t,["video","encodedVideo"]);i!=null&&r(e,["videoBytes"],we(i));const o=s(t,["encoding"]);return o!=null&&r(e,["mimeType"],o),e}function LS(t){const e={},n=s(t,["_self"]);return n!=null&&r(e,["video"],VS(n)),e}function FS(t){const e={},n=s(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>LS(l))),r(e,["generatedVideos"],a)}const i=s(t,["raiMediaFilteredCount"]);i!=null&&r(e,["raiMediaFilteredCount"],i);const o=s(t,["raiMediaFilteredReasons"]);return o!=null&&r(e,["raiMediaFilteredReasons"],o),e}function US(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["metadata"]);i!=null&&r(e,["metadata"],i);const o=s(t,["done"]);o!=null&&r(e,["done"],o);const a=s(t,["error"]);a!=null&&r(e,["error"],a);const l=s(t,["response","generateVideoResponse"]);return l!=null&&r(e,["response"],FS(l)),e}function bS(t){const e={},n=s(t,["gcsUri"]);n!=null&&r(e,["uri"],n);const i=s(t,["bytesBase64Encoded"]);i!=null&&r(e,["videoBytes"],we(i));const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function BS(t){const e={},n=s(t,["_self"]);return n!=null&&r(e,["video"],bS(n)),e}function GS(t){const e={},n=s(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>BS(l))),r(e,["generatedVideos"],a)}const i=s(t,["raiMediaFilteredCount"]);i!=null&&r(e,["raiMediaFilteredCount"],i);const o=s(t,["raiMediaFilteredReasons"]);return o!=null&&r(e,["raiMediaFilteredReasons"],o),e}function pa(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["metadata"]);i!=null&&r(e,["metadata"],i);const o=s(t,["done"]);o!=null&&r(e,["done"],o);const a=s(t,["error"]);a!=null&&r(e,["error"],a);const l=s(t,["response"]);return l!=null&&r(e,["response"],GS(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qS extends Qe{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;return i&&"httpOptions"in i&&(a=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}})}else return this.getVideosOperationInternal({operationName:n.name,config:i})}async getVideosOperationInternal(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=kS(e);return u=V("{operationName}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>pa(d))}else{const c=DS(e);return u=V("{operationName}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>US(d))}}async fetchPredictVideosOperationInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=NS(e);return a=V("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>pa(f))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $S(t){const e={},n=s(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function xu(t){const e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],$S(n)),e}function JS(t){const e={},n=s(t,["speaker"]);n!=null&&r(e,["speaker"],n);const i=s(t,["voiceConfig"]);return i!=null&&r(e,["voiceConfig"],xu(i)),e}function HS(t){const e={},n=s(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>JS(o))),r(e,["speakerVoiceConfigs"],i)}return e}function OS(t){const e={},n=s(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],xu(n));const i=s(t,["multiSpeakerVoiceConfig"]);i!=null&&r(e,["multiSpeakerVoiceConfig"],HS(i));const o=s(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function WS(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function KS(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function YS(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function zS(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],WS(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],KS(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],YS(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const f=s(t,["executableCode"]);f!=null&&r(e,["executableCode"],f);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const d=s(t,["functionResponse"]);d!=null&&r(e,["functionResponse"],d);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function ZS(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>zS(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function XS(t){const e={},n=s(t,["behavior"]);n!=null&&r(e,["behavior"],n);const i=s(t,["description"]);i!=null&&r(e,["description"],i);const o=s(t,["name"]);o!=null&&r(e,["name"],o);const a=s(t,["parameters"]);a!=null&&r(e,["parameters"],a);const l=s(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const u=s(t,["response"]);u!=null&&r(e,["response"],u);const f=s(t,["responseJsonSchema"]);return f!=null&&r(e,["responseJsonSchema"],f),e}function QS(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function jS(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],QS(n)),e}function eE(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function tE(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],eE(n)),e}function nE(){return{}}function iE(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(c=>XS(c))),r(e,["functionDeclarations"],f)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(t,["googleSearch"]);i!=null&&r(e,["googleSearch"],jS(i));const o=s(t,["googleSearchRetrieval"]);if(o!=null&&r(e,["googleSearchRetrieval"],tE(o)),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(t,["urlContext"])!=null&&r(e,["urlContext"],nE());const l=s(t,["codeExecution"]);l!=null&&r(e,["codeExecution"],l);const u=s(t,["computerUse"]);return u!=null&&r(e,["computerUse"],u),e}function oE(t){const e={},n=s(t,["handle"]);if(n!=null&&r(e,["handle"],n),s(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ma(){return{}}function sE(t){const e={},n=s(t,["disabled"]);n!=null&&r(e,["disabled"],n);const i=s(t,["startOfSpeechSensitivity"]);i!=null&&r(e,["startOfSpeechSensitivity"],i);const o=s(t,["endOfSpeechSensitivity"]);o!=null&&r(e,["endOfSpeechSensitivity"],o);const a=s(t,["prefixPaddingMs"]);a!=null&&r(e,["prefixPaddingMs"],a);const l=s(t,["silenceDurationMs"]);return l!=null&&r(e,["silenceDurationMs"],l),e}function rE(t){const e={},n=s(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],sE(n));const i=s(t,["activityHandling"]);i!=null&&r(e,["activityHandling"],i);const o=s(t,["turnCoverage"]);return o!=null&&r(e,["turnCoverage"],o),e}function aE(t){const e={},n=s(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function lE(t){const e={},n=s(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const i=s(t,["slidingWindow"]);return i!=null&&r(e,["slidingWindow"],aE(i)),e}function uE(t){const e={},n=s(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function cE(t,e){const n={},i=s(t,["generationConfig"]);e!==void 0&&i!=null&&r(e,["setup","generationConfig"],i);const o=s(t,["responseModalities"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig","responseModalities"],o);const a=s(t,["temperature"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","temperature"],a);const l=s(t,["topP"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","topP"],l);const u=s(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const f=s(t,["maxOutputTokens"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","maxOutputTokens"],f);const c=s(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const d=s(t,["seed"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","seed"],d);const h=s(t,["speechConfig"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","speechConfig"],OS(vo(h)));const p=s(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=s(t,["systemInstruction"]);e!==void 0&&m!=null&&r(e,["setup","systemInstruction"],ZS(se(m)));const g=s(t,["tools"]);if(e!==void 0&&g!=null){let S=Ct(g);Array.isArray(S)&&(S=S.map(A=>iE(Tt(A)))),r(e,["setup","tools"],S)}const y=s(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],oE(y));const T=s(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&r(e,["setup","inputAudioTranscription"],ma());const v=s(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&r(e,["setup","outputAudioTranscription"],ma());const C=s(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&r(e,["setup","realtimeInputConfig"],rE(C));const _=s(t,["contextWindowCompression"]);e!==void 0&&_!=null&&r(e,["setup","contextWindowCompression"],lE(_));const E=s(t,["proactivity"]);return e!==void 0&&E!=null&&r(e,["setup","proactivity"],uE(E)),n}function fE(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["setup","model"],O(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],cE(o,n)),n}function dE(t,e,n){const i={},o=s(e,["expireTime"]);n!==void 0&&o!=null&&r(n,["expireTime"],o);const a=s(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&r(n,["newSessionExpireTime"],a);const l=s(e,["uses"]);n!==void 0&&l!=null&&r(n,["uses"],l);const u=s(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&r(n,["bidiGenerateContentSetup"],fE(t,u));const f=s(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&r(n,["fieldMask"],f),i}function hE(t,e){const n={},i=s(e,["config"]);return i!=null&&r(n,["config"],dE(t,i,n)),n}function pE(t){const e={},n=s(t,["name"]);return n!=null&&r(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mE(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${n}.${a}`);e.push(...o)}else e.push(n)}return e.join(",")}function gE(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const a=mE(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(c=>l.includes(c)?`generationConfig.${c}`:c));const f=[];a&&f.push(a),u.length>0&&f.push(...u),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class yE extends Qe{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=hE(this.apiClient,e);a=V("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const f=gE(u,e.config);return o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>pE(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vE(t){const e={},n=s(t,["name"]);n!=null&&r(e,["_url","name"],n);const i=s(t,["config"]);return i!=null&&r(e,["config"],i),e}function TE(t,e){const n={},i=s(t,["pageSize"]);e!==void 0&&i!=null&&r(e,["_query","pageSize"],i);const o=s(t,["pageToken"]);e!==void 0&&o!=null&&r(e,["_query","pageToken"],o);const a=s(t,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),n}function CE(t){const e={},n=s(t,["config"]);return n!=null&&r(e,["config"],TE(n,e)),e}function _E(t){const e={},n=s(t,["textInput"]);n!=null&&r(e,["textInput"],n);const i=s(t,["output"]);return i!=null&&r(e,["output"],i),e}function SE(t){const e={};if(s(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=s(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>_E(o))),r(e,["examples","examples"],i)}return e}function EE(t,e){const n={};if(s(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=s(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&r(e,["displayName"],i),s(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=s(t,["epochCount"]);e!==void 0&&o!=null&&r(e,["tuningTask","hyperparameters","epochCount"],o);const a=s(t,["learningRateMultiplier"]);if(a!=null&&r(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),s(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(s(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=s(t,["batchSize"]);e!==void 0&&l!=null&&r(e,["tuningTask","hyperparameters","batchSize"],l);const u=s(t,["learningRate"]);return e!==void 0&&u!=null&&r(e,["tuningTask","hyperparameters","learningRate"],u),n}function xE(t){const e={},n=s(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const i=s(t,["trainingDataset"]);i!=null&&r(e,["tuningTask","trainingData"],SE(i));const o=s(t,["config"]);return o!=null&&r(e,["config"],EE(o,e)),e}function AE(t){const e={},n=s(t,["name"]);n!=null&&r(e,["_url","name"],n);const i=s(t,["config"]);return i!=null&&r(e,["config"],i),e}function ME(t,e){const n={},i=s(t,["pageSize"]);e!==void 0&&i!=null&&r(e,["_query","pageSize"],i);const o=s(t,["pageToken"]);e!==void 0&&o!=null&&r(e,["_query","pageToken"],o);const a=s(t,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),n}function IE(t){const e={},n=s(t,["config"]);return n!=null&&r(e,["config"],ME(n,e)),e}function PE(t,e){const n={},i=s(t,["gcsUri"]);e!==void 0&&i!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],i);const o=s(t,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],o),s(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function wE(t,e){const n={},i=s(t,["gcsUri"]);i!=null&&r(n,["validationDatasetUri"],i);const o=s(t,["vertexDatasetResource"]);return e!==void 0&&o!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],o),n}function RE(t,e){const n={},i=s(t,["validationDataset"]);e!==void 0&&i!=null&&r(e,["supervisedTuningSpec"],wE(i,n));const o=s(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&r(e,["tunedModelDisplayName"],o);const a=s(t,["description"]);e!==void 0&&a!=null&&r(e,["description"],a);const l=s(t,["epochCount"]);e!==void 0&&l!=null&&r(e,["supervisedTuningSpec","hyperParameters","epochCount"],l);const u=s(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&r(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const f=s(t,["exportLastCheckpointOnly"]);e!==void 0&&f!=null&&r(e,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const c=s(t,["adapterSize"]);if(e!==void 0&&c!=null&&r(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),s(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(s(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function DE(t){const e={},n=s(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const i=s(t,["trainingDataset"]);i!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],PE(i,e));const o=s(t,["config"]);return o!=null&&r(e,["config"],RE(o,e)),e}function kE(t){const e={},n=s(t,["name"]);n!=null&&r(e,["model"],n);const i=s(t,["name"]);return i!=null&&r(e,["endpoint"],i),e}function Au(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["state"]);i!=null&&r(e,["state"],nu(i));const o=s(t,["createTime"]);o!=null&&r(e,["createTime"],o);const a=s(t,["tuningTask","startTime"]);a!=null&&r(e,["startTime"],a);const l=s(t,["tuningTask","completeTime"]);l!=null&&r(e,["endTime"],l);const u=s(t,["updateTime"]);u!=null&&r(e,["updateTime"],u);const f=s(t,["description"]);f!=null&&r(e,["description"],f);const c=s(t,["baseModel"]);c!=null&&r(e,["baseModel"],c);const d=s(t,["_self"]);d!=null&&r(e,["tunedModel"],kE(d));const h=s(t,["distillationSpec"]);h!=null&&r(e,["distillationSpec"],h);const p=s(t,["experiment"]);p!=null&&r(e,["experiment"],p);const m=s(t,["labels"]);m!=null&&r(e,["labels"],m);const g=s(t,["pipelineJob"]);g!=null&&r(e,["pipelineJob"],g);const y=s(t,["satisfiesPzi"]);y!=null&&r(e,["satisfiesPzi"],y);const T=s(t,["satisfiesPzs"]);T!=null&&r(e,["satisfiesPzs"],T);const v=s(t,["serviceAccount"]);v!=null&&r(e,["serviceAccount"],v);const C=s(t,["tunedModelDisplayName"]);return C!=null&&r(e,["tunedModelDisplayName"],C),e}function NE(t){const e={},n=s(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const i=s(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Au(a))),r(e,["tuningJobs"],o)}return e}function VE(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["metadata"]);i!=null&&r(e,["metadata"],i);const o=s(t,["done"]);o!=null&&r(e,["done"],o);const a=s(t,["error"]);return a!=null&&r(e,["error"],a),e}function LE(t){const e={},n=s(t,["checkpointId"]);n!=null&&r(e,["checkpointId"],n);const i=s(t,["epoch"]);i!=null&&r(e,["epoch"],i);const o=s(t,["step"]);o!=null&&r(e,["step"],o);const a=s(t,["endpoint"]);return a!=null&&r(e,["endpoint"],a),e}function FE(t){const e={},n=s(t,["model"]);n!=null&&r(e,["model"],n);const i=s(t,["endpoint"]);i!=null&&r(e,["endpoint"],i);const o=s(t,["checkpoints"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>LE(l))),r(e,["checkpoints"],a)}return e}function Ni(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["state"]);i!=null&&r(e,["state"],nu(i));const o=s(t,["createTime"]);o!=null&&r(e,["createTime"],o);const a=s(t,["startTime"]);a!=null&&r(e,["startTime"],a);const l=s(t,["endTime"]);l!=null&&r(e,["endTime"],l);const u=s(t,["updateTime"]);u!=null&&r(e,["updateTime"],u);const f=s(t,["error"]);f!=null&&r(e,["error"],f);const c=s(t,["description"]);c!=null&&r(e,["description"],c);const d=s(t,["baseModel"]);d!=null&&r(e,["baseModel"],d);const h=s(t,["tunedModel"]);h!=null&&r(e,["tunedModel"],FE(h));const p=s(t,["supervisedTuningSpec"]);p!=null&&r(e,["supervisedTuningSpec"],p);const m=s(t,["tuningDataStats"]);m!=null&&r(e,["tuningDataStats"],m);const g=s(t,["encryptionSpec"]);g!=null&&r(e,["encryptionSpec"],g);const y=s(t,["partnerModelTuningSpec"]);y!=null&&r(e,["partnerModelTuningSpec"],y);const T=s(t,["distillationSpec"]);T!=null&&r(e,["distillationSpec"],T);const v=s(t,["experiment"]);v!=null&&r(e,["experiment"],v);const C=s(t,["labels"]);C!=null&&r(e,["labels"],C);const _=s(t,["pipelineJob"]);_!=null&&r(e,["pipelineJob"],_);const E=s(t,["satisfiesPzi"]);E!=null&&r(e,["satisfiesPzi"],E);const S=s(t,["satisfiesPzs"]);S!=null&&r(e,["satisfiesPzs"],S);const A=s(t,["serviceAccount"]);A!=null&&r(e,["serviceAccount"],A);const I=s(t,["tunedModelDisplayName"]);return I!=null&&r(e,["tunedModelDisplayName"],I),e}function UE(t){const e={},n=s(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const i=s(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Ni(a))),r(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bE extends Qe{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Yt(Xe.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:Ei.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=AE(e);return u=V("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>Ni(d))}else{const c=vE(e);return u=V("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>Au(d))}}async listInternal(e){var n,i,o,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=IE(e);return u=V("tuningJobs",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>{const h=UE(d),p=new Jr;return Object.assign(p,h),p})}else{const c=CE(e);return u=V("tunedModels",c._url),f=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),l.then(d=>{const h=NE(d),p=new Jr;return Object.assign(p,h),p})}}async tuneInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=DE(e);return a=V("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Ni(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=xE(e);return a=V("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>VE(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BE{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const GE=1024*1024*8,qE=3,$E=1e3,JE=2,zn="x-goog-upload-status";async function HE(t,e,n){var i,o,a;let l=0,u=0,f=new xi(new Response),c="upload";for(l=t.size;u<l;){const h=Math.min(GE,l-u),p=t.slice(u,u+h);u+h>=l&&(c+=", finalize");let m=0,g=$E;for(;m<qE&&(f=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[zn]));)m++,await WE(g),g=g*JE;if(u+=h,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[zn])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(f==null?void 0:f.json());if(((a=f==null?void 0:f.headers)===null||a===void 0?void 0:a[zn])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function OE(t){return{size:t.size,type:t.type}}function WE(t){return new Promise(e=>setTimeout(e,t))}class KE{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await HE(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await OE(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YE{create(e,n,i){return new zE(e,n,i)}}class zE{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ga="x-goog-api-key";class ZE{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(ga)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ga,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XE="gl-node/";class ix{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=Op(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new ZE(this.apiKey);this.apiClient=new dS({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:XE+"web",uploader:new KE,downloader:new BE}),this.models=new RS(this.apiClient),this.live=new AS(this.apiClient,o,new YE),this.batches=new Tg(this.apiClient),this.chats=new Ey(this.models,this.apiClient),this.caches=new Cy(this.apiClient),this.files=new Fy(this.apiClient),this.operations=new qS(this.apiClient),this.authTokens=new yE(this.apiClient),this.tunings=new bE(this.apiClient)}}export{ex as A,ix as G,nx as m,jE as r};
